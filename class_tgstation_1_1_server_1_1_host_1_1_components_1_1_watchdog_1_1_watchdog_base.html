<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tgstation-server: Tgstation.Server.Host.Components.Watchdog.WatchdogBase Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="tgs.ico"/></td>
  <td id="projectalign">
   <div id="projectname">tgstation-server<span id="projectnumber">&#160;5.13.1</span>
   </div>
   <div id="projectbrief">The /tg/station 13 server suite</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_tgstation.html">Tgstation</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server.html">Server</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host.html">Host</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components.html">Components</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html">Watchdog</a></li><li class="navelem"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html">WatchdogBase</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#properties">Properties</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Tgstation.Server.Host.Components.Watchdog.WatchdogBase Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div></div>
</div><!--header-->
<div class="contents">

<p>Base class for <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html" title="Runs and monitors the twin server controllers.">IWatchdog</a>s.   
 <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for Tgstation.Server.Host.Components.Watchdog.WatchdogBase:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base__inherit__graph.png" border="0" usemap="#a_tgstation_8_server_8_host_8_components_8_watchdog_8_watchdog_base_inherit__map" alt="Inheritance graph"/></div>
<map name="a_tgstation_8_server_8_host_8_components_8_watchdog_8_watchdog_base_inherit__map" id="a_tgstation_8_server_8_host_8_components_8_watchdog_8_watchdog_base_inherit__map">
<area shape="rect" title="Base class for IWatchdogs." alt="" coords="343,225,569,265"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html" title="A IWatchdog that manages one server." alt="" coords="343,313,569,353"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html" title="Runs and monitors the twin server controllers." alt="" coords="261,152,345,177"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_component_service.html" title="Represents a component meant to be started and stopped by its parent component." alt="" coords="5,79,141,104"/>
<area shape="rect" href="class_i_hosted_service.html" title=" " alt="" coords="17,5,129,31"/>
<area shape="rect" href="class_i_async_disposable.html" title=" " alt="" coords="166,79,293,104"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html" title="Consumes EventTypes and takes the appropriate actions." alt="" coords="317,79,435,104"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_rename_notifyee.html" title="Handler for an instance being renamed." alt="" coords="460,79,583,104"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_custom_command_handler.html" title="Handles Commands.ICommands that map to those defined in a IChatTrackingContext." alt="" coords="369,152,543,177"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_restart_handler.html" title="Handler for server restarts." alt="" coords="567,152,681,177"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_windows_watchdog.html" title="A IWatchdog that, instead of killing servers for updates, uses the wonders of symlinks to swap out ch..." alt="" coords="343,401,569,441"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_posix_watchdog.html" title="A variant of the WindowsWatchdog that works on POSIX systems." alt="" coords="343,489,569,529"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for Tgstation.Server.Host.Components.Watchdog.WatchdogBase:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base__coll__graph.png" border="0" usemap="#a_tgstation_8_server_8_host_8_components_8_watchdog_8_watchdog_base_coll__map" alt="Collaboration graph"/></div>
<map name="a_tgstation_8_server_8_host_8_components_8_watchdog_8_watchdog_base_coll__map" id="a_tgstation_8_server_8_host_8_components_8_watchdog_8_watchdog_base_coll__map">
<area shape="rect" title="Base class for IWatchdogs." alt="" coords="864,454,1091,494"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html" title="Runs and monitors the twin server controllers." alt="" coords="439,79,523,104"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_component_service.html" title="Represents a component meant to be started and stopped by its parent component." alt="" coords="167,5,303,31"/>
<area shape="rect" href="class_i_hosted_service.html" title=" " alt="" coords="5,5,117,31"/>
<area shape="rect" href="class_i_async_disposable.html" title=" " alt="" coords="171,55,298,80"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html" title="Consumes EventTypes and takes the appropriate actions." alt="" coords="175,104,294,129"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_rename_notifyee.html" title="Handler for an instance being renamed." alt="" coords="173,153,296,179"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_custom_command_handler.html" title="Handles Commands.ICommands that map to those defined in a IChatTrackingContext." alt="" coords="394,128,569,153"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_restart_handler.html" title="Handler for server restarts." alt="" coords="425,177,538,203"/>
<area shape="rect" title=" " alt="" coords="461,227,502,252"/>
<area shape="rect" title=" " alt="" coords="399,276,564,301"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html" title="Consumes EventTypes and takes the appropriate actions." alt="" coords="368,326,595,366"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html" title="Manages the runtime of Jobs." alt="" coords="390,390,573,430"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_restart_registration.html" title="Represents the lifetime of a IRestartHandler registration." alt="" coords="391,454,572,494"/>
<area shape="rect" href="class_i_disposable.html" title=" " alt="" coords="189,461,280,487"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html" title="Interface for using filesystems." alt="" coords="397,518,565,558"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html" title="Factory for creating IRemoteDeploymentManagers." alt="" coords="352,583,611,637"/>
<area shape="rect" title=" " alt="" coords="458,661,505,687"/>
<area shape="rect" title=" " alt="" coords="396,711,567,736"/>
<area shape="rect" title=" " alt="" coords="456,760,507,785"/>
<area shape="rect" title=" " alt="" coords="422,809,541,835"/>
<area shape="rect" title=" " alt="" coords="462,859,501,884"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6f69db8c3ceae298404f5d8d5a7312b3"><td class="memItemLeft" align="right" valign="top">async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6f69db8c3ceae298404f5d8d5a7312b3">DisposeAsync</a> ()</td></tr>
<tr class="separator:a6f69db8c3ceae298404f5d8d5a7312b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a390fcde5ed6ed30d6e5b5b2ebc8273dc"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a390fcde5ed6ed30d6e5b5b2ebc8273dc">ChangeSettings</a> (<a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a> launchParameters, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a390fcde5ed6ed30d6e5b5b2ebc8273dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Changes the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a19270c2054e4431802fdf5a59f9b3518" title="The DreamDaemonLaunchParameters to be applied.">ActiveLaunchParameters</a>. If currently running, may trigger a graceful restart. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">launchParameters</td><td>The new DreamDaemonLaunchParameters. May be modified.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a390fcde5ed6ed30d6e5b5b2ebc8273dc">More...</a><br /></td></tr>
<tr class="separator:a390fcde5ed6ed30d6e5b5b2ebc8273dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75d69d7ce07458b0d83124a1315c1c37"><td class="memItemLeft" align="right" valign="top">async Task&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html">MessageContent</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a75d69d7ce07458b0d83124a1315c1c37">HandleChatCommand</a> (string commandName, string arguments, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_chat_user.html">ChatUser</a> sender, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a75d69d7ce07458b0d83124a1315c1c37"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a chat command. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">commandName</td><td>The command name.</td></tr>
    <tr><td class="paramname">arguments</td><td>Everything typed after <em>commandName</em>  minus leading spaces.</td></tr>
    <tr><td class="paramname">sender</td><td>The sending <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_chat_user.html" title="Represents a tgs_chat_user datum.">ChatUser</a>.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task&lt;TResult&gt; resulting in the MessageContent text to send back.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a75d69d7ce07458b0d83124a1315c1c37">More...</a><br /></td></tr>
<tr class="separator:a75d69d7ce07458b0d83124a1315c1c37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af619caa031c183aa1aa5adbcf11a3434"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af619caa031c183aa1aa5adbcf11a3434">Launch</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:af619caa031c183aa1aa5adbcf11a3434"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html" title="Runs and monitors the twin server controllers.">IWatchdog</a>. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af619caa031c183aa1aa5adbcf11a3434">More...</a><br /></td></tr>
<tr class="separator:af619caa031c183aa1aa5adbcf11a3434"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf696fd100732f5b9eb8900e81895bf0"><td class="memItemLeft" align="right" valign="top">virtual async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aaf696fd100732f5b9eb8900e81895bf0">ResetRebootState</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:aaf696fd100732f5b9eb8900e81895bf0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancels pending graceful actions. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aaf696fd100732f5b9eb8900e81895bf0">More...</a><br /></td></tr>
<tr class="separator:aaf696fd100732f5b9eb8900e81895bf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39d65944835fca058d4a4be46eaf81bd"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd">Restart</a> (bool graceful, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a39d65944835fca058d4a4be46eaf81bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restarts the watchdog. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">graceful</td><td>If <code>true</code> the restart will be delayed until a reboot is detected in the active server's DMAPI and this function will retrun immediately.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd">More...</a><br /></td></tr>
<tr class="separator:a39d65944835fca058d4a4be46eaf81bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae30d4b582b04eb7c3ef3c5d848429bbd"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd">StartAsync</a> (CancellationToken cancellationToken)</td></tr>
<tr class="separator:ae30d4b582b04eb7c3ef3c5d848429bbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1f7ac000da0491494324db1dce544a0"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad1f7ac000da0491494324db1dce544a0">StopAsync</a> (CancellationToken cancellationToken)</td></tr>
<tr class="separator:ad1f7ac000da0491494324db1dce544a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49a9acdffdc9e7cd176f803b23e97ff4"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a49a9acdffdc9e7cd176f803b23e97ff4">Terminate</a> (bool graceful, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a49a9acdffdc9e7cd176f803b23e97ff4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the watchdog. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">graceful</td><td>If <code>true</code> the termination will be delayed until a reboot is detected in the active server's DMAPI and this function will return immediately.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a49a9acdffdc9e7cd176f803b23e97ff4">More...</a><br /></td></tr>
<tr class="separator:a49a9acdffdc9e7cd176f803b23e97ff4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55690ee90b569ac84689ae6ec2a9e539"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a55690ee90b569ac84689ae6ec2a9e539">HandleRestart</a> (Version updateVersion, bool handlerMayDelayShutdownWithExtremelyLongRunningTasks, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a55690ee90b569ac84689ae6ec2a9e539"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a restart of the server. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">updateVersion</td><td>The Version being updated to, <code>null</code> if not being changed.</td></tr>
    <tr><td class="paramname">handlerMayDelayShutdownWithExtremelyLongRunningTasks</td><td>If <code>false</code> the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_restart_handler.html" title="Handler for server restarts.">IRestartHandler</a> should aim to complete the Task returned from this function ASAP.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a55690ee90b569ac84689ae6ec2a9e539">More...</a><br /></td></tr>
<tr class="separator:a55690ee90b569ac84689ae6ec2a9e539"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ca371ec92c273cd6b3ab2f6931f8a65"><td class="memItemLeft" align="right" valign="top">abstract Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a3ca371ec92c273cd6b3ab2f6931f8a65">InstanceRenamed</a> (string newInstanceName, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a3ca371ec92c273cd6b3ab2f6931f8a65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when the owning <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html">Instance</a> is renamed. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newInstanceName</td><td>The new <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_named_entity.html#a7e2f2eeddbc6315acbcfa00c54762183" title="The name of the entity represented by the NamedEntity.">Api.Models.NamedEntity.Name</a>.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a3ca371ec92c273cd6b3ab2f6931f8a65">More...</a><br /></td></tr>
<tr class="separator:a3ca371ec92c273cd6b3ab2f6931f8a65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8489bee0d96bcaf87eba19adee17149"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad8489bee0d96bcaf87eba19adee17149">CreateDump</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ad8489bee0d96bcaf87eba19adee17149"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to create a process dump for DreamDaemon. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad8489bee0d96bcaf87eba19adee17149">More...</a><br /></td></tr>
<tr class="separator:ad8489bee0d96bcaf87eba19adee17149"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa6b3f10617f13ae7af79317594020e3"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#afa6b3f10617f13ae7af79317594020e3">Launch</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:afa6b3f10617f13ae7af79317594020e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html" title="Runs and monitors the twin server controllers.">IWatchdog</a>.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#afa6b3f10617f13ae7af79317594020e3">More...</a><br /></td></tr>
<tr class="separator:afa6b3f10617f13ae7af79317594020e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afab0aa088dc77e54e978c730645d8d00"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#afab0aa088dc77e54e978c730645d8d00">ChangeSettings</a> (<a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a> launchParameters, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:afab0aa088dc77e54e978c730645d8d00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Changes the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a19270c2054e4431802fdf5a59f9b3518" title="The DreamDaemonLaunchParameters to be applied.">ActiveLaunchParameters</a>. If currently running, may trigger a graceful restart.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#afab0aa088dc77e54e978c730645d8d00">More...</a><br /></td></tr>
<tr class="separator:afab0aa088dc77e54e978c730645d8d00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e80e3751764c584151e51f4395efbf5"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a0e80e3751764c584151e51f4395efbf5">Restart</a> (bool graceful, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a0e80e3751764c584151e51f4395efbf5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restarts the watchdog.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a0e80e3751764c584151e51f4395efbf5">More...</a><br /></td></tr>
<tr class="separator:a0e80e3751764c584151e51f4395efbf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fded5c4b8aeb291ad5b1797a25eee14"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a7fded5c4b8aeb291ad5b1797a25eee14">Terminate</a> (bool graceful, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a7fded5c4b8aeb291ad5b1797a25eee14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the watchdog.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a7fded5c4b8aeb291ad5b1797a25eee14">More...</a><br /></td></tr>
<tr class="separator:a7fded5c4b8aeb291ad5b1797a25eee14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2859725d1805d6655be14566f9edcf00"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a2859725d1805d6655be14566f9edcf00">ResetRebootState</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a2859725d1805d6655be14566f9edcf00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancels pending graceful actions.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a2859725d1805d6655be14566f9edcf00">More...</a><br /></td></tr>
<tr class="separator:a2859725d1805d6655be14566f9edcf00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67f97ee77ae892e162173be45d7522f7"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a67f97ee77ae892e162173be45d7522f7">CreateDump</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a67f97ee77ae892e162173be45d7522f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to create a process dump for DreamDaemon.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a67f97ee77ae892e162173be45d7522f7">More...</a><br /></td></tr>
<tr class="separator:a67f97ee77ae892e162173be45d7522f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acefbbc13736d330bb4214aaea995955c"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#acefbbc13736d330bb4214aaea995955c">HandleEvent</a> (<a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a> eventType, IEnumerable&lt; string &gt; parameters, bool deploymentPipeline, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:acefbbc13736d330bb4214aaea995955c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a given <em>eventType</em> .   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#acefbbc13736d330bb4214aaea995955c">More...</a><br /></td></tr>
<tr class="separator:acefbbc13736d330bb4214aaea995955c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69fed1472e47f53392237645d5d65d7a"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_rename_notifyee.html#a69fed1472e47f53392237645d5d65d7a">InstanceRenamed</a> (string newInstanceName, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a69fed1472e47f53392237645d5d65d7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when the owning <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html">Instance</a> is renamed.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_rename_notifyee.html#a69fed1472e47f53392237645d5d65d7a">More...</a><br /></td></tr>
<tr class="separator:a69fed1472e47f53392237645d5d65d7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87fbee2ac435bb743c6eddd3dbe23c6b"><td class="memItemLeft" align="right" valign="top">Task&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html">MessageContent</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_custom_command_handler.html#a87fbee2ac435bb743c6eddd3dbe23c6b">HandleChatCommand</a> (string commandName, string arguments, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_chat_user.html">ChatUser</a> sender, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a87fbee2ac435bb743c6eddd3dbe23c6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a chat command.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_custom_command_handler.html#a87fbee2ac435bb743c6eddd3dbe23c6b">More...</a><br /></td></tr>
<tr class="separator:a87fbee2ac435bb743c6eddd3dbe23c6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a66ba5a98464e55bbb85195d3c49a50"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_restart_handler.html#a1a66ba5a98464e55bbb85195d3c49a50">HandleRestart</a> (Version updateVersion, bool handlerMayDelayShutdownWithExtremelyLongRunningTasks, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a1a66ba5a98464e55bbb85195d3c49a50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a restart of the server.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_restart_handler.html#a1a66ba5a98464e55bbb85195d3c49a50">More...</a><br /></td></tr>
<tr class="separator:a1a66ba5a98464e55bbb85195d3c49a50"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a5a114c04be3e48711271ab2ffd6be8fc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5a114c04be3e48711271ab2ffd6be8fc">WatchdogBase</a> (<a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html">IChatManager</a> chat, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_factory.html">ISessionControllerFactory</a> sessionControllerFactory, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_dmb_factory.html">IDmbFactory</a> dmbFactory, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_persistor.html">ISessionPersistor</a> sessionPersistor, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html">IJobManager</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1688863ddcd7d0bbfa3ec13b7b015319">jobManager</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html">IServerControl</a> serverControl, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a> asyncDelayer, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f">diagnosticsIOManager</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html">IEventConsumer</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5768c37124d54e80c66dc63d28d0dea4">eventConsumer</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html">IRemoteDeploymentManagerFactory</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a72637a3ebe8925b7c3753416370ad83c">remoteDeploymentManagerFactory</a>, ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html">WatchdogBase</a> &gt; logger, <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a> initialLaunchParameters, <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Api.Models.Instance</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a52038e1a769f1114c492c76640a6afc8">metadata</a>, bool <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a410f168d84f80c138450fb42f222ba01">autoStart</a>)</td></tr>
<tr class="memdesc:a5a114c04be3e48711271ab2ffd6be8fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a new instance of the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a> class.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5a114c04be3e48711271ab2ffd6be8fc">More...</a><br /></td></tr>
<tr class="separator:a5a114c04be3e48711271ab2ffd6be8fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73f31d67f3a7aad74b0e26e1949cb302"><td class="memItemLeft" align="right" valign="top">abstract Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a73f31d67f3a7aad74b0e26e1949cb302">InitController</a> (Task eventTask, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_reattach_information.html">ReattachInformation</a> reattachInfo, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a73f31d67f3a7aad74b0e26e1949cb302"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts all ISessionControllers.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a73f31d67f3a7aad74b0e26e1949cb302">More...</a><br /></td></tr>
<tr class="separator:a73f31d67f3a7aad74b0e26e1949cb302"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5d1f2571cdce3431ab477a9c9c3e6f4"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4">LaunchNoLock</a> (bool startMonitor, bool announce, bool announceFailure, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_reattach_information.html">ReattachInformation</a> reattachInfo, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:af5d1f2571cdce3431ab477a9c9c3e6f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Launches the watchdog.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4">More...</a><br /></td></tr>
<tr class="separator:af5d1f2571cdce3431ab477a9c9c3e6f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4c51b6e88cc02dfa78070f5870b3b30"><td class="memItemLeft" align="right" valign="top">async Task&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab4c51b6e88cc02dfa78070f5870b3b30">StopMonitor</a> ()</td></tr>
<tr class="memdesc:ab4c51b6e88cc02dfa78070f5870b3b30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them.">MonitorLifetimes(CancellationToken)</a>. Doesn't kill the servers.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab4c51b6e88cc02dfa78070f5870b3b30">More...</a><br /></td></tr>
<tr class="separator:ab4c51b6e88cc02dfa78070f5870b3b30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96ad9302ae812f4ba3bbbaed2f7adbd0"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a96ad9302ae812f4ba3bbbaed2f7adbd0">CheckLaunchResult</a> (<a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller.html">ISessionController</a> controller, string serverName, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a96ad9302ae812f4ba3bbbaed2f7adbd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the LaunchResult of a given <em>controller</em>  for errors and throw a JobException if any are detected.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a96ad9302ae812f4ba3bbbaed2f7adbd0">More...</a><br /></td></tr>
<tr class="separator:a96ad9302ae812f4ba3bbbaed2f7adbd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a1ca4d25ec02eb53ddbcb36088331a1"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2a1ca4d25ec02eb53ddbcb36088331a1">ReattachFailure</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a2a1ca4d25ec02eb53ddbcb36088331a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call from <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a73f31d67f3a7aad74b0e26e1949cb302" title="Starts all ISessionControllers.">InitController(Task, ReattachInformation, CancellationToken)</a> when a reattach operation fails to attempt a fresh start.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2a1ca4d25ec02eb53ddbcb36088331a1">More...</a><br /></td></tr>
<tr class="separator:a2a1ca4d25ec02eb53ddbcb36088331a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f8ea066a8ae2408f1c86f828d7974f8"><td class="memItemLeft" align="right" valign="top">abstract Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8">DisposeAndNullControllersImpl</a> ()</td></tr>
<tr class="memdesc:a2f8ea066a8ae2408f1c86f828d7974f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call IDisposable.Dispose and null the fields for all ISessionControllers.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8">More...</a><br /></td></tr>
<tr class="separator:a2f8ea066a8ae2408f1c86f828d7974f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a875fe1589eb86e57a50a0e793b0d74f5"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5">DisposeAndNullControllers</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a875fe1589eb86e57a50a0e793b0d74f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8" title="Call IDisposable.Dispose and null the fields for all ISessionControllers.">DisposeAndNullControllersImpl</a> under a locked context.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5">More...</a><br /></td></tr>
<tr class="separator:a875fe1589eb86e57a50a0e793b0d74f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a634f53946305b875c65c04dfd1719830"><td class="memItemLeft" align="right" valign="top">abstract <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller.html">ISessionController</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">GetActiveController</a> ()</td></tr>
<tr class="memdesc:a634f53946305b875c65c04dfd1719830"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the active ISessionController.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">More...</a><br /></td></tr>
<tr class="separator:a634f53946305b875c65c04dfd1719830"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddddb5064444b1786a360d85c3c3873"><td class="memItemLeft" align="right" valign="top">abstract Task&lt; <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0ddddb5064444b1786a360d85c3c3873">HandleMonitorWakeup</a> (<a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a> activationReason, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a0ddddb5064444b1786a360d85c3c3873"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the actions to take when the monitor has to "wake up".   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0ddddb5064444b1786a360d85c3c3873">More...</a><br /></td></tr>
<tr class="separator:a0ddddb5064444b1786a360d85c3c3873"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9d14546506ad8fb19b5eb70b3d426bb"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae9d14546506ad8fb19b5eb70b3d426bb">BeforeApplyDmb</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> newCompileJob, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ae9d14546506ad8fb19b5eb70b3d426bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">To be called before a given <em>newCompileJob</em>  goes live.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae9d14546506ad8fb19b5eb70b3d426bb">More...</a><br /></td></tr>
<tr class="separator:ae9d14546506ad8fb19b5eb70b3d426bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61974ff4ef41775f690f61ee6fe113f2"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a61974ff4ef41775f690f61ee6fe113f2">HandleEventImpl</a> (<a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a> eventType, IEnumerable&lt; string &gt; parameters, bool relayToSession, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a61974ff4ef41775f690f61ee6fe113f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a given <em>eventType</em>  without re-throwing errors.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a61974ff4ef41775f690f61ee6fe113f2">More...</a><br /></td></tr>
<tr class="separator:a61974ff4ef41775f690f61ee6fe113f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="properties" name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:a5fa8be05b0c448ea097a70e5d8708ffb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a><code> [get, set]</code></td></tr>
<tr class="memdesc:a5fa8be05b0c448ea097a70e5d8708ffb"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683" title="The current status of the watchdog.">WatchdogStatus</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">More...</a><br /></td></tr>
<tr class="separator:a5fa8be05b0c448ea097a70e5d8708ffb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39f77bb87d63b1a1a50aac89ad909f29"><td class="memItemLeft" align="right" valign="top">abstract bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39f77bb87d63b1a1a50aac89ad909f29">AlphaIsActive</a><code> [get]</code></td></tr>
<tr class="memdesc:a39f77bb87d63b1a1a50aac89ad909f29"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the alpha server is the active server.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39f77bb87d63b1a1a50aac89ad909f29">More...</a><br /></td></tr>
<tr class="separator:a39f77bb87d63b1a1a50aac89ad909f29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9affc2eeae2903d1bdb0fa81a6550fc4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">ActiveLaunchParameters</a><code> [get, protected set]</code></td></tr>
<tr class="memdesc:a9affc2eeae2903d1bdb0fa81a6550fc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The DreamDaemonLaunchParameters to be applied.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">More...</a><br /></td></tr>
<tr class="separator:a9affc2eeae2903d1bdb0fa81a6550fc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6548572ef5ab9d7b6b3aae8647a0a053"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6548572ef5ab9d7b6b3aae8647a0a053">LastLaunchParameters</a><code> [get, protected set]</code></td></tr>
<tr class="memdesc:a6548572ef5ab9d7b6b3aae8647a0a053"><td class="mdescLeft">&#160;</td><td class="mdescRight">The DreamDaemonLaunchParameters the active server is using.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6548572ef5ab9d7b6b3aae8647a0a053">More...</a><br /></td></tr>
<tr class="separator:a6548572ef5ab9d7b6b3aae8647a0a053"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a4b8311c8cbd7cb851d1ade3bc27e05"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5a4b8311c8cbd7cb851d1ade3bc27e05">ActiveCompileJob</a><code> [get]</code></td></tr>
<tr class="memdesc:a5a4b8311c8cbd7cb851d1ade3bc27e05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> currently running on the server.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5a4b8311c8cbd7cb851d1ade3bc27e05">More...</a><br /></td></tr>
<tr class="separator:a5a4b8311c8cbd7cb851d1ade3bc27e05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bc3f8e6c5569555d358578e612a1920"><td class="memItemLeft" align="right" valign="top">abstract ? <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a3a9adb69be732dbd67aef59559f830c2">RebootState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5bc3f8e6c5569555d358578e612a1920">RebootState</a><code> [get]</code></td></tr>
<tr class="memdesc:a5bc3f8e6c5569555d358578e612a1920"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a3a9adb69be732dbd67aef59559f830c2" title="Represents the action to take when /world/Reboot() is called.">Session.RebootState</a> of the active server.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5bc3f8e6c5569555d358578e612a1920">More...</a><br /></td></tr>
<tr class="separator:a5bc3f8e6c5569555d358578e612a1920"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e101a4b3982c726c99c957acb919209"><td class="memItemLeft" align="right" valign="top">TaskCompletionSource&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9e101a4b3982c726c99c957acb919209">ActiveParametersUpdated</a><code> [get, set]</code></td></tr>
<tr class="memdesc:a9e101a4b3982c726c99c957acb919209"><td class="mdescLeft">&#160;</td><td class="mdescRight">TaskCompletionSource that completes when <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4" title="The DreamDaemonLaunchParameters to be applied.">ActiveLaunchParameters</a> are changed and we are running.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9e101a4b3982c726c99c957acb919209">More...</a><br /></td></tr>
<tr class="separator:a9e101a4b3982c726c99c957acb919209"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a3bafe5d390332f896cdaf43a8db55d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_persistor.html">ISessionPersistor</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5a3bafe5d390332f896cdaf43a8db55d">SessionPersistor</a><code> [get]</code></td></tr>
<tr class="memdesc:a5a3bafe5d390332f896cdaf43a8db55d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ISessionPersistor for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5a3bafe5d390332f896cdaf43a8db55d">More...</a><br /></td></tr>
<tr class="separator:a5a3bafe5d390332f896cdaf43a8db55d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2143ec7079d0ffd42c76f61cf7b71cf6"><td class="memItemLeft" align="right" valign="top">ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html">WatchdogBase</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a><code> [get]</code></td></tr>
<tr class="memdesc:a2143ec7079d0ffd42c76f61cf7b71cf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ILogger for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">More...</a><br /></td></tr>
<tr class="separator:a2143ec7079d0ffd42c76f61cf7b71cf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec24ff5e3b22b40e62f4a2443eb8cec9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html">IChatManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a><code> [get]</code></td></tr>
<tr class="memdesc:aec24ff5e3b22b40e62f4a2443eb8cec9"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IChatManager for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">More...</a><br /></td></tr>
<tr class="separator:aec24ff5e3b22b40e62f4a2443eb8cec9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24eb5f0e32cd79487cd9bd80d5257abb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_factory.html">ISessionControllerFactory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24eb5f0e32cd79487cd9bd80d5257abb">SessionControllerFactory</a><code> [get]</code></td></tr>
<tr class="memdesc:a24eb5f0e32cd79487cd9bd80d5257abb"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ISessionControllerFactory for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24eb5f0e32cd79487cd9bd80d5257abb">More...</a><br /></td></tr>
<tr class="separator:a24eb5f0e32cd79487cd9bd80d5257abb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a401d41a1b1b805f553f53b35f46275ef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_dmb_factory.html">IDmbFactory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a401d41a1b1b805f553f53b35f46275ef">DmbFactory</a><code> [get]</code></td></tr>
<tr class="memdesc:a401d41a1b1b805f553f53b35f46275ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IDmbFactory for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a401d41a1b1b805f553f53b35f46275ef">More...</a><br /></td></tr>
<tr class="separator:a401d41a1b1b805f553f53b35f46275ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbdc59de3b3556a08bd111264527f369"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbdc59de3b3556a08bd111264527f369">AsyncDelayer</a><code> [get]</code></td></tr>
<tr class="memdesc:abbdc59de3b3556a08bd111264527f369"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IAsyncDelayer for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbdc59de3b3556a08bd111264527f369">More...</a><br /></td></tr>
<tr class="separator:abbdc59de3b3556a08bd111264527f369"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td colspan="2" onclick="javascript:toggleInherit('properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog')"><img src="closed.png" alt="-"/>&#160;Properties inherited from <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a></td></tr>
<tr class="memitem:a81f00a3e7109a861886d14e6233d8b43 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a81f00a3e7109a861886d14e6233d8b43">Status</a><code> [get]</code></td></tr>
<tr class="memdesc:a81f00a3e7109a861886d14e6233d8b43 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683" title="The current status of the watchdog.">WatchdogStatus</a>.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a81f00a3e7109a861886d14e6233d8b43">More...</a><br /></td></tr>
<tr class="separator:a81f00a3e7109a861886d14e6233d8b43 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbbd1824bcf972a1eb312c12780fc0bc inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#abbbd1824bcf972a1eb312c12780fc0bc">AlphaIsActive</a><code> [get]</code></td></tr>
<tr class="memdesc:abbbd1824bcf972a1eb312c12780fc0bc inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the alpha server is the active server.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#abbbd1824bcf972a1eb312c12780fc0bc">More...</a><br /></td></tr>
<tr class="separator:abbbd1824bcf972a1eb312c12780fc0bc inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23f9971c8bc84a87cfaf08744eaaee0d inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a23f9971c8bc84a87cfaf08744eaaee0d">ActiveCompileJob</a><code> [get]</code></td></tr>
<tr class="memdesc:a23f9971c8bc84a87cfaf08744eaaee0d inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> currently running on the server.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a23f9971c8bc84a87cfaf08744eaaee0d">More...</a><br /></td></tr>
<tr class="separator:a23f9971c8bc84a87cfaf08744eaaee0d inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19270c2054e4431802fdf5a59f9b3518 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a19270c2054e4431802fdf5a59f9b3518">ActiveLaunchParameters</a><code> [get]</code></td></tr>
<tr class="memdesc:a19270c2054e4431802fdf5a59f9b3518 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="mdescLeft">&#160;</td><td class="mdescRight">The DreamDaemonLaunchParameters to be applied.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a19270c2054e4431802fdf5a59f9b3518">More...</a><br /></td></tr>
<tr class="separator:a19270c2054e4431802fdf5a59f9b3518 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf8f73df0fe074af3363857bc43e63a5 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#adf8f73df0fe074af3363857bc43e63a5">LastLaunchParameters</a><code> [get]</code></td></tr>
<tr class="memdesc:adf8f73df0fe074af3363857bc43e63a5 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="mdescLeft">&#160;</td><td class="mdescRight">The DreamDaemonLaunchParameters the active server is using.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#adf8f73df0fe074af3363857bc43e63a5">More...</a><br /></td></tr>
<tr class="separator:adf8f73df0fe074af3363857bc43e63a5 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0145fd1816a703bcb80fd8e107034f4c inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a3a9adb69be732dbd67aef59559f830c2">RebootState</a>?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a0145fd1816a703bcb80fd8e107034f4c">RebootState</a><code> [get]</code></td></tr>
<tr class="memdesc:a0145fd1816a703bcb80fd8e107034f4c inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a3a9adb69be732dbd67aef59559f830c2" title="Represents the action to take when /world/Reboot() is called.">Session.RebootState</a> of the active server.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a0145fd1816a703bcb80fd8e107034f4c">More...</a><br /></td></tr>
<tr class="separator:a0145fd1816a703bcb80fd8e107034f4c inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a2058cfb9316ddf4e97d57785913bf869"><td class="memItemLeft" align="right" valign="top">async Task IEventConsumer.&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2058cfb9316ddf4e97d57785913bf869">HandleEvent</a> (<a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a> eventType, IEnumerable&lt; string &gt; parameters, bool deploymentPipeline, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a2058cfb9316ddf4e97d57785913bf869"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a given <em>eventType</em> . <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">eventType</td><td>The <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7" title="Types of events. Mirror in tgs.dm.">EventType</a>.</td></tr>
    <tr><td class="paramname">parameters</td><td>An IEnumerable&lt;T&gt; of string parameters for <em>eventType</em> .</td></tr>
    <tr><td class="paramname">deploymentPipeline</td><td>If this event is part of the deployment pipeline.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2058cfb9316ddf4e97d57785913bf869">More...</a><br /></td></tr>
<tr class="separator:a2058cfb9316ddf4e97d57785913bf869"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24fd29d12e91f659010d483228be1225"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225">MonitorRestart</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a24fd29d12e91f659010d483228be1225"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to restart the monitor from scratch.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225">More...</a><br /></td></tr>
<tr class="separator:a24fd29d12e91f659010d483228be1225"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d6672dfae1375d392bcd16ed604590d"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6d6672dfae1375d392bcd16ed604590d">InitialCheckDmbUpdated</a> (<a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_compile_job.html">CompileJob</a> currentCompileJob)</td></tr>
<tr class="memdesc:a6d6672dfae1375d392bcd16ed604590d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for a new IDmbProvider.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6d6672dfae1375d392bcd16ed604590d">More...</a><br /></td></tr>
<tr class="separator:a6d6672dfae1375d392bcd16ed604590d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfec26f530228b80d384b86ee979ef2f"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f">MonitorLifetimes</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:adfec26f530228b80d384b86ee979ef2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f">More...</a><br /></td></tr>
<tr class="separator:adfec26f530228b80d384b86ee979ef2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6845304123ed975aec4de3dc79bf8551"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6845304123ed975aec4de3dc79bf8551">TerminateNoLock</a> (bool graceful, bool announce, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a6845304123ed975aec4de3dc79bf8551"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implementation of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a49a9acdffdc9e7cd176f803b23e97ff4" title="Stops the watchdog. A Task representing the running operation.">Terminate(bool, CancellationToken)</a>. Does not lock <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4" title="The SemaphoreSlim for the WatchdogBase.">synchronizationSemaphore</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6845304123ed975aec4de3dc79bf8551">More...</a><br /></td></tr>
<tr class="separator:a6845304123ed975aec4de3dc79bf8551"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a736a0993a11c8e6c5a00682dac054205"><td class="memItemLeft" align="right" valign="top">async Task&lt; <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a736a0993a11c8e6c5a00682dac054205">HandleHealthCheck</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a736a0993a11c8e6c5a00682dac054205"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles a watchdog health check.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a736a0993a11c8e6c5a00682dac054205">More...</a><br /></td></tr>
<tr class="separator:a736a0993a11c8e6c5a00682dac054205"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78a34174a09d1726b92d2bc70182b657"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a78a34174a09d1726b92d2bc70182b657">HandleChatResponses</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_response.html">TopicResponse</a> result)</td></tr>
<tr class="memdesc:a78a34174a09d1726b92d2bc70182b657"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle any <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_response.html#a18c82501c779543e0aea47992f683bd3" title="The ChatMessages to send as the result of a TopicCommandType.EventNotification request,...">TopicResponse.ChatResponses</a> in a given topic <em>result</em> .   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a78a34174a09d1726b92d2bc70182b657">More...</a><br /></td></tr>
<tr class="separator:a78a34174a09d1726b92d2bc70182b657"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a52038e1a769f1114c492c76640a6afc8"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Api.Models.Instance</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a52038e1a769f1114c492c76640a6afc8">metadata</a></td></tr>
<tr class="memdesc:a52038e1a769f1114c492c76640a6afc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html" title="Metadata about a server instance.">Api.Models.Instance</a> for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a52038e1a769f1114c492c76640a6afc8">More...</a><br /></td></tr>
<tr class="separator:a52038e1a769f1114c492c76640a6afc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e6adcb942a9ff1bb7d11d738b98b6e4"><td class="memItemLeft" align="right" valign="top">readonly SemaphoreSlim&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a></td></tr>
<tr class="memdesc:a7e6adcb942a9ff1bb7d11d738b98b6e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The SemaphoreSlim for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">More...</a><br /></td></tr>
<tr class="separator:a7e6adcb942a9ff1bb7d11d738b98b6e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f9cfb67111bbc5ec1d954e4ed4bf913"><td class="memItemLeft" align="right" valign="top">readonly SemaphoreSlim&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5f9cfb67111bbc5ec1d954e4ed4bf913">controllerDisposeSemaphore</a></td></tr>
<tr class="memdesc:a5f9cfb67111bbc5ec1d954e4ed4bf913"><td class="mdescLeft">&#160;</td><td class="mdescRight">SemaphoreSlim used for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5" title="Wrapper for DisposeAndNullControllersImpl under a locked context.">DisposeAndNullControllers</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5f9cfb67111bbc5ec1d954e4ed4bf913">More...</a><br /></td></tr>
<tr class="separator:a5f9cfb67111bbc5ec1d954e4ed4bf913"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5768c37124d54e80c66dc63d28d0dea4"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html">IEventConsumer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5768c37124d54e80c66dc63d28d0dea4">eventConsumer</a></td></tr>
<tr class="memdesc:a5768c37124d54e80c66dc63d28d0dea4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IEventConsumer that is not the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5768c37124d54e80c66dc63d28d0dea4">More...</a><br /></td></tr>
<tr class="separator:a5768c37124d54e80c66dc63d28d0dea4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1688863ddcd7d0bbfa3ec13b7b015319"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html">IJobManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1688863ddcd7d0bbfa3ec13b7b015319">jobManager</a></td></tr>
<tr class="memdesc:a1688863ddcd7d0bbfa3ec13b7b015319"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IJobManager for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1688863ddcd7d0bbfa3ec13b7b015319">More...</a><br /></td></tr>
<tr class="separator:a1688863ddcd7d0bbfa3ec13b7b015319"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefe25fd33c4a6dfb4ea27b583a2286ea"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_restart_registration.html">IRestartRegistration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aefe25fd33c4a6dfb4ea27b583a2286ea">restartRegistration</a></td></tr>
<tr class="memdesc:aefe25fd33c4a6dfb4ea27b583a2286ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IRestartRegistration for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aefe25fd33c4a6dfb4ea27b583a2286ea">More...</a><br /></td></tr>
<tr class="separator:aefe25fd33c4a6dfb4ea27b583a2286ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8becb1115fe1c09c84534c798466e03f"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f">diagnosticsIOManager</a></td></tr>
<tr class="memdesc:a8becb1115fe1c09c84534c798466e03f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IIOManager pointing to the Diagnostics directory.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f">More...</a><br /></td></tr>
<tr class="separator:a8becb1115fe1c09c84534c798466e03f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72637a3ebe8925b7c3753416370ad83c"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html">IRemoteDeploymentManagerFactory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a72637a3ebe8925b7c3753416370ad83c">remoteDeploymentManagerFactory</a></td></tr>
<tr class="memdesc:a72637a3ebe8925b7c3753416370ad83c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IRemoteDeploymentManagerFactory for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a72637a3ebe8925b7c3753416370ad83c">More...</a><br /></td></tr>
<tr class="separator:a72637a3ebe8925b7c3753416370ad83c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a410f168d84f80c138450fb42f222ba01"><td class="memItemLeft" align="right" valign="top">readonly bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a410f168d84f80c138450fb42f222ba01">autoStart</a></td></tr>
<tr class="memdesc:a410f168d84f80c138450fb42f222ba01"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a> should <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog.">LaunchNoLock(bool, bool, bool, ReattachInformation, CancellationToken)</a> in <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd">StartAsync(CancellationToken)</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a410f168d84f80c138450fb42f222ba01">More...</a><br /></td></tr>
<tr class="separator:a410f168d84f80c138450fb42f222ba01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47a5f64148a117c561df7b0e7e1703e6"><td class="memItemLeft" align="right" valign="top">CancellationTokenSource&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a47a5f64148a117c561df7b0e7e1703e6">monitorCts</a></td></tr>
<tr class="memdesc:a47a5f64148a117c561df7b0e7e1703e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The CancellationTokenSource for the monitor loop.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a47a5f64148a117c561df7b0e7e1703e6">More...</a><br /></td></tr>
<tr class="separator:a47a5f64148a117c561df7b0e7e1703e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfb7590db69ab59a040c1ac91c671d6d"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abfb7590db69ab59a040c1ac91c671d6d">monitorTask</a></td></tr>
<tr class="memdesc:abfb7590db69ab59a040c1ac91c671d6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Task running the monitor loop.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abfb7590db69ab59a040c1ac91c671d6d">More...</a><br /></td></tr>
<tr class="separator:abfb7590db69ab59a040c1ac91c671d6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5c8949750c7c079faf8d438fde20c6c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5c8949750c7c079faf8d438fde20c6c">status</a></td></tr>
<tr class="memdesc:af5c8949750c7c079faf8d438fde20c6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Backing field for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb" title="The current WatchdogStatus.">Status</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5c8949750c7c079faf8d438fde20c6c">More...</a><br /></td></tr>
<tr class="separator:af5c8949750c7c079faf8d438fde20c6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae85241e9a900f49e703b7eda13c78564"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae85241e9a900f49e703b7eda13c78564">healthChecksMissed</a></td></tr>
<tr class="memdesc:ae85241e9a900f49e703b7eda13c78564"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of hearbeats missed.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae85241e9a900f49e703b7eda13c78564">More...</a><br /></td></tr>
<tr class="separator:ae85241e9a900f49e703b7eda13c78564"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a256c7fd5a04870388411185b46ff6fb8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">releaseServers</a></td></tr>
<tr class="memdesc:a256c7fd5a04870388411185b46ff6fb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the servers should be released instead of shutdown.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">More...</a><br /></td></tr>
<tr class="separator:a256c7fd5a04870388411185b46ff6fb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c39f385b06058f4699503b492d2b743"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5c39f385b06058f4699503b492d2b743">disposed</a></td></tr>
<tr class="memdesc:a5c39f385b06058f4699503b492d2b743"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a> has been <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6f69db8c3ceae298404f5d8d5a7312b3">DisposeAsync</a>'d.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5c39f385b06058f4699503b492d2b743">More...</a><br /></td></tr>
<tr class="separator:a5c39f385b06058f4699503b492d2b743"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Base class for <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html" title="Runs and monitors the twin server controllers.">IWatchdog</a>s.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00032">32</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a5a114c04be3e48711271ab2ffd6be8fc" name="a5a114c04be3e48711271ab2ffd6be8fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a114c04be3e48711271ab2ffd6be8fc">&#9670;&#160;</a></span>WatchdogBase()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html">IChatManager</a>&#160;</td>
          <td class="paramname"><em>chat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_factory.html">ISessionControllerFactory</a>&#160;</td>
          <td class="paramname"><em>sessionControllerFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_dmb_factory.html">IDmbFactory</a>&#160;</td>
          <td class="paramname"><em>dmbFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_persistor.html">ISessionPersistor</a>&#160;</td>
          <td class="paramname"><em>sessionPersistor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html">IJobManager</a>&#160;</td>
          <td class="paramname"><em>jobManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html">IServerControl</a>&#160;</td>
          <td class="paramname"><em>serverControl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a>&#160;</td>
          <td class="paramname"><em>asyncDelayer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a>&#160;</td>
          <td class="paramname"><em>diagnosticsIOManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html">IEventConsumer</a>&#160;</td>
          <td class="paramname"><em>eventConsumer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html">IRemoteDeploymentManagerFactory</a>&#160;</td>
          <td class="paramname"><em>remoteDeploymentManagerFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html">WatchdogBase</a> &gt;&#160;</td>
          <td class="paramname"><em>logger</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a>&#160;</td>
          <td class="paramname"><em>initialLaunchParameters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Api.Models.Instance</a>&#160;</td>
          <td class="paramname"><em>metadata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>autoStart</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes a new instance of the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a> class.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chat</td><td>The value of <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat.html">Chat</a>.</td></tr>
    <tr><td class="paramname">sessionControllerFactory</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24eb5f0e32cd79487cd9bd80d5257abb" title="The ISessionControllerFactory for the WatchdogBase.">SessionControllerFactory</a>.</td></tr>
    <tr><td class="paramname">dmbFactory</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a401d41a1b1b805f553f53b35f46275ef" title="The IDmbFactory for the WatchdogBase.">DmbFactory</a>.</td></tr>
    <tr><td class="paramname">sessionPersistor</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5a3bafe5d390332f896cdaf43a8db55d" title="The ISessionPersistor for the WatchdogBase.">SessionPersistor</a>.</td></tr>
    <tr><td class="paramname">jobManager</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1688863ddcd7d0bbfa3ec13b7b015319" title="The IJobManager for the WatchdogBase.">jobManager</a>.</td></tr>
    <tr><td class="paramname">serverControl</td><td>The IServerControl to populate <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aefe25fd33c4a6dfb4ea27b583a2286ea" title="The IRestartRegistration for the WatchdogBase.">restartRegistration</a> with.</td></tr>
    <tr><td class="paramname">asyncDelayer</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abbdc59de3b3556a08bd111264527f369" title="The IAsyncDelayer for the WatchdogBase.">AsyncDelayer</a>.</td></tr>
    <tr><td class="paramname">diagnosticsIOManager</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f" title="The IIOManager pointing to the Diagnostics directory.">diagnosticsIOManager</a>.</td></tr>
    <tr><td class="paramname">eventConsumer</td><td>The value of EventConsumer.</td></tr>
    <tr><td class="paramname">remoteDeploymentManagerFactory</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a72637a3ebe8925b7c3753416370ad83c" title="The IRemoteDeploymentManagerFactory for the WatchdogBase.">remoteDeploymentManagerFactory</a>.</td></tr>
    <tr><td class="paramname">logger</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6" title="The ILogger for the WatchdogBase.">Logger</a>.</td></tr>
    <tr><td class="paramname">initialLaunchParameters</td><td>The initial value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4" title="The DreamDaemonLaunchParameters to be applied.">ActiveLaunchParameters</a>. May be modified.</td></tr>
    <tr><td class="paramname">metadata</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a52038e1a769f1114c492c76640a6afc8" title="The Api.Models.Instance for the WatchdogBase.">metadata</a>.</td></tr>
    <tr><td class="paramname">autoStart</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a410f168d84f80c138450fb42f222ba01" title="If the WatchdogBase should LaunchNoLock(bool, bool, bool, ReattachInformation, CancellationToken) in ...">autoStart</a>.</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00187">187</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  202</span>        {</div>
<div class="line"><span class="lineno">  203</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a> = chat ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(chat));</div>
<div class="line"><span class="lineno">  204</span>            <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_controller_factory.html">SessionControllerFactory</a> = sessionControllerFactory ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(sessionControllerFactory));</div>
<div class="line"><span class="lineno">  205</span>            <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html">DmbFactory</a> = dmbFactory ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(dmbFactory));</div>
<div class="line"><span class="lineno">  206</span>            <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html">SessionPersistor</a> = sessionPersistor ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(sessionPersistor));</div>
<div class="line"><span class="lineno">  207</span>            this.jobManager = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1688863ddcd7d0bbfa3ec13b7b015319">jobManager</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1688863ddcd7d0bbfa3ec13b7b015319">jobManager</a>));</div>
<div class="line"><span class="lineno">  208</span>            <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html">AsyncDelayer</a> = asyncDelayer ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(asyncDelayer));</div>
<div class="line"><span class="lineno">  209</span>            this.diagnosticsIOManager = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f">diagnosticsIOManager</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f">diagnosticsIOManager</a>));</div>
<div class="line"><span class="lineno">  210</span>            this.eventConsumer = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5768c37124d54e80c66dc63d28d0dea4">eventConsumer</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5768c37124d54e80c66dc63d28d0dea4">eventConsumer</a>));</div>
<div class="line"><span class="lineno">  211</span>            this.remoteDeploymentManagerFactory = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a72637a3ebe8925b7c3753416370ad83c">remoteDeploymentManagerFactory</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a72637a3ebe8925b7c3753416370ad83c">remoteDeploymentManagerFactory</a>));</div>
<div class="line"><span class="lineno">  212</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a> = logger ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(logger));</div>
<div class="line"><span class="lineno">  213</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">ActiveLaunchParameters</a> = initialLaunchParameters ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(initialLaunchParameters));</div>
<div class="line"><span class="lineno">  214</span>            this.metadata = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a52038e1a769f1114c492c76640a6afc8">metadata</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a52038e1a769f1114c492c76640a6afc8">metadata</a>));</div>
<div class="line"><span class="lineno">  215</span>            this.autoStart = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a410f168d84f80c138450fb42f222ba01">autoStart</a>;</div>
<div class="line"><span class="lineno">  216</span> </div>
<div class="line"><span class="lineno">  217</span>            ArgumentNullException.ThrowIfNull(serverControl);</div>
<div class="line"><span class="lineno">  218</span> </div>
<div class="line"><span class="lineno">  219</span>            chat.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1e1ce49aa3e843a1e037060a544e125e">RegisterCommandHandler</a>(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  220</span> </div>
<div class="line"><span class="lineno">  221</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">ActiveLaunchParameters</a> = initialLaunchParameters;</div>
<div class="line"><span class="lineno">  222</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">releaseServers</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  223</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9e101a4b3982c726c99c957acb919209">ActiveParametersUpdated</a> = <span class="keyword">new</span> TaskCompletionSource();</div>
<div class="line"><span class="lineno">  224</span> </div>
<div class="line"><span class="lineno">  225</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aefe25fd33c4a6dfb4ea27b583a2286ea">restartRegistration</a> = serverControl.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html#a35728d66030addfd5551351b8c6db942">RegisterForRestart</a>(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  226</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  227</span>            {</div>
<div class="line"><span class="lineno">  228</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a> = <span class="keyword">new</span> SemaphoreSlim(1);</div>
<div class="line"><span class="lineno">  229</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5f9cfb67111bbc5ec1d954e4ed4bf913">controllerDisposeSemaphore</a> = <span class="keyword">new</span> SemaphoreSlim(1);</div>
<div class="line"><span class="lineno">  230</span>            }</div>
<div class="line"><span class="lineno">  231</span>            <span class="keywordflow">catch</span></div>
<div class="line"><span class="lineno">  232</span>            {</div>
<div class="line"><span class="lineno">  233</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aefe25fd33c4a6dfb4ea27b583a2286ea">restartRegistration</a>.Dispose();</div>
<div class="line"><span class="lineno">  234</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>?.Dispose();</div>
<div class="line"><span class="lineno">  235</span>                <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  236</span>            }</div>
<div class="line"><span class="lineno">  237</span> </div>
<div class="line"><span class="lineno">  238</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Created watchdog&quot;</span>);</div>
<div class="line"><span class="lineno">  239</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html">Tgstation.Server.Host.Components.Deployment.DmbFactory</a></div><div class="ttdoc">Standard IDmbFactory.</div><div class="ttdef"><b>Definition:</b> <a href="_dmb_factory_8cs_source.html#l00022">DmbFactory.cs:23</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_controller_factory_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_controller_factory.html">Tgstation.Server.Host.Components.Session.SessionControllerFactory</a></div><div class="ttdef"><b>Definition:</b> <a href="_session_controller_factory_8cs_source.html#l00034">SessionControllerFactory.cs:35</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html">Tgstation.Server.Host.Components.Session.SessionPersistor</a></div><div class="ttdef"><b>Definition:</b> <a href="_session_persistor_8cs_source.html#l00018">SessionPersistor.cs:19</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a1688863ddcd7d0bbfa3ec13b7b015319"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1688863ddcd7d0bbfa3ec13b7b015319">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.jobManager</a></div><div class="ttdeci">readonly IJobManager jobManager</div><div class="ttdoc">The IJobManager for the WatchdogBase.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00118">WatchdogBase.cs:118</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a2143ec7079d0ffd42c76f61cf7b71cf6"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a></div><div class="ttdeci">ILogger&lt; WatchdogBase &gt; Logger</div><div class="ttdoc">The ILogger for the WatchdogBase.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00073">WatchdogBase.cs:73</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a256c7fd5a04870388411185b46ff6fb8"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.releaseServers</a></div><div class="ttdeci">bool releaseServers</div><div class="ttdoc">If the servers should be released instead of shutdown.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00163">WatchdogBase.cs:163</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a410f168d84f80c138450fb42f222ba01"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a410f168d84f80c138450fb42f222ba01">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.autoStart</a></div><div class="ttdeci">readonly bool autoStart</div><div class="ttdoc">If the WatchdogBase should LaunchNoLock(bool, bool, bool, ReattachInformation, CancellationToken) in ...</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00138">WatchdogBase.cs:138</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a52038e1a769f1114c492c76640a6afc8"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a52038e1a769f1114c492c76640a6afc8">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.metadata</a></div><div class="ttdeci">readonly Api.Models.Instance metadata</div><div class="ttdoc">The Api.Models.Instance for the WatchdogBase.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00098">WatchdogBase.cs:98</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a5768c37124d54e80c66dc63d28d0dea4"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5768c37124d54e80c66dc63d28d0dea4">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.eventConsumer</a></div><div class="ttdeci">readonly IEventConsumer eventConsumer</div><div class="ttdoc">The IEventConsumer that is not the WatchdogBase.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00113">WatchdogBase.cs:113</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a5f9cfb67111bbc5ec1d954e4ed4bf913"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5f9cfb67111bbc5ec1d954e4ed4bf913">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.controllerDisposeSemaphore</a></div><div class="ttdeci">readonly SemaphoreSlim controllerDisposeSemaphore</div><div class="ttdoc">SemaphoreSlim used for DisposeAndNullControllers.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00108">WatchdogBase.cs:108</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a72637a3ebe8925b7c3753416370ad83c"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a72637a3ebe8925b7c3753416370ad83c">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.remoteDeploymentManagerFactory</a></div><div class="ttdeci">readonly IRemoteDeploymentManagerFactory remoteDeploymentManagerFactory</div><div class="ttdoc">The IRemoteDeploymentManagerFactory for the WatchdogBase.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00133">WatchdogBase.cs:133</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a7e6adcb942a9ff1bb7d11d738b98b6e4"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a></div><div class="ttdeci">readonly SemaphoreSlim synchronizationSemaphore</div><div class="ttdoc">The SemaphoreSlim for the WatchdogBase.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00103">WatchdogBase.cs:103</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a8becb1115fe1c09c84534c798466e03f"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.diagnosticsIOManager</a></div><div class="ttdeci">readonly IIOManager diagnosticsIOManager</div><div class="ttdoc">The IIOManager pointing to the Diagnostics directory.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00128">WatchdogBase.cs:128</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a9affc2eeae2903d1bdb0fa81a6550fc4"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveLaunchParameters</a></div><div class="ttdeci">DreamDaemonLaunchParameters ActiveLaunchParameters</div><div class="ttdoc">The DreamDaemonLaunchParameters to be applied.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00049">WatchdogBase.cs:49</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a9e101a4b3982c726c99c957acb919209"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9e101a4b3982c726c99c957acb919209">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveParametersUpdated</a></div><div class="ttdeci">TaskCompletionSource ActiveParametersUpdated</div><div class="ttdoc">TaskCompletionSource that completes when ActiveLaunchParameters are changed and we are running.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00063">WatchdogBase.cs:63</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_aec24ff5e3b22b40e62f4a2443eb8cec9"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a></div><div class="ttdeci">IChatManager Chat</div><div class="ttdoc">The IChatManager for the WatchdogBase.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00078">WatchdogBase.cs:78</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_aefe25fd33c4a6dfb4ea27b583a2286ea"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aefe25fd33c4a6dfb4ea27b583a2286ea">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.restartRegistration</a></div><div class="ttdeci">readonly IRestartRegistration restartRegistration</div><div class="ttdoc">The IRestartRegistration for the WatchdogBase.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00123">WatchdogBase.cs:123</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html">Tgstation.Server.Host.Utils.AsyncDelayer</a></div><div class="ttdef"><b>Definition:</b> <a href="_async_delayer_8cs_source.html#l00008">AsyncDelayer.cs:9</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager_html_a1e1ce49aa3e843a1e037060a544e125e"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1e1ce49aa3e843a1e037060a544e125e">Tgstation.Server.Host.Components.Chat.IChatManager.RegisterCommandHandler</a></div><div class="ttdeci">void RegisterCommandHandler(ICustomCommandHandler customCommandHandler)</div><div class="ttdoc">Registers a customCommandHandler  to use.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control_html_a35728d66030addfd5551351b8c6db942"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html#a35728d66030addfd5551351b8c6db942">Tgstation.Server.Host.Core.IServerControl.RegisterForRestart</a></div><div class="ttdeci">IRestartRegistration RegisterForRestart(IRestartHandler handler)</div><div class="ttdoc">Register a given handler  to run before stopping the server for a restart.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00049">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveLaunchParameters</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00063">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveParametersUpdated</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00138">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.autoStart</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00078">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00108">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.controllerDisposeSemaphore</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00128">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.diagnosticsIOManager</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00113">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.eventConsumer</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00118">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.jobManager</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00073">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00098">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.metadata</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1e1ce49aa3e843a1e037060a544e125e">Tgstation.Server.Host.Components.Chat.IChatManager.RegisterCommandHandler()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html#a35728d66030addfd5551351b8c6db942">Tgstation.Server.Host.Core.IServerControl.RegisterForRestart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00163">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.releaseServers</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00133">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.remoteDeploymentManagerFactory</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00123">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.restartRegistration</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00103">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a5a114c04be3e48711271ab2ffd6be8fc_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a5a114c04be3e48711271ab2ffd6be8fc_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a5a114c04be3e48711271ab2ffd6be8fc_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a5a114c04be3e48711271ab2ffd6be8fc_cgraph">
<area shape="rect" title="Initializes a new instance of the WatchdogBase class." alt="" coords="5,37,268,77"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a1e1ce49aa3e843a1e037060a544e125e" title="Registers a customCommandHandler &#160;to use." alt="" coords="316,5,604,45"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_server_control.html#a35728d66030addfd5551351b8c6db942" title="Register a given handler &#160;to run before stopping the server for a restart." alt="" coords="351,69,569,109"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ae9d14546506ad8fb19b5eb70b3d426bb" name="ae9d14546506ad8fb19b5eb70b3d426bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9d14546506ad8fb19b5eb70b3d426bb">&#9670;&#160;</a></span>BeforeApplyDmb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.BeforeApplyDmb </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a>&#160;</td>
          <td class="paramname"><em>newCompileJob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>To be called before a given <em>newCompileJob</em>  goes live.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newCompileJob</td><td>The new <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> being applied.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00666">666</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  667</span>        {</div>
<div class="line"><span class="lineno">  668</span>            <span class="keywordflow">if</span> (newCompileJob.Id == <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5a4b8311c8cbd7cb851d1ade3bc27e05">ActiveCompileJob</a>?.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570">Id</a>)</div>
<div class="line"><span class="lineno">  669</span>            {</div>
<div class="line"><span class="lineno">  670</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Same compile job, not sending deployment event&quot;</span>);</div>
<div class="line"><span class="lineno">  671</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  672</span>            }</div>
<div class="line"><span class="lineno">  673</span> </div>
<div class="line"><span class="lineno">  674</span>            var remoteDeploymentManager = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a72637a3ebe8925b7c3753416370ad83c">remoteDeploymentManagerFactory</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html#a4115cea1f220c4fdaede74566aa848d3">CreateRemoteDeploymentManager</a>(</div>
<div class="line"><span class="lineno">  675</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a52038e1a769f1114c492c76640a6afc8">metadata</a>,</div>
<div class="line"><span class="lineno">  676</span>                newCompileJob);</div>
<div class="line"><span class="lineno">  677</span> </div>
<div class="line"><span class="lineno">  678</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  679</span>            {</div>
<div class="line"><span class="lineno">  680</span>                await remoteDeploymentManager.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a5eb0d5e39709230e697671ed11f1cc04">ApplyDeployment</a>(newCompileJob, <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5a4b8311c8cbd7cb851d1ade3bc27e05">ActiveCompileJob</a>, cancellationToken);</div>
<div class="line"><span class="lineno">  681</span>            }</div>
<div class="line"><span class="lineno">  682</span>            <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno">  683</span>            {</div>
<div class="line"><span class="lineno">  684</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogWarning(ex, <span class="stringliteral">&quot;Failed to apply remote deployment!&quot;</span>);</div>
<div class="line"><span class="lineno">  685</span>            }</div>
<div class="line"><span class="lineno">  686</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id_html_ae31e478e1d338b37a14565df6fd58570"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570">Tgstation.Server.Api.Models.EntityId.Id</a></div><div class="ttdeci">virtual ? long Id</div><div class="ttdoc">The ID of the entity.</div><div class="ttdef"><b>Definition:</b> <a href="_entity_id_8cs_source.html#l00013">EntityId.cs:13</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a5a4b8311c8cbd7cb851d1ade3bc27e05"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5a4b8311c8cbd7cb851d1ade3bc27e05">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveCompileJob</a></div><div class="ttdeci">Models.CompileJob ActiveCompileJob</div><div class="ttdoc">Retrieves the Models.CompileJob currently running on the server.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00055">WatchdogBase.cs:55</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory_html_a4115cea1f220c4fdaede74566aa848d3"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html#a4115cea1f220c4fdaede74566aa848d3">Tgstation.Server.Host.Components.Deployment.Remote.IRemoteDeploymentManagerFactory.CreateRemoteDeploymentManager</a></div><div class="ttdeci">IRemoteDeploymentManager CreateRemoteDeploymentManager(Api.Models.Instance metadata, RemoteGitProvider remoteGitProvider)</div><div class="ttdoc">Creates a IRemoteDeploymentManager for a given remoteGitProvider .</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_html_a5eb0d5e39709230e697671ed11f1cc04"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a5eb0d5e39709230e697671ed11f1cc04">Tgstation.Server.Host.Components.Deployment.Remote.IRemoteDeploymentManager.ApplyDeployment</a></div><div class="ttdeci">Task ApplyDeployment(CompileJob compileJob, CompileJob oldCompileJob, CancellationToken cancellationToken)</div><div class="ttdoc">Stage a given compileJob 's deployment.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00055">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveCompileJob</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a5eb0d5e39709230e697671ed11f1cc04">Tgstation.Server.Host.Components.Deployment.Remote.IRemoteDeploymentManager.ApplyDeployment()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html#a4115cea1f220c4fdaede74566aa848d3">Tgstation.Server.Host.Components.Deployment.Remote.IRemoteDeploymentManagerFactory.CreateRemoteDeploymentManager()</a>, <a class="el" href="_entity_id_8cs_source.html#l00013">Tgstation.Server.Api.Models.EntityId.Id</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00073">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00098">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.metadata</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00133">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.remoteDeploymentManagerFactory</a>.</p>

<p class="reference">Referenced by <a class="el" href="_windows_watchdog_8cs_source.html#l00141">Tgstation.Server.Host.Components.Watchdog.WindowsWatchdog.HandleNormalReboot()</a>, and <a class="el" href="_basic_watchdog_8cs_source.html#l00205">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.InitController()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ae9d14546506ad8fb19b5eb70b3d426bb_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ae9d14546506ad8fb19b5eb70b3d426bb_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ae9d14546506ad8fb19b5eb70b3d426bb_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ae9d14546506ad8fb19b5eb70b3d426bb_cgraph">
<area shape="rect" title="To be called before a given newCompileJob &#160;goes live." alt="" coords="5,53,276,93"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager.html#a5eb0d5e39709230e697671ed11f1cc04" title="Stage a given compileJob &#39;s deployment." alt="" coords="354,5,613,60"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html#a4115cea1f220c4fdaede74566aa848d3" title="Creates a IRemoteDeploymentManager for a given remoteGitProvider ." alt="" coords="324,84,643,139"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ae9d14546506ad8fb19b5eb70b3d426bb_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ae9d14546506ad8fb19b5eb70b3d426bb_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ae9d14546506ad8fb19b5eb70b3d426bb_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ae9d14546506ad8fb19b5eb70b3d426bb_icgraph">
<area shape="rect" title="To be called before a given newCompileJob &#160;goes live." alt="" coords="375,37,645,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_windows_watchdog.html#afcdeb4376d24326a76bc920fe6974b35" title="Handler for MonitorActivationReason.ActiveServerRebooted when the RebootState is RebootState...." alt="" coords="5,5,327,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#ad6a174232e66f5070f33b14e2cf15d48" title="Starts all ISessionControllers. A Task representing the running operation." alt="" coords="41,69,291,109"/>
</map>
</div>

</div>
</div>
<a id="a390fcde5ed6ed30d6e5b5b2ebc8273dc" name="a390fcde5ed6ed30d6e5b5b2ebc8273dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a390fcde5ed6ed30d6e5b5b2ebc8273dc">&#9670;&#160;</a></span>ChangeSettings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ChangeSettings </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a>&#160;</td>
          <td class="paramname"><em>launchParameters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Changes the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a19270c2054e4431802fdf5a59f9b3518" title="The DreamDaemonLaunchParameters to be applied.">ActiveLaunchParameters</a>. If currently running, may trigger a graceful restart. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">launchParameters</td><td>The new DreamDaemonLaunchParameters. May be modified.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#afab0aa088dc77e54e978c730645d8d00">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00255">255</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  256</span>        {</div>
<div class="line"><span class="lineno">  257</span>            <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>, cancellationToken))</div>
<div class="line"><span class="lineno">  258</span>            {</div>
<div class="line"><span class="lineno">  259</span>                <span class="keywordtype">bool</span> match = launchParameters.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html#ad1c56d38c1a48c110765c99a72619e13">CanApplyWithoutReboot</a>(<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">ActiveLaunchParameters</a>);</div>
<div class="line"><span class="lineno">  260</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">ActiveLaunchParameters</a> = launchParameters;</div>
<div class="line"><span class="lineno">  261</span>                <span class="keywordflow">if</span> (match || <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Offline)</div>
<div class="line"><span class="lineno">  262</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  263</span> </div>
<div class="line"><span class="lineno">  264</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9e101a4b3982c726c99c957acb919209">ActiveParametersUpdated</a>.TrySetResult(); <span class="comment">// queue an update</span></div>
<div class="line"><span class="lineno">  265</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9e101a4b3982c726c99c957acb919209">ActiveParametersUpdated</a> = <span class="keyword">new</span> TaskCompletionSource();</div>
<div class="line"><span class="lineno">  266</span>            }</div>
<div class="line"><span class="lineno">  267</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters_html_ad1c56d38c1a48c110765c99a72619e13"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html#ad1c56d38c1a48c110765c99a72619e13">Tgstation.Server.Api.Models.Internal.DreamDaemonLaunchParameters.CanApplyWithoutReboot</a></div><div class="ttdeci">bool CanApplyWithoutReboot(DreamDaemonLaunchParameters otherParameters)</div><div class="ttdoc">Check if we match a given set of otherParameters . StartupTimeout is excluded.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_daemon_launch_parameters_8cs_source.html#l00106">DreamDaemonLaunchParameters.cs:106</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a5fa8be05b0c448ea097a70e5d8708ffb"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a></div><div class="ttdeci">WatchdogStatus Status</div><div class="ttdoc">The current WatchdogStatus.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00035">WatchdogBase.cs:36</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">Tgstation.Server.Host.Utils.SemaphoreSlimContext</a></div><div class="ttdoc">Async lock context helper.</div><div class="ttdef"><b>Definition:</b> <a href="_semaphore_slim_context_8cs_source.html#l00010">SemaphoreSlimContext.cs:11</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context_html_a29773d588476671bbe480f096d839c91"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock</a></div><div class="ttdeci">static async ValueTask&lt; SemaphoreSlimContext &gt; Lock(SemaphoreSlim semaphore, CancellationToken cancellationToken)</div><div class="ttdoc">Asyncronously locks a semaphore .</div><div class="ttdef"><b>Definition:</b> <a href="_semaphore_slim_context_8cs_source.html#l00018">SemaphoreSlimContext.cs:18</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_models_html_abcc98739b8feb9dd6744647f287e0683"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">Tgstation.Server.Api.Models.WatchdogStatus</a></div><div class="ttdeci">WatchdogStatus</div><div class="ttdoc">The current status of the watchdog.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_status_8cs_source.html#l00006">WatchdogStatus.cs:7</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00049">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveLaunchParameters</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00063">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveParametersUpdated</a>, <a class="el" href="_dream_daemon_launch_parameters_8cs_source.html#l00106">Tgstation.Server.Api.Models.Internal.DreamDaemonLaunchParameters.CanApplyWithoutReboot()</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00036">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00103">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a390fcde5ed6ed30d6e5b5b2ebc8273dc_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a390fcde5ed6ed30d6e5b5b2ebc8273dc_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a390fcde5ed6ed30d6e5b5b2ebc8273dc_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a390fcde5ed6ed30d6e5b5b2ebc8273dc_cgraph">
<area shape="rect" title="Changes the ActiveLaunchParameters. If currently running, may trigger a graceful restart...." alt="" coords="5,49,272,89"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html#ad1c56d38c1a48c110765c99a72619e13" title="Check if we match a given set of otherParameters . StartupTimeout is excluded." alt="" coords="320,5,587,60"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="358,85,549,125"/>
</map>
</div>

</div>
</div>
<a id="a96ad9302ae812f4ba3bbbaed2f7adbd0" name="a96ad9302ae812f4ba3bbbaed2f7adbd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96ad9302ae812f4ba3bbbaed2f7adbd0">&#9670;&#160;</a></span>CheckLaunchResult()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.CheckLaunchResult </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller.html">ISessionController</a>&#160;</td>
          <td class="paramname"><em>controller</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>serverName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check the LaunchResult of a given <em>controller</em>  for errors and throw a JobException if any are detected.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">controller</td><td>The ISessionController to checkou.</td></tr>
    <tr><td class="paramname">serverName</td><td>The name of the server being checked.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00590">590</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  591</span>        {</div>
<div class="line"><span class="lineno">  592</span>            var launchResult = await controller.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller.html#adca786a78dbcd230b94fcde69e9fc885">LaunchResult</a>.WaitAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  593</span> </div>
<div class="line"><span class="lineno">  594</span>            <span class="comment">// Dead sessions won&#39;t trigger this</span></div>
<div class="line"><span class="lineno">  595</span>            <span class="keywordflow">if</span> (launchResult.ExitCode.HasValue) <span class="comment">// you killed us ray...</span></div>
<div class="line"><span class="lineno">  596</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(</div>
<div class="line"><span class="lineno">  597</span>                    <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.WatchdogStartupFailed,</div>
<div class="line"><span class="lineno">  598</span>                    <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>($<span class="stringliteral">&quot;{serverName} failed to start: {launchResult}&quot;</span>));</div>
<div class="line"><span class="lineno">  599</span>            <span class="keywordflow">if</span> (!launchResult.StartupTime.HasValue)</div>
<div class="line"><span class="lineno">  600</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(</div>
<div class="line"><span class="lineno">  601</span>                    <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.WatchdogStartupTimeout,</div>
<div class="line"><span class="lineno">  602</span>                    <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>($<span class="stringliteral">&quot;{serverName} timed out on startup: {ActiveLaunchParameters.StartupTimeout.Value}s&quot;</span>));</div>
<div class="line"><span class="lineno">  603</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">Tgstation.Server.Host.Jobs.JobException</a></div><div class="ttdoc">Operation exceptions thrown from the context of a Models.Job.</div><div class="ttdef"><b>Definition:</b> <a href="_job_exception_8cs_source.html#l00010">JobException.cs:11</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_html_adca786a78dbcd230b94fcde69e9fc885"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller.html#adca786a78dbcd230b94fcde69e9fc885">Tgstation.Server.Host.Components.Session.ISessionController.LaunchResult</a></div><div class="ttdeci">Task&lt; LaunchResult &gt; LaunchResult</div><div class="ttdoc">A Task that completes when DreamDaemon starts pumping the windows message queue after loading a ....</div><div class="ttdef"><b>Definition:</b> <a href="_i_session_controller_8cs_source.html#l00020">ISessionController.cs:20</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_models_html_a1a6adb59dd51244efabf4e548e7075c8"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">Tgstation.Server.Api.Models.ErrorCode</a></div><div class="ttdeci">ErrorCode</div><div class="ttdoc">Types of Response.ErrorMessageResponses that the API may return.</div><div class="ttdef"><b>Definition:</b> <a href="_error_code_8cs_source.html#l00012">ErrorCode.cs:13</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_i_session_controller_8cs_source.html#l00020">Tgstation.Server.Host.Components.Session.ISessionController.LaunchResult</a>.</p>

<p class="reference">Referenced by <a class="el" href="_basic_watchdog_8cs_source.html#l00205">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.InitController()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a96ad9302ae812f4ba3bbbaed2f7adbd0_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a96ad9302ae812f4ba3bbbaed2f7adbd0_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a96ad9302ae812f4ba3bbbaed2f7adbd0_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a96ad9302ae812f4ba3bbbaed2f7adbd0_icgraph">
<area shape="rect" title="Check the LaunchResult of a given controller &#160;for errors and throw a JobException if any are detected..." alt="" coords="304,5,595,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#ad6a174232e66f5070f33b14e2cf15d48" title="Starts all ISessionControllers. A Task representing the running operation." alt="" coords="5,5,256,45"/>
</map>
</div>

</div>
</div>
<a id="ad8489bee0d96bcaf87eba19adee17149" name="ad8489bee0d96bcaf87eba19adee17149"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8489bee0d96bcaf87eba19adee17149">&#9670;&#160;</a></span>CreateDump()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.CreateDump </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attempt to create a process dump for DreamDaemon. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a67f97ee77ae892e162173be45d7522f7">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00433">433</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  434</span>        {</div>
<div class="line"><span class="lineno">  435</span>            <span class="keyword">const</span> <span class="keywordtype">string</span> DumpDirectory = <span class="stringliteral">&quot;ProcessDumps&quot;</span>;</div>
<div class="line"><span class="lineno">  436</span>            await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f">diagnosticsIOManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a69aa1b9dbeb6af3744e568095c4376e7">CreateDirectory</a>(DumpDirectory, cancellationToken);</div>
<div class="line"><span class="lineno">  437</span> </div>
<div class="line"><span class="lineno">  438</span>            var dumpFileName = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f">diagnosticsIOManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78">ResolvePath</a>(</div>
<div class="line"><span class="lineno">  439</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a8becb1115fe1c09c84534c798466e03f">diagnosticsIOManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">ConcatPath</a>(</div>
<div class="line"><span class="lineno">  440</span>                    DumpDirectory,</div>
<div class="line"><span class="lineno">  441</span>                    $<span class="stringliteral">&quot;DreamDaemon-{DateTimeOffset.UtcNow.ToFileStamp()}.dmp&quot;</span>));</div>
<div class="line"><span class="lineno">  442</span> </div>
<div class="line"><span class="lineno">  443</span>            var session = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">GetActiveController</a>();</div>
<div class="line"><span class="lineno">  444</span>            <span class="keywordflow">if</span> (session?.Lifetime.IsCompleted != <span class="keyword">false</span>)</div>
<div class="line"><span class="lineno">  445</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.DreamDaemonOffline);</div>
<div class="line"><span class="lineno">  446</span> </div>
<div class="line"><span class="lineno">  447</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogInformation(<span class="stringliteral">&quot;Dumping session to {dumpFileName}...&quot;</span>, dumpFileName);</div>
<div class="line"><span class="lineno">  448</span>            await session.CreateDump(dumpFileName, cancellationToken);</div>
<div class="line"><span class="lineno">  449</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a634f53946305b875c65c04dfd1719830"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController</a></div><div class="ttdeci">abstract ISessionController GetActiveController()</div><div class="ttdoc">Get the active ISessionController.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a18a442b5dff16f5e7a730ec354e81d78"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78">Tgstation.Server.Host.IO.IIOManager.ResolvePath</a></div><div class="ttdeci">string ResolvePath()</div><div class="ttdoc">Retrieve the full path of the current working directory.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a286f4eb5c679683b7e519847a6c3574e"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">Tgstation.Server.Host.IO.IIOManager.ConcatPath</a></div><div class="ttdeci">string ConcatPath(params string[] paths)</div><div class="ttdoc">Combines an array of strings into a path.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager_html_a69aa1b9dbeb6af3744e568095c4376e7"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a69aa1b9dbeb6af3744e568095c4376e7">Tgstation.Server.Host.IO.IIOManager.CreateDirectory</a></div><div class="ttdeci">Task CreateDirectory(string path, CancellationToken cancellationToken)</div><div class="ttdoc">Create a directory at path .</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e">Tgstation.Server.Host.IO.IIOManager.ConcatPath()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a69aa1b9dbeb6af3744e568095c4376e7">Tgstation.Server.Host.IO.IIOManager.CreateDirectory()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00128">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.diagnosticsIOManager</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00073">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, and <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78">Tgstation.Server.Host.IO.IIOManager.ResolvePath()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l01043">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleHealthCheck()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad8489bee0d96bcaf87eba19adee17149_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad8489bee0d96bcaf87eba19adee17149_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad8489bee0d96bcaf87eba19adee17149_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad8489bee0d96bcaf87eba19adee17149_cgraph">
<area shape="rect" title="Attempt to create a process dump for DreamDaemon. A Task representing the running operation." alt="" coords="5,101,252,141"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e" title="Combines an array of strings into a path." alt="" coords="359,5,527,45"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a69aa1b9dbeb6af3744e568095c4376e7" title="Create a directory at path ." alt="" coords="352,69,535,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830" title="Get the active ISessionController." alt="" coords="300,133,587,173"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78" title="Retrieve the full path of the current working directory." alt="" coords="359,197,527,237"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad8489bee0d96bcaf87eba19adee17149_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad8489bee0d96bcaf87eba19adee17149_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad8489bee0d96bcaf87eba19adee17149_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ad8489bee0d96bcaf87eba19adee17149_icgraph">
<area shape="rect" title="Attempt to create a process dump for DreamDaemon. A Task representing the running operation." alt="" coords="1611,40,1857,80"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a736a0993a11c8e6c5a00682dac054205" title="Handles a watchdog health check." alt="" coords="1272,40,1563,80"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="953,40,1224,80"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="643,69,905,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af619caa031c183aa1aa5adbcf11a3434" title="Start the IWatchdog. A Task representing the running operation." alt="" coords="352,69,579,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="336,5,595,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd" title="Restarts the watchdog. A Task representing the running operation." alt="" coords="352,133,579,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,197,585,237"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3" title="Cancels pending graceful actions. A Task representing the running operation." alt="" coords="5,133,288,173"/>
</map>
</div>

</div>
</div>
<a id="a875fe1589eb86e57a50a0e793b0d74f5" name="a875fe1589eb86e57a50a0e793b0d74f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a875fe1589eb86e57a50a0e793b0d74f5">&#9670;&#160;</a></span>DisposeAndNullControllers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wrapper for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8" title="Call IDisposable.Dispose and null the fields for all ISessionControllers.">DisposeAndNullControllersImpl</a> under a locked context.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00633">633</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  634</span>        {</div>
<div class="line"><span class="lineno">  635</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;DisposeAndNullControllers&quot;</span>);</div>
<div class="line"><span class="lineno">  636</span>            <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5f9cfb67111bbc5ec1d954e4ed4bf913">controllerDisposeSemaphore</a>, cancellationToken))</div>
<div class="line"><span class="lineno">  637</span>            {</div>
<div class="line"><span class="lineno">  638</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8">DisposeAndNullControllersImpl</a>();</div>
<div class="line"><span class="lineno">  639</span>                <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">releaseServers</a>)</div>
<div class="line"><span class="lineno">  640</span>                    await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html">SessionPersistor</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aebef451cedbed6fe5a4367fe035470a7">Clear</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  641</span>            }</div>
<div class="line"><span class="lineno">  642</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor_html_aebef451cedbed6fe5a4367fe035470a7"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aebef451cedbed6fe5a4367fe035470a7">Tgstation.Server.Host.Components.Session.SessionPersistor.Clear</a></div><div class="ttdeci">Task Clear(CancellationToken cancellationToken)</div><div class="ttdoc">Clear any stored ReattachInformation. A Task representing the running operation.</div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a2f8ea066a8ae2408f1c86f828d7974f8"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllersImpl</a></div><div class="ttdeci">abstract Task DisposeAndNullControllersImpl()</div><div class="ttdoc">Call IDisposable.Dispose and null the fields for all ISessionControllers.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aebef451cedbed6fe5a4367fe035470a7">Tgstation.Server.Host.Components.Session.SessionPersistor.Clear()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00108">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.controllerDisposeSemaphore</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllersImpl()</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00073">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00163">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.releaseServers</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l01043">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleHealthCheck()</a>, <a class="el" href="_basic_watchdog_8cs_source.html#l00205">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.InitController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00785">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00716">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorRestart()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00610">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ReattachFailure()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a875fe1589eb86e57a50a0e793b0d74f5_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a875fe1589eb86e57a50a0e793b0d74f5_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a875fe1589eb86e57a50a0e793b0d74f5_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a875fe1589eb86e57a50a0e793b0d74f5_cgraph">
<area shape="rect" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="5,70,272,125"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aebef451cedbed6fe5a4367fe035470a7" title="Clear any stored ReattachInformation. A Task representing the running operation." alt="" coords="340,5,567,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="320,70,587,125"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="358,149,549,189"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aa948dc00c200539206747c99b95986af" title="Clear any stored ReattachInformation." alt="" coords="635,5,864,45"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_collection.html#ad270ec18822a7a90d8fca9a75c23851a" title="Remove a given model &#160;from the the working set." alt="" coords="912,5,1121,45"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a875fe1589eb86e57a50a0e793b0d74f5_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a875fe1589eb86e57a50a0e793b0d74f5_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a875fe1589eb86e57a50a0e793b0d74f5_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a875fe1589eb86e57a50a0e793b0d74f5_icgraph">
<area shape="rect" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="1611,211,1877,266"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a736a0993a11c8e6c5a00682dac054205" title="Handles a watchdog health check." alt="" coords="1272,111,1563,151"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="953,136,1224,176"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="336,197,595,237"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#ad6a174232e66f5070f33b14e2cf15d48" title="Starts all ISessionControllers. A Task representing the running operation." alt="" coords="963,301,1214,341"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2a1ca4d25ec02eb53ddbcb36088331a1" title="Call from InitController(Task, ReattachInformation, CancellationToken) when a reattach operation fail..." alt="" coords="1285,327,1550,367"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="643,111,905,151"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af619caa031c183aa1aa5adbcf11a3434" title="Start the IWatchdog. A Task representing the running operation." alt="" coords="352,69,579,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd" title="Restarts the watchdog. A Task representing the running operation." alt="" coords="352,133,579,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,5,585,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3" title="Cancels pending graceful actions. A Task representing the running operation." alt="" coords="5,133,288,173"/>
</map>
</div>

</div>
</div>
<a id="a2f8ea066a8ae2408f1c86f828d7974f8" name="a2f8ea066a8ae2408f1c86f828d7974f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f8ea066a8ae2408f1c86f828d7974f8">&#9670;&#160;</a></span>DisposeAndNullControllersImpl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllersImpl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Call IDisposable.Dispose and null the fields for all ISessionControllers.  </p>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>

<p>Implemented in <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a269e152d2acb113d8fd5db064c098162">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog</a>, and <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_windows_watchdog.html#a4fbabec855f7dc736b0bd76e6c311be4">Tgstation.Server.Host.Components.Watchdog.WindowsWatchdog</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00633">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00242">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAsync()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2f8ea066a8ae2408f1c86f828d7974f8_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2f8ea066a8ae2408f1c86f828d7974f8_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2f8ea066a8ae2408f1c86f828d7974f8_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2f8ea066a8ae2408f1c86f828d7974f8_icgraph">
<area shape="rect" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="1943,234,2209,289"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="1628,181,1895,235"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6f69db8c3ceae298404f5d8d5a7312b3" title=" " alt="" coords="1633,277,1890,317"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a736a0993a11c8e6c5a00682dac054205" title="Handles a watchdog health check." alt="" coords="1281,44,1571,84"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="953,101,1224,141"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="336,197,595,237"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#ad6a174232e66f5070f33b14e2cf15d48" title="Starts all ISessionControllers. A Task representing the running operation." alt="" coords="963,187,1214,227"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2a1ca4d25ec02eb53ddbcb36088331a1" title="Call from InitController(Task, ReattachInformation, CancellationToken) when a reattach operation fail..." alt="" coords="1293,159,1559,199"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="643,101,905,141"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af619caa031c183aa1aa5adbcf11a3434" title="Start the IWatchdog. A Task representing the running operation." alt="" coords="352,69,579,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd" title="Restarts the watchdog. A Task representing the running operation." alt="" coords="352,133,579,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,5,585,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3" title="Cancels pending graceful actions. A Task representing the running operation." alt="" coords="5,133,288,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_windows_watchdog.html#a0e1817e43a1511f502d69400cbd1ab85" title="Initializes a new instance of the WindowsWatchdog class." alt="" coords="1272,324,1580,364"/>
</map>
</div>

</div>
</div>
<a id="a6f69db8c3ceae298404f5d8d5a7312b3" name="a6f69db8c3ceae298404f5d8d5a7312b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f69db8c3ceae298404f5d8d5a7312b3">&#9670;&#160;</a></span>DisposeAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async ValueTask Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAsync </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00242">242</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  243</span>        {</div>
<div class="line"><span class="lineno">  244</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Disposing...&quot;</span>);</div>
<div class="line"><span class="lineno">  245</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>.Dispose();</div>
<div class="line"><span class="lineno">  246</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aefe25fd33c4a6dfb4ea27b583a2286ea">restartRegistration</a>.Dispose();</div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span>            await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8">DisposeAndNullControllersImpl</a>();</div>
<div class="line"><span class="lineno">  249</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5f9cfb67111bbc5ec1d954e4ed4bf913">controllerDisposeSemaphore</a>.Dispose();</div>
<div class="line"><span class="lineno">  250</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a47a5f64148a117c561df7b0e7e1703e6">monitorCts</a>?.Dispose();</div>
<div class="line"><span class="lineno">  251</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5c39f385b06058f4699503b492d2b743">disposed</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  252</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a47a5f64148a117c561df7b0e7e1703e6"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a47a5f64148a117c561df7b0e7e1703e6">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorCts</a></div><div class="ttdeci">CancellationTokenSource monitorCts</div><div class="ttdoc">The CancellationTokenSource for the monitor loop.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00143">WatchdogBase.cs:143</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a5c39f385b06058f4699503b492d2b743"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5c39f385b06058f4699503b492d2b743">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.disposed</a></div><div class="ttdeci">bool disposed</div><div class="ttdoc">If the WatchdogBase has been DisposeAsync'd.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00168">WatchdogBase.cs:168</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00108">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.controllerDisposeSemaphore</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllersImpl()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00168">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.disposed</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00073">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00143">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorCts</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00123">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.restartRegistration</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00103">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>.</p>

<p class="reference">Referenced by <a class="el" href="_windows_watchdog_8cs_source.html#l00076">Tgstation.Server.Host.Components.Watchdog.WindowsWatchdog.WindowsWatchdog()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6f69db8c3ceae298404f5d8d5a7312b3_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6f69db8c3ceae298404f5d8d5a7312b3_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6f69db8c3ceae298404f5d8d5a7312b3_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6f69db8c3ceae298404f5d8d5a7312b3_cgraph">
<area shape="rect" title=" " alt="" coords="5,13,263,53"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="311,5,577,60"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6f69db8c3ceae298404f5d8d5a7312b3_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6f69db8c3ceae298404f5d8d5a7312b3_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6f69db8c3ceae298404f5d8d5a7312b3_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6f69db8c3ceae298404f5d8d5a7312b3_icgraph">
<area shape="rect" title=" " alt="" coords="361,5,619,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_windows_watchdog.html#a0e1817e43a1511f502d69400cbd1ab85" title="Initializes a new instance of the WindowsWatchdog class." alt="" coords="5,5,313,45"/>
</map>
</div>

</div>
</div>
<a id="a634f53946305b875c65c04dfd1719830" name="a634f53946305b875c65c04dfd1719830"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a634f53946305b875c65c04dfd1719830">&#9670;&#160;</a></span>GetActiveController()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller.html">ISessionController</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the active ISessionController.  </p>
<dl class="section return"><dt>Returns</dt><dd>The active ISessionController.</dd></dl>

<p>Implemented in <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a81f31795e687423e39ed6a9e6dd82454">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00433">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.CreateDump()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00270">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleChatCommand()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00452">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleEvent()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l01043">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleHealthCheck()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00785">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00324">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ResetRebootState()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00337">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Restart()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l01002">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a634f53946305b875c65c04dfd1719830_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a634f53946305b875c65c04dfd1719830_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a634f53946305b875c65c04dfd1719830_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a634f53946305b875c65c04dfd1719830_icgraph">
<area shape="rect" title="Get the active ISessionController." alt="" coords="1960,193,2247,233"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad8489bee0d96bcaf87eba19adee17149" title="Attempt to create a process dump for DreamDaemon. A Task representing the running operation." alt="" coords="1638,5,1885,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a736a0993a11c8e6c5a00682dac054205" title="Handles a watchdog health check." alt="" coords="1272,56,1563,96"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="953,81,1224,121"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd" title="Restarts the watchdog. A Task representing the running operation." alt="" coords="352,225,579,265"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a75d69d7ce07458b0d83124a1315c1c37" title="Handle a chat command. A Task&lt;TResult&gt; resulting in the MessageContent text to send back." alt="" coords="1611,221,1912,261"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2058cfb9316ddf4e97d57785913bf869" title="Handle a given eventType . A Task representing the running operation." alt="" coords="1637,285,1885,325"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aaf696fd100732f5b9eb8900e81895bf0" title="Cancels pending graceful actions. A Task representing the running operation." alt="" coords="1621,349,1901,389"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6845304123ed975aec4de3dc79bf8551" title="Implementation of Terminate(bool, CancellationToken). Does not lock synchronizationSemaphore." alt="" coords="1622,413,1901,453"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="643,97,905,137"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af619caa031c183aa1aa5adbcf11a3434" title="Start the IWatchdog. A Task representing the running operation." alt="" coords="352,97,579,137"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="336,33,595,73"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,161,585,201"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3" title="Cancels pending graceful actions. A Task representing the running operation." alt="" coords="5,225,288,265"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a49a9acdffdc9e7cd176f803b23e97ff4" title="Stops the watchdog. A Task representing the running operation." alt="" coords="1301,413,1533,453"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a55690ee90b569ac84689ae6ec2a9e539" title="Handle a restart of the server. A Task representing the running operation." alt="" coords="960,413,1217,453"/>
</map>
</div>

</div>
</div>
<a id="a75d69d7ce07458b0d83124a1315c1c37" name="a75d69d7ce07458b0d83124a1315c1c37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75d69d7ce07458b0d83124a1315c1c37">&#9670;&#160;</a></span>HandleChatCommand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html">MessageContent</a> &gt; Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleChatCommand </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>commandName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>arguments</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_chat_user.html">ChatUser</a>&#160;</td>
          <td class="paramname"><em>sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle a chat command. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">commandName</td><td>The command name.</td></tr>
    <tr><td class="paramname">arguments</td><td>Everything typed after <em>commandName</em>  minus leading spaces.</td></tr>
    <tr><td class="paramname">sender</td><td>The sending <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_chat_user.html" title="Represents a tgs_chat_user datum.">ChatUser</a>.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task&lt;TResult&gt; resulting in the MessageContent text to send back.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_custom_command_handler.html#a87fbee2ac435bb743c6eddd3dbe23c6b">Tgstation.Server.Host.Components.Chat.ICustomCommandHandler</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00270">270</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  271</span>        {</div>
<div class="line"><span class="lineno">  272</span>            <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>, cancellationToken))</div>
<div class="line"><span class="lineno">  273</span>            {</div>
<div class="line"><span class="lineno">  274</span>                var commandObject = <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_chat_command.html">ChatCommand</a>(sender, commandName, arguments);</div>
<div class="line"><span class="lineno">  275</span>                var command = <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_parameters.html">TopicParameters</a>(commandObject);</div>
<div class="line"><span class="lineno">  276</span>                var activeServer = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">GetActiveController</a>();</div>
<div class="line"><span class="lineno">  277</span>                <span class="keywordflow">if</span> (<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Online || activeServer == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  278</span>                    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html">MessageContent</a></div>
<div class="line"><span class="lineno">  279</span>                    {</div>
<div class="line"><span class="lineno">  280</span>                        Text = <span class="stringliteral">&quot;TGS: Server offline!&quot;</span>,</div>
<div class="line"><span class="lineno">  281</span>                    };</div>
<div class="line"><span class="lineno">  282</span> </div>
<div class="line"><span class="lineno">  283</span>                var commandResult = await activeServer.SendCommand(command, cancellationToken);</div>
<div class="line"><span class="lineno">  284</span> </div>
<div class="line"><span class="lineno">  285</span>                <span class="keywordflow">if</span> (commandResult == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  286</span>                    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html">MessageContent</a></div>
<div class="line"><span class="lineno">  287</span>                    {</div>
<div class="line"><span class="lineno">  288</span>                        Text = <span class="stringliteral">&quot;TGS: Bad topic exchange!&quot;</span>,</div>
<div class="line"><span class="lineno">  289</span>                    };</div>
<div class="line"><span class="lineno">  290</span> </div>
<div class="line"><span class="lineno">  291</span>                <span class="keywordflow">if</span> (commandResult == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  292</span>                    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html">MessageContent</a></div>
<div class="line"><span class="lineno">  293</span>                    {</div>
<div class="line"><span class="lineno">  294</span>                        Text = <span class="stringliteral">&quot;TGS: Bad topic response!&quot;</span>,</div>
<div class="line"><span class="lineno">  295</span>                    };</div>
<div class="line"><span class="lineno">  296</span> </div>
<div class="line"><span class="lineno">  297</span>                var commandResponse = <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html">MessageContent</a></div>
<div class="line"><span class="lineno">  298</span>                {</div>
<div class="line"><span class="lineno">  299</span>                    Text = commandResult.CommandResponse?.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html#afc1d8f1a06bc8ce61a1d86b168ee123f">Text</a> ?? commandResult.CommandResponseMessage,</div>
<div class="line"><span class="lineno">  300</span>                    Embed = commandResult.CommandResponse?.Embed,</div>
<div class="line"><span class="lineno">  301</span>                };</div>
<div class="line"><span class="lineno">  302</span> </div>
<div class="line"><span class="lineno">  303</span>                <span class="keywordflow">if</span> (commandResponse.Text == <span class="keyword">null</span> &amp;&amp; commandResponse.Embed == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  304</span>                {</div>
<div class="line"><span class="lineno">  305</span>                    commandResponse.Text = <span class="stringliteral">&quot;TGS: Command processed but no DMAPI response returned!&quot;</span>;</div>
<div class="line"><span class="lineno">  306</span>                }</div>
<div class="line"><span class="lineno">  307</span> </div>
<div class="line"><span class="lineno">  308</span>                <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a78a34174a09d1726b92d2bc70182b657">HandleChatResponses</a>(commandResult);</div>
<div class="line"><span class="lineno">  309</span> </div>
<div class="line"><span class="lineno">  310</span>                <span class="keywordflow">return</span> commandResponse;</div>
<div class="line"><span class="lineno">  311</span>            }</div>
<div class="line"><span class="lineno">  312</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html">Tgstation.Server.Host.Components.Interop.MessageContent</a></div><div class="ttdoc">Represents a message to send to a chat provider.</div><div class="ttdef"><b>Definition:</b> <a href="_message_content_8cs_source.html#l00006">MessageContent.cs:7</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content_html_afc1d8f1a06bc8ce61a1d86b168ee123f"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html#afc1d8f1a06bc8ce61a1d86b168ee123f">Tgstation.Server.Host.Components.Interop.MessageContent.Text</a></div><div class="ttdeci">string Text</div><div class="ttdoc">The message string.</div><div class="ttdef"><b>Definition:</b> <a href="_message_content_8cs_source.html#l00011">MessageContent.cs:11</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_chat_command_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_chat_command.html">Tgstation.Server.Host.Components.Interop.Topic.ChatCommand</a></div><div class="ttdoc">Represents a chat command to be handled by DD.</div><div class="ttdef"><b>Definition:</b> <a href="_chat_command_8cs_source.html#l00010">ChatCommand.cs:11</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_parameters_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_parameters.html">Tgstation.Server.Host.Components.Interop.Topic.TopicParameters</a></div><div class="ttdoc">Parameters for a topic request.</div><div class="ttdef"><b>Definition:</b> <a href="_topic_parameters_8cs_source.html#l00012">TopicParameters.cs:13</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a78a34174a09d1726b92d2bc70182b657"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a78a34174a09d1726b92d2bc70182b657">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleChatResponses</a></div><div class="ttdeci">void HandleChatResponses(TopicResponse result)</div><div class="ttdoc">Handle any TopicResponse.ChatResponses in a given topic result .</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l01111">WatchdogBase.cs:1111</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l01111">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleChatResponses()</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00036">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00103">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>, and <a class="el" href="_message_content_8cs_source.html#l00011">Tgstation.Server.Host.Components.Interop.MessageContent.Text</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a75d69d7ce07458b0d83124a1315c1c37_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a75d69d7ce07458b0d83124a1315c1c37_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a75d69d7ce07458b0d83124a1315c1c37_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a75d69d7ce07458b0d83124a1315c1c37_cgraph">
<area shape="rect" title="Handle a chat command. A Task&lt;TResult&gt; resulting in the MessageContent text to send back." alt="" coords="5,69,307,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830" title="Get the active ISessionController." alt="" coords="365,5,651,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a78a34174a09d1726b92d2bc70182b657" title="Handle any TopicResponse.ChatResponses in a given topic result ." alt="" coords="355,69,661,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="413,133,603,173"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#af9226f864c0c82403eab7ac5f8e43002" title="Queue a chat message &#160;to a given set of channelIds ." alt="" coords="709,69,936,109"/>
</map>
</div>

</div>
</div>
<a id="a78a34174a09d1726b92d2bc70182b657" name="a78a34174a09d1726b92d2bc70182b657"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78a34174a09d1726b92d2bc70182b657">&#9670;&#160;</a></span>HandleChatResponses()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleChatResponses </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_response.html">TopicResponse</a>&#160;</td>
          <td class="paramname"><em>result</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle any <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_response.html#a18c82501c779543e0aea47992f683bd3" title="The ChatMessages to send as the result of a TopicCommandType.EventNotification request,...">TopicResponse.ChatResponses</a> in a given topic <em>result</em> .  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">result</td><td>The TopicResponse.</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l01111">1111</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1112</span>        {</div>
<div class="line"><span class="lineno"> 1113</span>            <span class="keywordflow">if</span> (result?.ChatResponses != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno"> 1114</span>                <span class="keywordflow">foreach</span> (var response <span class="keywordflow">in</span> result.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_response.html#a18c82501c779543e0aea47992f683bd3">ChatResponses</a>)</div>
<div class="line"><span class="lineno"> 1115</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#af9226f864c0c82403eab7ac5f8e43002">QueueMessage</a>(</div>
<div class="line"><span class="lineno"> 1116</span>                        response,</div>
<div class="line"><span class="lineno"> 1117</span>                        response.ChannelIds</div>
<div class="line"><span class="lineno"> 1118</span>                            .Select(channelIdString =&gt;</div>
<div class="line"><span class="lineno"> 1119</span>                            {</div>
<div class="line"><span class="lineno"> 1120</span>                                if (UInt64.TryParse(channelIdString, out var channelId))</div>
<div class="line"><span class="lineno"> 1121</span>                                    return (ulong?)channelId;</div>
<div class="line"><span class="lineno"> 1122</span>                                else</div>
<div class="line"><span class="lineno"> 1123</span>                                    Logger.LogWarning(<span class="stringliteral">&quot;Could not parse chat response channel ID: {channelID}&quot;</span>, channelIdString);</div>
<div class="line"><span class="lineno"> 1124</span> </div>
<div class="line"><span class="lineno"> 1125</span>                                return null;</div>
<div class="line"><span class="lineno"> 1126</span>                            })</div>
<div class="line"><span class="lineno"> 1127</span>                            .Where(nullableChannelId =&gt; nullableChannelId.HasValue)</div>
<div class="line"><span class="lineno"> 1128</span>                            .Select(nullableChannelId =&gt; nullableChannelId.Value));</div>
<div class="line"><span class="lineno"> 1129</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_response_html_a18c82501c779543e0aea47992f683bd3"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_response.html#a18c82501c779543e0aea47992f683bd3">Tgstation.Server.Host.Components.Interop.Topic.TopicResponse.ChatResponses</a></div><div class="ttdeci">ICollection&lt; ChatMessage &gt; ChatResponses</div><div class="ttdoc">The ChatMessages to send as the result of a TopicCommandType.EventNotification request,...</div><div class="ttdef"><b>Definition:</b> <a href="_topic_response_8cs_source.html#l00025">TopicResponse.cs:25</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager_html_af9226f864c0c82403eab7ac5f8e43002"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#af9226f864c0c82403eab7ac5f8e43002">Tgstation.Server.Host.Components.Chat.IChatManager.QueueMessage</a></div><div class="ttdeci">void QueueMessage(MessageContent message, IEnumerable&lt; ulong &gt; channelIds)</div><div class="ttdoc">Queue a chat message  to a given set of channelIds .</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00078">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, and <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#af9226f864c0c82403eab7ac5f8e43002">Tgstation.Server.Host.Components.Chat.IChatManager.QueueMessage()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00270">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleChatCommand()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00452">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleEvent()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a78a34174a09d1726b92d2bc70182b657_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a78a34174a09d1726b92d2bc70182b657_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a78a34174a09d1726b92d2bc70182b657_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a78a34174a09d1726b92d2bc70182b657_cgraph">
<area shape="rect" title="Handle any TopicResponse.ChatResponses in a given topic result ." alt="" coords="5,5,312,45"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#af9226f864c0c82403eab7ac5f8e43002" title="Queue a chat message &#160;to a given set of channelIds ." alt="" coords="360,5,587,45"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a78a34174a09d1726b92d2bc70182b657_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a78a34174a09d1726b92d2bc70182b657_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a78a34174a09d1726b92d2bc70182b657_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a78a34174a09d1726b92d2bc70182b657_icgraph">
<area shape="rect" title="Handle any TopicResponse.ChatResponses in a given topic result ." alt="" coords="355,37,661,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a75d69d7ce07458b0d83124a1315c1c37" title="Handle a chat command. A Task&lt;TResult&gt; resulting in the MessageContent text to send back." alt="" coords="5,5,307,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2058cfb9316ddf4e97d57785913bf869" title="Handle a given eventType . A Task representing the running operation." alt="" coords="32,69,280,109"/>
</map>
</div>

</div>
</div>
<a id="a2058cfb9316ddf4e97d57785913bf869" name="a2058cfb9316ddf4e97d57785913bf869"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2058cfb9316ddf4e97d57785913bf869">&#9670;&#160;</a></span>HandleEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task IEventConsumer. Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>&#160;</td>
          <td class="paramname"><em>eventType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IEnumerable&lt; string &gt;&#160;</td>
          <td class="paramname"><em>parameters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>deploymentPipeline</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle a given <em>eventType</em> . <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">eventType</td><td>The <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7" title="Types of events. Mirror in tgs.dm.">EventType</a>.</td></tr>
    <tr><td class="paramname">parameters</td><td>An IEnumerable&lt;T&gt; of string parameters for <em>eventType</em> .</td></tr>
    <tr><td class="paramname">deploymentPipeline</td><td>If this event is part of the deployment pipeline.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#acefbbc13736d330bb4214aaea995955c">Tgstation.Server.Host.Components.Events.IEventConsumer</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00452">452</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  453</span>        {</div>
<div class="line"><span class="lineno">  454</span>            ArgumentNullException.ThrowIfNull(parameters);</div>
<div class="line"><span class="lineno">  455</span> </div>
<div class="line"><span class="lineno">  456</span>            <span class="comment">// Method explicitly implemented to prevent accidental calls when this.eventConsumer should be used.</span></div>
<div class="line"><span class="lineno">  457</span>            var activeServer = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">GetActiveController</a>();</div>
<div class="line"><span class="lineno">  458</span> </div>
<div class="line"><span class="lineno">  459</span>            <span class="comment">// Server may have ended</span></div>
<div class="line"><span class="lineno">  460</span>            <span class="keywordflow">if</span> (activeServer == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  461</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  462</span> </div>
<div class="line"><span class="lineno">  463</span>            var notification = <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_event_notification.html">EventNotification</a>(eventType, parameters);</div>
<div class="line"><span class="lineno">  464</span>            var result = await activeServer.SendCommand(</div>
<div class="line"><span class="lineno">  465</span>                <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_parameters.html">TopicParameters</a>(notification),</div>
<div class="line"><span class="lineno">  466</span>                cancellationToken);</div>
<div class="line"><span class="lineno">  467</span> </div>
<div class="line"><span class="lineno">  468</span>            <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a78a34174a09d1726b92d2bc70182b657">HandleChatResponses</a>(result);</div>
<div class="line"><span class="lineno">  469</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_event_notification_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_event_notification.html">Tgstation.Server.Host.Components.Interop.Topic.EventNotification</a></div><div class="ttdoc">Data structure for TopicCommandType.EventNotification requests.</div><div class="ttdef"><b>Definition:</b> <a href="_event_notification_8cs_source.html#l00012">EventNotification.cs:13</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l01111">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleChatResponses()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2058cfb9316ddf4e97d57785913bf869_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2058cfb9316ddf4e97d57785913bf869_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2058cfb9316ddf4e97d57785913bf869_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2058cfb9316ddf4e97d57785913bf869_cgraph">
<area shape="rect" title="Handle a given eventType . A Task representing the running operation." alt="" coords="5,37,253,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830" title="Get the active ISessionController." alt="" coords="311,5,598,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a78a34174a09d1726b92d2bc70182b657" title="Handle any TopicResponse.ChatResponses in a given topic result ." alt="" coords="301,69,608,109"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#af9226f864c0c82403eab7ac5f8e43002" title="Queue a chat message &#160;to a given set of channelIds ." alt="" coords="656,69,883,109"/>
</map>
</div>

</div>
</div>
<a id="a61974ff4ef41775f690f61ee6fe113f2" name="a61974ff4ef41775f690f61ee6fe113f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61974ff4ef41775f690f61ee6fe113f2">&#9670;&#160;</a></span>HandleEventImpl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleEventImpl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>&#160;</td>
          <td class="paramname"><em>eventType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IEnumerable&lt; string &gt;&#160;</td>
          <td class="paramname"><em>parameters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>relayToSession</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle a given <em>eventType</em>  without re-throwing errors.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">eventType</td><td>The <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7" title="Types of events. Mirror in tgs.dm.">EventType</a>.</td></tr>
    <tr><td class="paramname">parameters</td><td>An IEnumerable&lt;T&gt; of string parameters for <em>eventType</em> .</td></tr>
    <tr><td class="paramname">relayToSession</td><td>If the event should be sent to DreamDaemon.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00696">696</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  697</span>        {</div>
<div class="line"><span class="lineno">  698</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  699</span>            {</div>
<div class="line"><span class="lineno">  700</span>                var sessionEventTask = relayToSession ? ((<a class="code hl_interface" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html">IEventConsumer</a>)<span class="keyword">this</span>).HandleEvent(eventType, parameters, <span class="keyword">false</span>, cancellationToken) : Task.CompletedTask;</div>
<div class="line"><span class="lineno">  701</span>                await Task.WhenAll(</div>
<div class="line"><span class="lineno">  702</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5768c37124d54e80c66dc63d28d0dea4">eventConsumer</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#acefbbc13736d330bb4214aaea995955c">HandleEvent</a>(eventType, parameters, <span class="keyword">false</span>, cancellationToken),</div>
<div class="line"><span class="lineno">  703</span>                    sessionEventTask);</div>
<div class="line"><span class="lineno">  704</span>            }</div>
<div class="line"><span class="lineno">  705</span>            <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a> ex)</div>
<div class="line"><span class="lineno">  706</span>            {</div>
<div class="line"><span class="lineno">  707</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogError(ex, <span class="stringliteral">&quot;Suppressing exception triggered by event!&quot;</span>);</div>
<div class="line"><span class="lineno">  708</span>            }</div>
<div class="line"><span class="lineno">  709</span>        }</div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer_html"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html">Tgstation.Server.Host.Components.Events.IEventConsumer</a></div><div class="ttdoc">Consumes EventTypes and takes the appropriate actions.</div><div class="ttdef"><b>Definition:</b> <a href="_i_event_consumer_8cs_source.html#l00010">IEventConsumer.cs:11</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer_html_acefbbc13736d330bb4214aaea995955c"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#acefbbc13736d330bb4214aaea995955c">Tgstation.Server.Host.Components.Events.IEventConsumer.HandleEvent</a></div><div class="ttdeci">Task HandleEvent(EventType eventType, IEnumerable&lt; string &gt; parameters, bool deploymentPipeline, CancellationToken cancellationToken)</div><div class="ttdoc">Handle a given eventType .</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00113">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.eventConsumer</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#acefbbc13736d330bb4214aaea995955c">Tgstation.Server.Host.Components.Events.IEventConsumer.HandleEvent()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00073">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>.</p>

<p class="reference">Referenced by <a class="el" href="_basic_watchdog_8cs_source.html#l00107">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.HandleMonitorWakeup()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00489">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l01002">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a61974ff4ef41775f690f61ee6fe113f2_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a61974ff4ef41775f690f61ee6fe113f2_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a61974ff4ef41775f690f61ee6fe113f2_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a61974ff4ef41775f690f61ee6fe113f2_cgraph">
<area shape="rect" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="5,5,279,45"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#acefbbc13736d330bb4214aaea995955c" title="Handle a given eventType ." alt="" coords="327,5,565,45"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a61974ff4ef41775f690f61ee6fe113f2_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a61974ff4ef41775f690f61ee6fe113f2_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a61974ff4ef41775f690f61ee6fe113f2_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a61974ff4ef41775f690f61ee6fe113f2_icgraph">
<area shape="rect" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="999,159,1272,199"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a7f6314f04d25300b61c73a5fdede8cfb" title="Handles the actions to take when the monitor has to &quot;wake up&quot;. A Task&lt;TResult&gt; resulting in the Monit..." alt="" coords="643,95,951,135"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="665,159,928,199"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6845304123ed975aec4de3dc79bf8551" title="Implementation of Terminate(bool, CancellationToken). Does not lock synchronizationSemaphore." alt="" coords="657,248,936,288"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af619caa031c183aa1aa5adbcf11a3434" title="Start the IWatchdog. A Task representing the running operation." alt="" coords="352,5,579,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="336,69,595,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd" title="Restarts the watchdog. A Task representing the running operation." alt="" coords="352,248,579,288"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,133,585,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="11,127,282,167"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3" title="Cancels pending graceful actions. A Task representing the running operation." alt="" coords="5,248,288,288"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a49a9acdffdc9e7cd176f803b23e97ff4" title="Stops the watchdog. A Task representing the running operation." alt="" coords="349,312,581,352"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a55690ee90b569ac84689ae6ec2a9e539" title="Handle a restart of the server. A Task representing the running operation." alt="" coords="18,312,275,352"/>
</map>
</div>

</div>
</div>
<a id="a736a0993a11c8e6c5a00682dac054205" name="a736a0993a11c8e6c5a00682dac054205"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a736a0993a11c8e6c5a00682dac054205">&#9670;&#160;</a></span>HandleHealthCheck()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a> &gt; Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleHealthCheck </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles a watchdog health check.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task&lt;TResult&gt; resulting in the next <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812" title="The action for the monitor loop to take when control is returned to it.">MonitorAction</a> to take.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l01043">1043</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1044</span>        {</div>
<div class="line"><span class="lineno"> 1045</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Sending health check to active server...&quot;</span>);</div>
<div class="line"><span class="lineno"> 1046</span>            var activeServer = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">GetActiveController</a>();</div>
<div class="line"><span class="lineno"> 1047</span>            var response = await activeServer.SendCommand(<span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_topic_1_1_topic_parameters.html">TopicParameters</a>(), cancellationToken);</div>
<div class="line"><span class="lineno"> 1048</span> </div>
<div class="line"><span class="lineno"> 1049</span>            var shouldShutdown = activeServer.RebootState == Session.RebootState.Shutdown;</div>
<div class="line"><span class="lineno"> 1050</span>            <span class="keywordflow">if</span> (response == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno"> 1051</span>            {</div>
<div class="line"><span class="lineno"> 1052</span>                <span class="keywordflow">switch</span> (++<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae85241e9a900f49e703b7eda13c78564">healthChecksMissed</a>)</div>
<div class="line"><span class="lineno"> 1053</span>                {</div>
<div class="line"><span class="lineno"> 1054</span>                    <span class="keywordflow">case</span> 1:</div>
<div class="line"><span class="lineno"> 1055</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogDebug(<span class="stringliteral">&quot;DEFCON 4: DreamDaemon missed first health check!&quot;</span>);</div>
<div class="line"><span class="lineno"> 1056</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1057</span>                    <span class="keywordflow">case</span> 2:</div>
<div class="line"><span class="lineno"> 1058</span>                        <span class="keyword">const</span> <span class="keywordtype">string</span> message2 = <span class="stringliteral">&quot;DEFCON 3: DreamDaemon has missed 2 health checks!&quot;</span>;</div>
<div class="line"><span class="lineno"> 1059</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogInformation(message2);</div>
<div class="line"><span class="lineno"> 1060</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">QueueWatchdogMessage</a>(message2);</div>
<div class="line"><span class="lineno"> 1061</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1062</span>                    <span class="keywordflow">case</span> 3:</div>
<div class="line"><span class="lineno"> 1063</span>                        var actionToTake = shouldShutdown</div>
<div class="line"><span class="lineno"> 1064</span>                            ? <span class="stringliteral">&quot;shutdown&quot;</span></div>
<div class="line"><span class="lineno"> 1065</span>                            : <span class="stringliteral">&quot;be restarted&quot;</span>;</div>
<div class="line"><span class="lineno"> 1066</span>                        <span class="keyword">const</span> <span class="keywordtype">string</span> logTemplate1 = <span class="stringliteral">&quot;DEFCON 2: DreamDaemon has missed 3 health checks! If it does not respond to the next one, the watchdog will {actionToTake}!&quot;</span>;</div>
<div class="line"><span class="lineno"> 1067</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogWarning(logTemplate1, actionToTake);</div>
<div class="line"><span class="lineno"> 1068</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">QueueWatchdogMessage</a>(</div>
<div class="line"><span class="lineno"> 1069</span>                            logTemplate1.Replace(</div>
<div class="line"><span class="lineno"> 1070</span>                                <span class="stringliteral">&quot;{actionToTake}&quot;</span>,</div>
<div class="line"><span class="lineno"> 1071</span>                                actionToTake,</div>
<div class="line"><span class="lineno"> 1072</span>                                StringComparison.Ordinal));</div>
<div class="line"><span class="lineno"> 1073</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1074</span>                    <span class="keywordflow">case</span> 4:</div>
<div class="line"><span class="lineno"> 1075</span>                        var actionTaken = shouldShutdown</div>
<div class="line"><span class="lineno"> 1076</span>                            ? <span class="stringliteral">&quot;Shutting down due to graceful termination request&quot;</span></div>
<div class="line"><span class="lineno"> 1077</span>                            : <span class="stringliteral">&quot;Restarting&quot;</span>;</div>
<div class="line"><span class="lineno"> 1078</span>                        <span class="keyword">const</span> <span class="keywordtype">string</span> logTemplate2 = <span class="stringliteral">&quot;DEFCON 1: Four health checks have been missed! {actionTaken}...&quot;</span>;</div>
<div class="line"><span class="lineno"> 1079</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogWarning(logTemplate2, actionTaken);</div>
<div class="line"><span class="lineno"> 1080</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">QueueWatchdogMessage</a>(</div>
<div class="line"><span class="lineno"> 1081</span>                            logTemplate2.Replace(</div>
<div class="line"><span class="lineno"> 1082</span>                                <span class="stringliteral">&quot;{actionTaken}&quot;</span>,</div>
<div class="line"><span class="lineno"> 1083</span>                                actionTaken,</div>
<div class="line"><span class="lineno"> 1084</span>                                StringComparison.Ordinal));</div>
<div class="line"><span class="lineno"> 1085</span> </div>
<div class="line"><span class="lineno"> 1086</span>                        <span class="keywordflow">if</span> (<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">ActiveLaunchParameters</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html#ae1546ab1b54146ff4cbc6b827c2f0eda">DumpOnHealthCheckRestart</a>.Value)</div>
<div class="line"><span class="lineno"> 1087</span>                        {</div>
<div class="line"><span class="lineno"> 1088</span>                            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogDebug(<span class="stringliteral">&quot;DumpOnHealthCheckRestart enabled.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1089</span>                            await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad8489bee0d96bcaf87eba19adee17149">CreateDump</a>(cancellationToken);</div>
<div class="line"><span class="lineno"> 1090</span>                        }</div>
<div class="line"><span class="lineno"> 1091</span>                        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1092</span>                            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;DumpOnHealthCheckRestart disabled.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1093</span> </div>
<div class="line"><span class="lineno"> 1094</span>                        await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5">DisposeAndNullControllers</a>(cancellationToken);</div>
<div class="line"><span class="lineno"> 1095</span>                        <span class="keywordflow">return</span> shouldShutdown ? MonitorAction.Exit : <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Restart;</div>
<div class="line"><span class="lineno"> 1096</span>                    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1097</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogError(<span class="stringliteral">&quot;Invalid health checks missed count: {healthChecksMissed}&quot;</span>, <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae85241e9a900f49e703b7eda13c78564">healthChecksMissed</a>);</div>
<div class="line"><span class="lineno"> 1098</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1099</span>                }</div>
<div class="line"><span class="lineno"> 1100</span>            }</div>
<div class="line"><span class="lineno"> 1101</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1102</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae85241e9a900f49e703b7eda13c78564">healthChecksMissed</a> = 0;</div>
<div class="line"><span class="lineno"> 1103</span> </div>
<div class="line"><span class="lineno"> 1104</span>            <span class="keywordflow">return</span> <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Continue;</div>
<div class="line"><span class="lineno"> 1105</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters_html_ae1546ab1b54146ff4cbc6b827c2f0eda"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html#ae1546ab1b54146ff4cbc6b827c2f0eda">Tgstation.Server.Api.Models.Internal.DreamDaemonLaunchParameters.DumpOnHealthCheckRestart</a></div><div class="ttdeci">bool? DumpOnHealthCheckRestart</div><div class="ttdoc">If a process core dump should be created prior to restarting the watchdog due to health check failure...</div><div class="ttdef"><b>Definition:</b> <a href="_dream_daemon_launch_parameters_8cs_source.html#l00069">DreamDaemonLaunchParameters.cs:69</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a875fe1589eb86e57a50a0e793b0d74f5"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers</a></div><div class="ttdeci">async Task DisposeAndNullControllers(CancellationToken cancellationToken)</div><div class="ttdoc">Wrapper for DisposeAndNullControllersImpl under a locked context.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00633">WatchdogBase.cs:633</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_ad8489bee0d96bcaf87eba19adee17149"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad8489bee0d96bcaf87eba19adee17149">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.CreateDump</a></div><div class="ttdeci">async Task CreateDump(CancellationToken cancellationToken)</div><div class="ttdoc">Attempt to create a process dump for DreamDaemon. A Task representing the running operation.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00433">WatchdogBase.cs:433</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_ae85241e9a900f49e703b7eda13c78564"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae85241e9a900f49e703b7eda13c78564">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.healthChecksMissed</a></div><div class="ttdeci">int healthChecksMissed</div><div class="ttdoc">The number of hearbeats missed.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00158">WatchdogBase.cs:158</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager_html_a103e061814fc6760410734c7a83f9a83"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">Tgstation.Server.Host.Components.Chat.IChatManager.QueueWatchdogMessage</a></div><div class="ttdeci">void QueueWatchdogMessage(string message)</div><div class="ttdoc">Queue a chat message  to configured watchdog channels.</div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_html_a97c1a4a168451bd7e3be23c467aa2812"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">Tgstation.Server.Host.Components.Watchdog.MonitorAction</a></div><div class="ttdeci">MonitorAction</div><div class="ttdoc">The action for the monitor loop to take when control is returned to it.</div><div class="ttdef"><b>Definition:</b> <a href="_monitor_action_8cs_source.html#l00006">MonitorAction.cs:7</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00049">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveLaunchParameters</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00078">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00433">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.CreateDump()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00633">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers()</a>, <a class="el" href="_dream_daemon_launch_parameters_8cs_source.html#l00069">Tgstation.Server.Api.Models.Internal.DreamDaemonLaunchParameters.DumpOnHealthCheckRestart</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00158">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.healthChecksMissed</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00073">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, and <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">Tgstation.Server.Host.Components.Chat.IChatManager.QueueWatchdogMessage()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00785">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a736a0993a11c8e6c5a00682dac054205_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a736a0993a11c8e6c5a00682dac054205_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a736a0993a11c8e6c5a00682dac054205_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a736a0993a11c8e6c5a00682dac054205_cgraph">
<area shape="rect" title="Handles a watchdog health check." alt="" coords="5,231,296,271"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad8489bee0d96bcaf87eba19adee17149" title="Attempt to create a process dump for DreamDaemon. A Task representing the running operation." alt="" coords="363,133,610,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830" title="Get the active ISessionController." alt="" coords="677,197,964,237"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="353,255,620,310"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="344,335,629,375"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e" title="Combines an array of strings into a path." alt="" coords="737,5,905,45"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a69aa1b9dbeb6af3744e568095c4376e7" title="Create a directory at path ." alt="" coords="729,69,912,109"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78" title="Retrieve the full path of the current working directory." alt="" coords="737,133,905,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aebef451cedbed6fe5a4367fe035470a7" title="Clear any stored ReattachInformation. A Task representing the running operation." alt="" coords="707,261,934,301"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="687,326,954,381"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="725,405,916,445"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aa948dc00c200539206747c99b95986af" title="Clear any stored ReattachInformation." alt="" coords="1012,261,1241,301"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_collection.html#ad270ec18822a7a90d8fca9a75c23851a" title="Remove a given model &#160;from the the working set." alt="" coords="1289,261,1499,301"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a736a0993a11c8e6c5a00682dac054205_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a736a0993a11c8e6c5a00682dac054205_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a736a0993a11c8e6c5a00682dac054205_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a736a0993a11c8e6c5a00682dac054205_icgraph">
<area shape="rect" title="Handles a watchdog health check." alt="" coords="1272,40,1563,80"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="953,40,1224,80"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="643,69,905,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af619caa031c183aa1aa5adbcf11a3434" title="Start the IWatchdog. A Task representing the running operation." alt="" coords="352,69,579,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="336,5,595,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd" title="Restarts the watchdog. A Task representing the running operation." alt="" coords="352,133,579,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,197,585,237"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3" title="Cancels pending graceful actions. A Task representing the running operation." alt="" coords="5,133,288,173"/>
</map>
</div>

</div>
</div>
<a id="a0ddddb5064444b1786a360d85c3c3873" name="a0ddddb5064444b1786a360d85c3c3873"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddddb5064444b1786a360d85c3c3873">&#9670;&#160;</a></span>HandleMonitorWakeup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract Task&lt; <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a> &gt; Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleMonitorWakeup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a>&#160;</td>
          <td class="paramname"><em>activationReason</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles the actions to take when the monitor has to "wake up".  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">activationReason</td><td>The <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9" title="Reasons for the monitor to wake up.">MonitorActivationReason</a> that caused the invocation. Will never be MonitorActivationReason.HealthCheck.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task&lt;TResult&gt; resulting in the <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812" title="The action for the monitor loop to take when control is returned to it.">MonitorAction</a> to take.</dd></dl>

<p>Implemented in <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a7f6314f04d25300b61c73a5fdede8cfb">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog</a>, and <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_windows_watchdog.html#ae1cd2c06367bf945d337b2b07a3138be">Tgstation.Server.Host.Components.Watchdog.WindowsWatchdog</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00785">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a0ddddb5064444b1786a360d85c3c3873_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a0ddddb5064444b1786a360d85c3c3873_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a0ddddb5064444b1786a360d85c3c3873_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a0ddddb5064444b1786a360d85c3c3873_icgraph">
<area shape="rect" title="Handles the actions to take when the monitor has to &quot;wake up&quot;." alt="" coords="1272,40,1577,80"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="953,40,1224,80"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="643,69,905,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af619caa031c183aa1aa5adbcf11a3434" title="Start the IWatchdog. A Task representing the running operation." alt="" coords="352,69,579,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="336,5,595,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd" title="Restarts the watchdog. A Task representing the running operation." alt="" coords="352,133,579,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,197,585,237"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3" title="Cancels pending graceful actions. A Task representing the running operation." alt="" coords="5,133,288,173"/>
</map>
</div>

</div>
</div>
<a id="a55690ee90b569ac84689ae6ec2a9e539" name="a55690ee90b569ac84689ae6ec2a9e539"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55690ee90b569ac84689ae6ec2a9e539">&#9670;&#160;</a></span>HandleRestart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleRestart </td>
          <td>(</td>
          <td class="paramtype">Version&#160;</td>
          <td class="paramname"><em>updateVersion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>handlerMayDelayShutdownWithExtremelyLongRunningTasks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle a restart of the server. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">updateVersion</td><td>The Version being updated to, <code>null</code> if not being changed.</td></tr>
    <tr><td class="paramname">handlerMayDelayShutdownWithExtremelyLongRunningTasks</td><td>If <code>false</code> the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_restart_handler.html" title="Handler for server restarts.">IRestartHandler</a> should aim to complete the Task returned from this function ASAP.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_restart_handler.html#a1a66ba5a98464e55bbb85195d3c49a50">Tgstation.Server.Host.Core.IRestartHandler</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00405">405</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  406</span>        {</div>
<div class="line"><span class="lineno">  407</span>            <span class="keywordflow">if</span> (handlerMayDelayShutdownWithExtremelyLongRunningTasks)</div>
<div class="line"><span class="lineno">  408</span>            {</div>
<div class="line"><span class="lineno">  409</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a49a9acdffdc9e7cd176f803b23e97ff4">Terminate</a>(<span class="keyword">true</span>, cancellationToken);</div>
<div class="line"><span class="lineno">  410</span> </div>
<div class="line"><span class="lineno">  411</span>                <span class="keywordflow">if</span> (<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Offline)</div>
<div class="line"><span class="lineno">  412</span>                {</div>
<div class="line"><span class="lineno">  413</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogDebug(<span class="stringliteral">&quot;Waiting for server to gracefully shut down.&quot;</span>);</div>
<div class="line"><span class="lineno">  414</span>                    await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abfb7590db69ab59a040c1ac91c671d6d">monitorTask</a>.WaitAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  415</span>                }</div>
<div class="line"><span class="lineno">  416</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  417</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Graceful shutdown requested but server is already offline.&quot;</span>);</div>
<div class="line"><span class="lineno">  418</span> </div>
<div class="line"><span class="lineno">  419</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  420</span>            }</div>
<div class="line"><span class="lineno">  421</span> </div>
<div class="line"><span class="lineno">  422</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">releaseServers</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  423</span>            <span class="keywordflow">if</span> (<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Online)</div>
<div class="line"><span class="lineno">  424</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">QueueWatchdogMessage</a>(<span class="stringliteral">&quot;Detaching...&quot;</span>);</div>
<div class="line"><span class="lineno">  425</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  426</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Not sending detach chat message as status is: {status}&quot;</span>, <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a>);</div>
<div class="line"><span class="lineno">  427</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a49a9acdffdc9e7cd176f803b23e97ff4"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a49a9acdffdc9e7cd176f803b23e97ff4">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Terminate</a></div><div class="ttdeci">async Task Terminate(bool graceful, CancellationToken cancellationToken)</div><div class="ttdoc">Stops the watchdog. A Task representing the running operation.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00398">WatchdogBase.cs:398</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_abfb7590db69ab59a040c1ac91c671d6d"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abfb7590db69ab59a040c1ac91c671d6d">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorTask</a></div><div class="ttdeci">Task monitorTask</div><div class="ttdoc">The Task running the monitor loop.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00148">WatchdogBase.cs:148</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00078">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00073">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00148">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorTask</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">Tgstation.Server.Host.Components.Chat.IChatManager.QueueWatchdogMessage()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00163">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.releaseServers</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00036">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00398">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Terminate()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a55690ee90b569ac84689ae6ec2a9e539_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a55690ee90b569ac84689ae6ec2a9e539_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a55690ee90b569ac84689ae6ec2a9e539_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a55690ee90b569ac84689ae6ec2a9e539_cgraph">
<area shape="rect" title="Handle a restart of the server. A Task representing the running operation." alt="" coords="5,35,263,75"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="918,5,1203,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a49a9acdffdc9e7cd176f803b23e97ff4" title="Stops the watchdog. A Task representing the running operation." alt="" coords="311,63,543,103"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="635,63,825,103"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6845304123ed975aec4de3dc79bf8551" title="Implementation of Terminate(bool, CancellationToken). Does not lock synchronizationSemaphore." alt="" coords="591,127,869,167"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830" title="Get the active ISessionController." alt="" coords="917,69,1204,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a61974ff4ef41775f690f61ee6fe113f2" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="924,133,1197,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab4c51b6e88cc02dfa78070f5870b3b30" title="Stops MonitorLifetimes(CancellationToken). Doesn&#39;t kill the servers." alt="" coords="939,197,1183,237"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#acefbbc13736d330bb4214aaea995955c" title="Handle a given eventType ." alt="" coords="1252,133,1491,173"/>
</map>
</div>

</div>
</div>
<a id="a73f31d67f3a7aad74b0e26e1949cb302" name="a73f31d67f3a7aad74b0e26e1949cb302"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73f31d67f3a7aad74b0e26e1949cb302">&#9670;&#160;</a></span>InitController()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.InitController </td>
          <td>(</td>
          <td class="paramtype">Task&#160;</td>
          <td class="paramname"><em>eventTask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_reattach_information.html">ReattachInformation</a>&#160;</td>
          <td class="paramname"><em>reattachInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Starts all ISessionControllers.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">eventTask</td><td>A, possibly active, Task for an event that's running.</td></tr>
    <tr><td class="paramname">reattachInfo</td><td>ReattachInformation to use, if any.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>

<p>Implemented in <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#ad6a174232e66f5070f33b14e2cf15d48">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00489">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00610">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ReattachFailure()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a73f31d67f3a7aad74b0e26e1949cb302_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a73f31d67f3a7aad74b0e26e1949cb302_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a73f31d67f3a7aad74b0e26e1949cb302_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a73f31d67f3a7aad74b0e26e1949cb302_icgraph">
<area shape="rect" title="Starts all ISessionControllers." alt="" coords="956,197,1203,237"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="644,133,907,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2a1ca4d25ec02eb53ddbcb36088331a1" title="Call from InitController(Task, ReattachInformation, CancellationToken) when a reattach operation fail..." alt="" coords="643,229,908,269"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af619caa031c183aa1aa5adbcf11a3434" title="Start the IWatchdog. A Task representing the running operation." alt="" coords="352,37,579,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="336,101,595,141"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd" title="Restarts the watchdog. A Task representing the running operation." alt="" coords="352,165,579,205"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,229,585,269"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="11,41,282,81"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3" title="Cancels pending graceful actions. A Task representing the running operation." alt="" coords="5,165,288,205"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#ad6a174232e66f5070f33b14e2cf15d48" title="Starts all ISessionControllers. A Task representing the running operation." alt="" coords="340,293,591,333"/>
</map>
</div>

</div>
</div>
<a id="a6d6672dfae1375d392bcd16ed604590d" name="a6d6672dfae1375d392bcd16ed604590d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d6672dfae1375d392bcd16ed604590d">&#9670;&#160;</a></span>InitialCheckDmbUpdated()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.InitialCheckDmbUpdated </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_compile_job.html">CompileJob</a>&#160;</td>
          <td class="paramname"><em>currentCompileJob</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check for a new IDmbProvider.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">currentCompileJob</td><td>The session's current CompileJob.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task that completes if and when a newer CompileJob is available.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00762">762</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  763</span>        {</div>
<div class="line"><span class="lineno">  764</span>            var factoryTask = <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html">DmbFactory</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#ab61dd81459c04b375182d4a0c8c4cdfe">OnNewerDmb</a>;</div>
<div class="line"><span class="lineno">  765</span> </div>
<div class="line"><span class="lineno">  766</span>            var latestCompileJob = <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html">DmbFactory</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#a6fe38a0d817315fc1bd52ffd47b9d3d5">LatestCompileJob</a>();</div>
<div class="line"><span class="lineno">  767</span>            <span class="keywordflow">if</span> (latestCompileJob == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  768</span>                <span class="keywordflow">return</span> factoryTask;</div>
<div class="line"><span class="lineno">  769</span> </div>
<div class="line"><span class="lineno">  770</span>            <span class="keywordflow">if</span> (latestCompileJob.Id != currentCompileJob.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_entity_id.html#ae31e478e1d338b37a14565df6fd58570">Id</a>)</div>
<div class="line"><span class="lineno">  771</span>            {</div>
<div class="line"><span class="lineno">  772</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogDebug(<span class="stringliteral">&quot;Found new CompileJob without waiting&quot;</span>);</div>
<div class="line"><span class="lineno">  773</span>                <span class="keywordflow">return</span> Task.CompletedTask;</div>
<div class="line"><span class="lineno">  774</span>            }</div>
<div class="line"><span class="lineno">  775</span> </div>
<div class="line"><span class="lineno">  776</span>            <span class="keywordflow">return</span> factoryTask;</div>
<div class="line"><span class="lineno">  777</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory_html_a6fe38a0d817315fc1bd52ffd47b9d3d5"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#a6fe38a0d817315fc1bd52ffd47b9d3d5">Tgstation.Server.Host.Components.Deployment.DmbFactory.LatestCompileJob</a></div><div class="ttdeci">CompileJob LatestCompileJob()</div><div class="ttdoc">Gets the latest CompileJob. The latest CompileJob.</div><div class="ttdef"><b>Definition:</b> <a href="_dmb_factory_8cs_source.html#l00386">DmbFactory.cs:386</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory_html_ab61dd81459c04b375182d4a0c8c4cdfe"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#ab61dd81459c04b375182d4a0c8c4cdfe">Tgstation.Server.Host.Components.Deployment.DmbFactory.OnNewerDmb</a></div><div class="ttdeci">Task OnNewerDmb</div><div class="ttdoc">Get a Task that completes when the result of a call to LockNextDmb will be different than the previou...</div><div class="ttdef"><b>Definition:</b> <a href="_dmb_factory_8cs_source.html#l00025">DmbFactory.cs:26</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_entity_id_8cs_source.html#l00013">Tgstation.Server.Api.Models.EntityId.Id</a>, <a class="el" href="_dmb_factory_8cs_source.html#l00386">Tgstation.Server.Host.Components.Deployment.DmbFactory.LatestCompileJob()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00073">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, and <a class="el" href="_dmb_factory_8cs_source.html#l00026">Tgstation.Server.Host.Components.Deployment.DmbFactory.OnNewerDmb</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00785">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6d6672dfae1375d392bcd16ed604590d_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6d6672dfae1375d392bcd16ed604590d_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6d6672dfae1375d392bcd16ed604590d_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6d6672dfae1375d392bcd16ed604590d_cgraph">
<area shape="rect" title="Check for a new IDmbProvider." alt="" coords="5,5,275,60"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#a6fe38a0d817315fc1bd52ffd47b9d3d5" title="Gets the latest CompileJob. The latest CompileJob." alt="" coords="323,13,593,53"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#aa5ae13811ef0862a54741653dc058783" title="Gets the next IDmbProvider. A new IDmbProvider." alt="" coords="641,13,891,53"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6d6672dfae1375d392bcd16ed604590d_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6d6672dfae1375d392bcd16ed604590d_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6d6672dfae1375d392bcd16ed604590d_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6d6672dfae1375d392bcd16ed604590d_icgraph">
<area shape="rect" title="Check for a new IDmbProvider." alt="" coords="1272,33,1541,87"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="953,40,1224,80"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="643,69,905,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af619caa031c183aa1aa5adbcf11a3434" title="Start the IWatchdog. A Task representing the running operation." alt="" coords="352,69,579,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="336,5,595,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd" title="Restarts the watchdog. A Task representing the running operation." alt="" coords="352,133,579,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,197,585,237"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3" title="Cancels pending graceful actions. A Task representing the running operation." alt="" coords="5,133,288,173"/>
</map>
</div>

</div>
</div>
<a id="a3ca371ec92c273cd6b3ab2f6931f8a65" name="a3ca371ec92c273cd6b3ab2f6931f8a65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ca371ec92c273cd6b3ab2f6931f8a65">&#9670;&#160;</a></span>InstanceRenamed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.InstanceRenamed </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>newInstanceName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called when the owning <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_instance.html">Instance</a> is renamed. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newInstanceName</td><td>The new <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_named_entity.html#a7e2f2eeddbc6315acbcfa00c54762183" title="The name of the entity represented by the NamedEntity.">Api.Models.NamedEntity.Name</a>.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_i_rename_notifyee.html#a69fed1472e47f53392237645d5d65d7a">Tgstation.Server.Host.Components.IRenameNotifyee</a>.</p>

<p>Implemented in <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#aea63863a921d33b97558500dab1b74e3">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog</a>.</p>

</div>
</div>
<a id="af619caa031c183aa1aa5adbcf11a3434" name="af619caa031c183aa1aa5adbcf11a3434"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af619caa031c183aa1aa5adbcf11a3434">&#9670;&#160;</a></span>Launch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Launch </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html" title="Runs and monitors the twin server controllers.">IWatchdog</a>. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#afa6b3f10617f13ae7af79317594020e3">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00315">315</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  316</span>        {</div>
<div class="line"><span class="lineno">  317</span>            <span class="keywordflow">if</span> (<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Offline)</div>
<div class="line"><span class="lineno">  318</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.WatchdogRunning);</div>
<div class="line"><span class="lineno">  319</span>            <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>, cancellationToken))</div>
<div class="line"><span class="lineno">  320</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4">LaunchNoLock</a>(<span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">null</span>, cancellationToken);</div>
<div class="line"><span class="lineno">  321</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_af5d1f2571cdce3431ab477a9c9c3e6f4"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock</a></div><div class="ttdeci">async Task LaunchNoLock(bool startMonitor, bool announce, bool announceFailure, ReattachInformation reattachInfo, CancellationToken cancellationToken)</div><div class="ttdoc">Launches the watchdog.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00489">WatchdogBase.cs:489</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00489">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00036">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00103">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af619caa031c183aa1aa5adbcf11a3434_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af619caa031c183aa1aa5adbcf11a3434_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af619caa031c183aa1aa5adbcf11a3434_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af619caa031c183aa1aa5adbcf11a3434_cgraph">
<area shape="rect" title="Start the IWatchdog. A Task representing the running operation." alt="" coords="5,580,232,620"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="280,465,543,505"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="1647,529,1837,569"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a61974ff4ef41775f690f61ee6fe113f2" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="591,121,864,161"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a73f31d67f3a7aad74b0e26e1949cb302" title="Starts all ISessionControllers." alt="" coords="604,323,851,363"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="592,387,863,427"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="1265,472,1551,512"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#acefbbc13736d330bb4214aaea995955c" title="Handle a given eventType ." alt="" coords="945,5,1184,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="1275,342,1541,397"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830" title="Get the active ISessionController." alt="" coords="1599,129,1885,169"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a736a0993a11c8e6c5a00682dac054205" title="Handles a watchdog health check." alt="" coords="919,243,1210,283"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0ddddb5064444b1786a360d85c3c3873" title="Handles the actions to take when the monitor has to &quot;wake up&quot;." alt="" coords="912,357,1217,397"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6d6672dfae1375d392bcd16ed604590d" title="Check for a new IDmbProvider." alt="" coords="930,70,1199,125"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="935,573,1194,613"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aebef451cedbed6fe5a4367fe035470a7" title="Clear any stored ReattachInformation. A Task representing the running operation." alt="" coords="1629,465,1855,505"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="1609,386,1875,441"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aa948dc00c200539206747c99b95986af" title="Clear any stored ReattachInformation." alt="" coords="1933,465,2163,505"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_collection.html#ad270ec18822a7a90d8fca9a75c23851a" title="Remove a given model &#160;from the the working set." alt="" coords="2211,465,2420,505"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad8489bee0d96bcaf87eba19adee17149" title="Attempt to create a process dump for DreamDaemon. A Task representing the running operation." alt="" coords="1285,251,1531,291"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e" title="Combines an array of strings into a path." alt="" coords="1658,321,1826,361"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a69aa1b9dbeb6af3744e568095c4376e7" title="Create a directory at path ." alt="" coords="1651,193,1833,233"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78" title="Retrieve the full path of the current working directory." alt="" coords="1658,257,1826,297"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#a6fe38a0d817315fc1bd52ffd47b9d3d5" title="Gets the latest CompileJob. The latest CompileJob." alt="" coords="1273,71,1543,111"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#aa5ae13811ef0862a54741653dc058783" title="Gets the next IDmbProvider. A new IDmbProvider." alt="" coords="1617,65,1867,105"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html#a866d0f61c2a2311e5fbe5d8de329df33" title="Create a Task that completes after a given timeSpan . A Task representing the running operation." alt="" coords="1317,587,1499,627"/>
</map>
</div>

</div>
</div>
<a id="af5d1f2571cdce3431ab477a9c9c3e6f4" name="af5d1f2571cdce3431ab477a9c9c3e6f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5d1f2571cdce3431ab477a9c9c3e6f4">&#9670;&#160;</a></span>LaunchNoLock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>startMonitor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>announce</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>announceFailure</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_reattach_information.html">ReattachInformation</a>&#160;</td>
          <td class="paramname"><em>reattachInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Launches the watchdog.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">startMonitor</td><td>If <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them.">MonitorLifetimes(CancellationToken)</a> should be started by this function.</td></tr>
    <tr><td class="paramname">announce</td><td>If the launch should be announced to chat by this function.</td></tr>
    <tr><td class="paramname">announceFailure</td><td>If launch failure should be announced to chat by this function.</td></tr>
    <tr><td class="paramname">reattachInfo</td><td>ReattachInformation to use, if any.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00489">489</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  495</span>        {</div>
<div class="line"><span class="lineno">  496</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Begin LaunchImplNoLock&quot;</span>);</div>
<div class="line"><span class="lineno">  497</span>            <span class="keywordflow">if</span> (startMonitor &amp;&amp; <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Offline)</div>
<div class="line"><span class="lineno">  498</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.WatchdogRunning);</div>
<div class="line"><span class="lineno">  499</span> </div>
<div class="line"><span class="lineno">  500</span>            <span class="keywordflow">if</span> (reattachInfo == <span class="keyword">null</span> &amp;&amp; !<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html">DmbFactory</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#a6072027691530ddea3454b05d1d6e322">DmbAvailable</a>)</div>
<div class="line"><span class="lineno">  501</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.WatchdogCompileJobCorrupted);</div>
<div class="line"><span class="lineno">  502</span> </div>
<div class="line"><span class="lineno">  503</span>            <span class="comment">// this is necessary, the monitor could be in it&#39;s sleep loop trying to restart, if so cancel THAT monitor and start our own with blackjack and hookers</span></div>
<div class="line"><span class="lineno">  504</span>            var eventTask = Task.CompletedTask;</div>
<div class="line"><span class="lineno">  505</span>            <span class="keywordflow">if</span> (announce)</div>
<div class="line"><span class="lineno">  506</span>            {</div>
<div class="line"><span class="lineno">  507</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">QueueWatchdogMessage</a>(</div>
<div class="line"><span class="lineno">  508</span>                    reattachInfo == <span class="keyword">null</span></div>
<div class="line"><span class="lineno">  509</span>                        ? <span class="stringliteral">&quot;Launching...&quot;</span></div>
<div class="line"><span class="lineno">  510</span>                        : <span class="stringliteral">&quot;Reattaching...&quot;</span>); <span class="comment">// simple announce</span></div>
<div class="line"><span class="lineno">  511</span>                <span class="keywordflow">if</span> (reattachInfo == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  512</span>                    eventTask = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a61974ff4ef41775f690f61ee6fe113f2">HandleEventImpl</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>.WatchdogLaunch, Enumerable.Empty&lt;<span class="keywordtype">string</span>&gt;(), <span class="keyword">false</span>, cancellationToken);</div>
<div class="line"><span class="lineno">  513</span>            }</div>
<div class="line"><span class="lineno">  514</span> </div>
<div class="line"><span class="lineno">  515</span>            <span class="comment">// since neither server is running, this is safe to do</span></div>
<div class="line"><span class="lineno">  516</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6548572ef5ab9d7b6b3aae8647a0a053">LastLaunchParameters</a> = <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">ActiveLaunchParameters</a>;</div>
<div class="line"><span class="lineno">  517</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae85241e9a900f49e703b7eda13c78564">healthChecksMissed</a> = 0;</div>
<div class="line"><span class="lineno">  518</span> </div>
<div class="line"><span class="lineno">  519</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  520</span>            {</div>
<div class="line"><span class="lineno">  521</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a73f31d67f3a7aad74b0e26e1949cb302">InitController</a>(eventTask, reattachInfo, cancellationToken);</div>
<div class="line"><span class="lineno">  522</span>            }</div>
<div class="line"><span class="lineno">  523</span>            <span class="keywordflow">catch</span> (OperationCanceledException ex)</div>
<div class="line"><span class="lineno">  524</span>            {</div>
<div class="line"><span class="lineno">  525</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(ex, <span class="stringliteral">&quot;Controller initialization cancelled!&quot;</span>);</div>
<div class="line"><span class="lineno">  526</span>                <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  527</span>            }</div>
<div class="line"><span class="lineno">  528</span>            <span class="keywordflow">catch</span> (Exception e)</div>
<div class="line"><span class="lineno">  529</span>            {</div>
<div class="line"><span class="lineno">  530</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogWarning(e, <span class="stringliteral">&quot;Failed to start watchdog!&quot;</span>);</div>
<div class="line"><span class="lineno">  531</span>                var originalChatTask = eventTask;</div>
<div class="line"><span class="lineno">  532</span>                async Task ChainEventTaskWithErrorMessage()</div>
<div class="line"><span class="lineno">  533</span>                {</div>
<div class="line"><span class="lineno">  534</span>                    await originalChatTask;</div>
<div class="line"><span class="lineno">  535</span>                    <span class="keywordflow">if</span> (announceFailure)</div>
<div class="line"><span class="lineno">  536</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">QueueWatchdogMessage</a>(<span class="stringliteral">&quot;Startup failed!&quot;</span>);</div>
<div class="line"><span class="lineno">  537</span>                }</div>
<div class="line"><span class="lineno">  538</span> </div>
<div class="line"><span class="lineno">  539</span>                eventTask = ChainEventTaskWithErrorMessage();</div>
<div class="line"><span class="lineno">  540</span>                <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  541</span>            }</div>
<div class="line"><span class="lineno">  542</span>            <span class="keywordflow">finally</span></div>
<div class="line"><span class="lineno">  543</span>            {</div>
<div class="line"><span class="lineno">  544</span>                <span class="comment">// finish the chat task that&#39;s in flight</span></div>
<div class="line"><span class="lineno">  545</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  546</span>                {</div>
<div class="line"><span class="lineno">  547</span>                    await eventTask;</div>
<div class="line"><span class="lineno">  548</span>                }</div>
<div class="line"><span class="lineno">  549</span>                <span class="keywordflow">catch</span> (OperationCanceledException ex)</div>
<div class="line"><span class="lineno">  550</span>                {</div>
<div class="line"><span class="lineno">  551</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(ex, <span class="stringliteral">&quot;Announcement task canceled!&quot;</span>);</div>
<div class="line"><span class="lineno">  552</span>                }</div>
<div class="line"><span class="lineno">  553</span>            }</div>
<div class="line"><span class="lineno">  554</span> </div>
<div class="line"><span class="lineno">  555</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogInformation(<span class="stringliteral">&quot;Controller(s) initialized successfully&quot;</span>);</div>
<div class="line"><span class="lineno">  556</span> </div>
<div class="line"><span class="lineno">  557</span>            <span class="keywordflow">if</span> (startMonitor)</div>
<div class="line"><span class="lineno">  558</span>            {</div>
<div class="line"><span class="lineno">  559</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a47a5f64148a117c561df7b0e7e1703e6">monitorCts</a> = <span class="keyword">new</span> CancellationTokenSource();</div>
<div class="line"><span class="lineno">  560</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abfb7590db69ab59a040c1ac91c671d6d">monitorTask</a> = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f">MonitorLifetimes</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a47a5f64148a117c561df7b0e7e1703e6">monitorCts</a>.Token);</div>
<div class="line"><span class="lineno">  561</span>            }</div>
<div class="line"><span class="lineno">  562</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory_html_a6072027691530ddea3454b05d1d6e322"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#a6072027691530ddea3454b05d1d6e322">Tgstation.Server.Host.Components.Deployment.DmbFactory.DmbAvailable</a></div><div class="ttdeci">bool DmbAvailable</div><div class="ttdoc">If LockNextDmb will succeed.</div><div class="ttdef"><b>Definition:</b> <a href="_dmb_factory_8cs_source.html#l00035">DmbFactory.cs:35</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a61974ff4ef41775f690f61ee6fe113f2"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a61974ff4ef41775f690f61ee6fe113f2">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleEventImpl</a></div><div class="ttdeci">async Task HandleEventImpl(EventType eventType, IEnumerable&lt; string &gt; parameters, bool relayToSession, CancellationToken cancellationToken)</div><div class="ttdoc">Handle a given eventType  without re-throwing errors.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00696">WatchdogBase.cs:696</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a6548572ef5ab9d7b6b3aae8647a0a053"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6548572ef5ab9d7b6b3aae8647a0a053">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LastLaunchParameters</a></div><div class="ttdeci">DreamDaemonLaunchParameters LastLaunchParameters</div><div class="ttdoc">The DreamDaemonLaunchParameters the active server is using.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00052">WatchdogBase.cs:52</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a73f31d67f3a7aad74b0e26e1949cb302"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a73f31d67f3a7aad74b0e26e1949cb302">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.InitController</a></div><div class="ttdeci">abstract Task InitController(Task eventTask, ReattachInformation reattachInfo, CancellationToken cancellationToken)</div><div class="ttdoc">Starts all ISessionControllers.</div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_adfec26f530228b80d384b86ee979ef2f"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes</a></div><div class="ttdeci">async Task MonitorLifetimes(CancellationToken cancellationToken)</div><div class="ttdoc">The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00785">WatchdogBase.cs:785</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_html_ac30c818717e92c8fb65f389adec739b7"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">Tgstation.Server.Host.Components.Events.EventType</a></div><div class="ttdeci">EventType</div><div class="ttdoc">Types of events. Mirror in tgs.dm.</div><div class="ttdef"><b>Definition:</b> <a href="_event_type_8cs_source.html#l00006">EventType.cs:7</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00049">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveLaunchParameters</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00078">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="_dmb_factory_8cs_source.html#l00035">Tgstation.Server.Host.Components.Deployment.DmbFactory.DmbAvailable</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00696">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleEventImpl()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00158">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.healthChecksMissed</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a73f31d67f3a7aad74b0e26e1949cb302">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.InitController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00052">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LastLaunchParameters</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00073">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00143">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorCts</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00785">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00148">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorTask</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">Tgstation.Server.Host.Components.Chat.IChatManager.QueueWatchdogMessage()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00036">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00315">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Launch()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00716">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorRestart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00337">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Restart()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00361">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StartAsync()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af5d1f2571cdce3431ab477a9c9c3e6f4_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af5d1f2571cdce3431ab477a9c9c3e6f4_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af5d1f2571cdce3431ab477a9c9c3e6f4_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af5d1f2571cdce3431ab477a9c9c3e6f4_cgraph">
<area shape="rect" title="Launches the watchdog." alt="" coords="5,357,268,397"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a61974ff4ef41775f690f61ee6fe113f2" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="316,124,589,164"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a73f31d67f3a7aad74b0e26e1949cb302" title="Starts all ISessionControllers." alt="" coords="329,293,576,333"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="317,357,588,397"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="991,523,1276,563"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#acefbbc13736d330bb4214aaea995955c" title="Handle a given eventType ." alt="" coords="671,5,909,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="1000,329,1267,383"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="1372,528,1563,568"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830" title="Get the active ISessionController." alt="" coords="1324,128,1611,168"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a736a0993a11c8e6c5a00682dac054205" title="Handles a watchdog health check." alt="" coords="645,236,935,276"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0ddddb5064444b1786a360d85c3c3873" title="Handles the actions to take when the monitor has to &quot;wake up&quot;." alt="" coords="637,300,943,340"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6d6672dfae1375d392bcd16ed604590d" title="Check for a new IDmbProvider." alt="" coords="655,70,925,125"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="661,415,919,455"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aebef451cedbed6fe5a4367fe035470a7" title="Clear any stored ReattachInformation. A Task representing the running operation." alt="" coords="1354,464,1581,504"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="1334,385,1601,439"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aa948dc00c200539206747c99b95986af" title="Clear any stored ReattachInformation." alt="" coords="1659,464,1888,504"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_collection.html#ad270ec18822a7a90d8fca9a75c23851a" title="Remove a given model &#160;from the the working set." alt="" coords="1936,464,2145,504"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad8489bee0d96bcaf87eba19adee17149" title="Attempt to create a process dump for DreamDaemon. A Task representing the running operation." alt="" coords="1010,251,1257,291"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e" title="Combines an array of strings into a path." alt="" coords="1383,256,1551,296"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a69aa1b9dbeb6af3744e568095c4376e7" title="Create a directory at path ." alt="" coords="1376,320,1559,360"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78" title="Retrieve the full path of the current working directory." alt="" coords="1383,192,1551,232"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#a6fe38a0d817315fc1bd52ffd47b9d3d5" title="Gets the latest CompileJob. The latest CompileJob." alt="" coords="998,68,1269,108"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#aa5ae13811ef0862a54741653dc058783" title="Gets the next IDmbProvider. A new IDmbProvider." alt="" coords="1343,64,1592,104"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html#a866d0f61c2a2311e5fbe5d8de329df33" title="Create a Task that completes after a given timeSpan . A Task representing the running operation." alt="" coords="1043,459,1224,499"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af5d1f2571cdce3431ab477a9c9c3e6f4_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af5d1f2571cdce3431ab477a9c9c3e6f4_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af5d1f2571cdce3431ab477a9c9c3e6f4_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_af5d1f2571cdce3431ab477a9c9c3e6f4_icgraph">
<area shape="rect" title="Launches the watchdog." alt="" coords="643,133,905,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af619caa031c183aa1aa5adbcf11a3434" title="Start the IWatchdog. A Task representing the running operation." alt="" coords="352,5,579,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="336,133,595,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd" title="Restarts the watchdog. A Task representing the running operation." alt="" coords="352,69,579,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,197,585,237"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="11,195,282,235"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3" title="Cancels pending graceful actions. A Task representing the running operation." alt="" coords="5,69,288,109"/>
</map>
</div>

</div>
</div>
<a id="adfec26f530228b80d384b86ee979ef2f" name="adfec26f530228b80d384b86ee979ef2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfec26f530228b80d384b86ee979ef2f">&#9670;&#160;</a></span>MonitorLifetimes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00785">785</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  786</span>        {</div>
<div class="line"><span class="lineno">  787</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Entered MonitorLifetimes&quot;</span>);</div>
<div class="line"><span class="lineno">  788</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Online;</div>
<div class="line"><span class="lineno">  789</span>            <span class="keyword">using </span>var cancellationTokenLoggingRegistration = cancellationToken.Register(() =&gt; <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Monitor cancellationToken triggered&quot;</span>));</div>
<div class="line"><span class="lineno">  790</span> </div>
<div class="line"><span class="lineno">  791</span>            <span class="comment">// this function is responsible for calling HandlerMonitorWakeup when necessary and manitaining the MonitorState</span></div>
<div class="line"><span class="lineno">  792</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  793</span>            {</div>
<div class="line"><span class="lineno">  794</span>                <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a> nextAction = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Continue;</div>
<div class="line"><span class="lineno">  795</span>                Task activeServerLifetime = <span class="keyword">null</span>,</div>
<div class="line"><span class="lineno">  796</span>                    activeServerReboot = <span class="keyword">null</span>,</div>
<div class="line"><span class="lineno">  797</span>                    activeServerStartup = <span class="keyword">null</span>,</div>
<div class="line"><span class="lineno">  798</span>                    serverPrimed = <span class="keyword">null</span>,</div>
<div class="line"><span class="lineno">  799</span>                    activeLaunchParametersChanged = <span class="keyword">null</span>,</div>
<div class="line"><span class="lineno">  800</span>                    newDmbAvailable = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  801</span>                <a class="code hl_interface" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller.html">ISessionController</a> lastController = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  802</span>                var ranInitialDmbCheck = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  803</span>                <span class="keywordflow">for</span> (ulong iteration = 1; nextAction != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Exit; ++iteration)</div>
<div class="line"><span class="lineno">  804</span>                    <span class="keyword">using</span> (LogContext.PushProperty(<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_serilog_context_helper.html">SerilogContextHelper</a>.<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_serilog_context_helper.html#a6db637890083eeb6ad07f64c109eca1e">WatchdogMonitorIterationContextProperty</a>, iteration))</div>
<div class="line"><span class="lineno">  805</span>                    {</div>
<div class="line"><span class="lineno">  806</span>                        var nextMonitorWakeupTcs = <span class="keyword">new</span> TaskCompletionSource();</div>
<div class="line"><span class="lineno">  807</span>                        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  808</span>                        {</div>
<div class="line"><span class="lineno">  809</span>                            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Iteration {iteration} of monitor loop&quot;</span>, iteration);</div>
<div class="line"><span class="lineno">  810</span>                            nextAction = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Continue;</div>
<div class="line"><span class="lineno">  811</span> </div>
<div class="line"><span class="lineno">  812</span>                            var controller = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">GetActiveController</a>();</div>
<div class="line"><span class="lineno">  813</span> </div>
<div class="line"><span class="lineno">  814</span>                            <span class="keywordtype">void</span> UpdateMonitoredTasks()</div>
<div class="line"><span class="lineno">  815</span>                            {</div>
<div class="line"><span class="lineno">  816</span>                                <span class="keyword">static</span> <span class="keywordtype">void</span> TryUpdateTask(ref Task oldTask, Func&lt;Task&gt; newTaskFactory)</div>
<div class="line"><span class="lineno">  817</span>                                {</div>
<div class="line"><span class="lineno">  818</span>                                    <span class="keywordflow">if</span> (oldTask?.IsCompleted == <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  819</span>                                        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  820</span> </div>
<div class="line"><span class="lineno">  821</span>                                    oldTask = newTaskFactory();</div>
<div class="line"><span class="lineno">  822</span>                                }</div>
<div class="line"><span class="lineno">  823</span> </div>
<div class="line"><span class="lineno">  824</span>                                controller.RebootGate = nextMonitorWakeupTcs.Task;</div>
<div class="line"><span class="lineno">  825</span>                                <span class="keywordflow">if</span> (lastController == controller)</div>
<div class="line"><span class="lineno">  826</span>                                {</div>
<div class="line"><span class="lineno">  827</span>                                    TryUpdateTask(ref activeServerLifetime, () =&gt; controller.Lifetime);</div>
<div class="line"><span class="lineno">  828</span>                                    TryUpdateTask(ref activeServerReboot, () =&gt; controller.OnReboot);</div>
<div class="line"><span class="lineno">  829</span>                                    TryUpdateTask(ref serverPrimed, () =&gt; controller.OnPrime);</div>
<div class="line"><span class="lineno">  830</span>                                    TryUpdateTask(ref activeServerStartup, () =&gt; controller.OnStartup);</div>
<div class="line"><span class="lineno">  831</span>                                }</div>
<div class="line"><span class="lineno">  832</span>                                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  833</span>                                {</div>
<div class="line"><span class="lineno">  834</span>                                    activeServerLifetime = controller.Lifetime;</div>
<div class="line"><span class="lineno">  835</span>                                    activeServerReboot = controller.OnReboot;</div>
<div class="line"><span class="lineno">  836</span>                                    serverPrimed = controller.OnPrime;</div>
<div class="line"><span class="lineno">  837</span>                                    activeServerStartup = controller.OnStartup;</div>
<div class="line"><span class="lineno">  838</span>                                    lastController = controller;</div>
<div class="line"><span class="lineno">  839</span>                                }</div>
<div class="line"><span class="lineno">  840</span> </div>
<div class="line"><span class="lineno">  841</span>                                TryUpdateTask(ref activeLaunchParametersChanged, () =&gt; <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9e101a4b3982c726c99c957acb919209">ActiveParametersUpdated</a>.Task);</div>
<div class="line"><span class="lineno">  842</span>                                TryUpdateTask(</div>
<div class="line"><span class="lineno">  843</span>                                    ref newDmbAvailable,</div>
<div class="line"><span class="lineno">  844</span>                                    () =&gt;</div>
<div class="line"><span class="lineno">  845</span>                                    {</div>
<div class="line"><span class="lineno">  846</span>                                        var result = ranInitialDmbCheck</div>
<div class="line"><span class="lineno">  847</span>                                            ? DmbFactory.OnNewerDmb</div>
<div class="line"><span class="lineno">  848</span>                                            : <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6d6672dfae1375d392bcd16ed604590d">InitialCheckDmbUpdated</a>(controller.CompileJob);</div>
<div class="line"><span class="lineno">  849</span>                                        ranInitialDmbCheck = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  850</span>                                        <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno">  851</span>                                    });</div>
<div class="line"><span class="lineno">  852</span>                            }</div>
<div class="line"><span class="lineno">  853</span> </div>
<div class="line"><span class="lineno">  854</span>                            UpdateMonitoredTasks();</div>
<div class="line"><span class="lineno">  855</span> </div>
<div class="line"><span class="lineno">  856</span>                            var healthCheckSeconds = <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4">ActiveLaunchParameters</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html#a9bfa02156238c84f1a7554ddc6439c5a">HealthCheckSeconds</a>.Value;</div>
<div class="line"><span class="lineno">  857</span>                            var healthCheck = healthCheckSeconds == 0</div>
<div class="line"><span class="lineno">  858</span>                                || !controller.DMApiAvailable</div>
<div class="line"><span class="lineno">  859</span>                                ? Extensions.TaskExtensions.InfiniteTask</div>
<div class="line"><span class="lineno">  860</span>                                : Task.Delay(</div>
<div class="line"><span class="lineno">  861</span>                                    TimeSpan.FromSeconds(healthCheckSeconds),</div>
<div class="line"><span class="lineno">  862</span>                                    cancellationToken);</div>
<div class="line"><span class="lineno">  863</span> </div>
<div class="line"><span class="lineno">  864</span>                            <span class="comment">// cancel waiting if requested</span></div>
<div class="line"><span class="lineno">  865</span>                            var toWaitOn = Task.WhenAny(</div>
<div class="line"><span class="lineno">  866</span>                                activeServerLifetime,</div>
<div class="line"><span class="lineno">  867</span>                                activeServerReboot,</div>
<div class="line"><span class="lineno">  868</span>                                activeServerStartup,</div>
<div class="line"><span class="lineno">  869</span>                                healthCheck,</div>
<div class="line"><span class="lineno">  870</span>                                newDmbAvailable,</div>
<div class="line"><span class="lineno">  871</span>                                activeLaunchParametersChanged,</div>
<div class="line"><span class="lineno">  872</span>                                serverPrimed);</div>
<div class="line"><span class="lineno">  873</span> </div>
<div class="line"><span class="lineno">  874</span>                            <span class="comment">// wait for something to happen</span></div>
<div class="line"><span class="lineno">  875</span>                            await toWaitOn.WaitAsync(cancellationToken);</div>
<div class="line"><span class="lineno">  876</span> </div>
<div class="line"><span class="lineno">  877</span>                            cancellationToken.ThrowIfCancellationRequested();</div>
<div class="line"><span class="lineno">  878</span>                            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Monitor activated&quot;</span>);</div>
<div class="line"><span class="lineno">  879</span> </div>
<div class="line"><span class="lineno">  880</span>                            <span class="comment">// always run HandleMonitorWakeup from the context of the semaphore lock</span></div>
<div class="line"><span class="lineno">  881</span>                            <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>, cancellationToken))</div>
<div class="line"><span class="lineno">  882</span>                            {</div>
<div class="line"><span class="lineno">  883</span>                                <span class="comment">// Set this sooner so chat sends don&#39;t hold us up</span></div>
<div class="line"><span class="lineno">  884</span>                                <span class="keywordflow">if</span> (activeServerLifetime.IsCompleted)</div>
<div class="line"><span class="lineno">  885</span>                                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Restoring;</div>
<div class="line"><span class="lineno">  886</span> </div>
<div class="line"><span class="lineno">  887</span>                                <span class="comment">// multiple things may have happened, handle them one at a time</span></div>
<div class="line"><span class="lineno">  888</span>                                <span class="keywordflow">for</span> (var moreActivationsToProcess = <span class="keyword">true</span>; moreActivationsToProcess &amp;&amp; (nextAction == MonitorAction.Continue || nextAction == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Skip);)</div>
<div class="line"><span class="lineno">  889</span>                                {</div>
<div class="line"><span class="lineno">  890</span>                                    <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a> activationReason = <span class="keywordflow">default</span>; <span class="comment">// this will always be assigned before being used</span></div>
<div class="line"><span class="lineno">  891</span> </div>
<div class="line"><span class="lineno">  892</span>                                    <span class="keywordtype">bool</span> CheckActivationReason(ref Task task, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a> testActivationReason)</div>
<div class="line"><span class="lineno">  893</span>                                    {</div>
<div class="line"><span class="lineno">  894</span>                                        var taskCompleted = task?.IsCompleted == <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  895</span>                                        task = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  896</span>                                        <span class="keywordflow">if</span> (nextAction == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Skip)</div>
<div class="line"><span class="lineno">  897</span>                                            nextAction = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Continue;</div>
<div class="line"><span class="lineno">  898</span>                                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (taskCompleted)</div>
<div class="line"><span class="lineno">  899</span>                                        {</div>
<div class="line"><span class="lineno">  900</span>                                            activationReason = testActivationReason;</div>
<div class="line"><span class="lineno">  901</span>                                            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  902</span>                                        }</div>
<div class="line"><span class="lineno">  903</span> </div>
<div class="line"><span class="lineno">  904</span>                                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  905</span>                                    }</div>
<div class="line"><span class="lineno">  906</span> </div>
<div class="line"><span class="lineno">  907</span>                                    <span class="comment">// process the tasks in this order and call HandlerMonitorWakup for each depending on the new monitorState</span></div>
<div class="line"><span class="lineno">  908</span>                                    var anyActivation = CheckActivationReason(ref activeServerLifetime, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a>.ActiveServerCrashed)</div>
<div class="line"><span class="lineno">  909</span>                                        || CheckActivationReason(ref activeServerReboot, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a>.ActiveServerRebooted)</div>
<div class="line"><span class="lineno">  910</span>                                        || CheckActivationReason(ref newDmbAvailable, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a>.NewDmbAvailable)</div>
<div class="line"><span class="lineno">  911</span>                                        || CheckActivationReason(ref activeLaunchParametersChanged, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a>.ActiveLaunchParametersUpdated)</div>
<div class="line"><span class="lineno">  912</span>                                        || CheckActivationReason(ref healthCheck, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a>.HealthCheck)</div>
<div class="line"><span class="lineno">  913</span>                                        || CheckActivationReason(ref serverPrimed, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a>.ActiveServerPrimed)</div>
<div class="line"><span class="lineno">  914</span>                                        || CheckActivationReason(ref activeServerStartup, <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a>.ActiveServerStartup);</div>
<div class="line"><span class="lineno">  915</span> </div>
<div class="line"><span class="lineno">  916</span>                                    UpdateMonitoredTasks();</div>
<div class="line"><span class="lineno">  917</span> </div>
<div class="line"><span class="lineno">  918</span>                                    <span class="keywordflow">if</span> (!anyActivation)</div>
<div class="line"><span class="lineno">  919</span>                                        moreActivationsToProcess = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  920</span>                                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  921</span>                                    {</div>
<div class="line"><span class="lineno">  922</span>                                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Reason: {activationReason}&quot;</span>, activationReason);</div>
<div class="line"><span class="lineno">  923</span>                                        <span class="keywordflow">if</span> (activationReason == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">MonitorActivationReason</a>.HealthCheck)</div>
<div class="line"><span class="lineno">  924</span>                                            nextAction = await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a736a0993a11c8e6c5a00682dac054205">HandleHealthCheck</a>(</div>
<div class="line"><span class="lineno">  925</span>                                                cancellationToken);</div>
<div class="line"><span class="lineno">  926</span>                                        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  927</span>                                            nextAction = await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0ddddb5064444b1786a360d85c3c3873">HandleMonitorWakeup</a>(</div>
<div class="line"><span class="lineno">  928</span>                                                activationReason,</div>
<div class="line"><span class="lineno">  929</span>                                                cancellationToken);</div>
<div class="line"><span class="lineno">  930</span>                                    }</div>
<div class="line"><span class="lineno">  931</span>                                }</div>
<div class="line"><span class="lineno">  932</span>                            }</div>
<div class="line"><span class="lineno">  933</span> </div>
<div class="line"><span class="lineno">  934</span>                            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Next monitor action is to {nextAction}&quot;</span>, nextAction);</div>
<div class="line"><span class="lineno">  935</span> </div>
<div class="line"><span class="lineno">  936</span>                            <span class="comment">// Restart if requested</span></div>
<div class="line"><span class="lineno">  937</span>                            <span class="keywordflow">if</span> (nextAction == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Restart)</div>
<div class="line"><span class="lineno">  938</span>                            {</div>
<div class="line"><span class="lineno">  939</span>                                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225">MonitorRestart</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  940</span>                                nextAction = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Continue;</div>
<div class="line"><span class="lineno">  941</span>                            }</div>
<div class="line"><span class="lineno">  942</span>                        }</div>
<div class="line"><span class="lineno">  943</span>                        <span class="keywordflow">catch</span> (Exception e) when (e is not OperationCanceledException)</div>
<div class="line"><span class="lineno">  944</span>                        {</div>
<div class="line"><span class="lineno">  945</span>                            <span class="comment">// really, this should NEVER happen</span></div>
<div class="line"><span class="lineno">  946</span>                            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogError(</div>
<div class="line"><span class="lineno">  947</span>                                e,</div>
<div class="line"><span class="lineno">  948</span>                                <span class="stringliteral">&quot;Monitor crashed! Iteration: {iteration}&quot;</span>,</div>
<div class="line"><span class="lineno">  949</span>                                iteration);</div>
<div class="line"><span class="lineno">  950</span> </div>
<div class="line"><span class="lineno">  951</span>                            var nextActionMessage = nextAction != MonitorAction.Exit</div>
<div class="line"><span class="lineno">  952</span>                                ? <span class="stringliteral">&quot;Recovering&quot;</span></div>
<div class="line"><span class="lineno">  953</span>                                : <span class="stringliteral">&quot;Shutting down&quot;</span>;</div>
<div class="line"><span class="lineno">  954</span>                            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">QueueWatchdogMessage</a>(</div>
<div class="line"><span class="lineno">  955</span>                                $<span class="stringliteral">&quot;Monitor crashed, this should NEVER happen! Please report this, full details in logs! {nextActionMessage}. Error: {e.Message}&quot;</span>);</div>
<div class="line"><span class="lineno">  956</span> </div>
<div class="line"><span class="lineno">  957</span>                            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5c39f385b06058f4699503b492d2b743">disposed</a>)</div>
<div class="line"><span class="lineno">  958</span>                                nextAction = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Exit;</div>
<div class="line"><span class="lineno">  959</span>                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nextAction != <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Exit)</div>
<div class="line"><span class="lineno">  960</span>                            {</div>
<div class="line"><span class="lineno">  961</span>                                <span class="keywordflow">if</span> (<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">GetActiveController</a>()?.Lifetime.IsCompleted != <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  962</span>                                    await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225">MonitorRestart</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  963</span>                                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  964</span>                                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogDebug(<span class="stringliteral">&quot;Server seems to be okay, not restarting&quot;</span>);</div>
<div class="line"><span class="lineno">  965</span>                                nextAction = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#a97c1a4a168451bd7e3be23c467aa2812">MonitorAction</a>.Continue;</div>
<div class="line"><span class="lineno">  966</span>                            }</div>
<div class="line"><span class="lineno">  967</span>                        }</div>
<div class="line"><span class="lineno">  968</span>                        <span class="keywordflow">finally</span></div>
<div class="line"><span class="lineno">  969</span>                        {</div>
<div class="line"><span class="lineno">  970</span>                            nextMonitorWakeupTcs.SetResult();</div>
<div class="line"><span class="lineno">  971</span>                        }</div>
<div class="line"><span class="lineno">  972</span>                    }</div>
<div class="line"><span class="lineno">  973</span>            }</div>
<div class="line"><span class="lineno">  974</span>            <span class="keywordflow">catch</span> (OperationCanceledException)</div>
<div class="line"><span class="lineno">  975</span>            {</div>
<div class="line"><span class="lineno">  976</span>                <span class="comment">// stop signal</span></div>
<div class="line"><span class="lineno">  977</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogDebug(<span class="stringliteral">&quot;Monitor cancelled&quot;</span>);</div>
<div class="line"><span class="lineno">  978</span> </div>
<div class="line"><span class="lineno">  979</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">releaseServers</a>)</div>
<div class="line"><span class="lineno">  980</span>                {</div>
<div class="line"><span class="lineno">  981</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Detaching server...&quot;</span>);</div>
<div class="line"><span class="lineno">  982</span>                    var controller = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">GetActiveController</a>();</div>
<div class="line"><span class="lineno">  983</span>                    await controller.Release();</div>
<div class="line"><span class="lineno">  984</span>                }</div>
<div class="line"><span class="lineno">  985</span>            }</div>
<div class="line"><span class="lineno">  986</span> </div>
<div class="line"><span class="lineno">  987</span>            <span class="comment">// DCT: Operation must always run</span></div>
<div class="line"><span class="lineno">  988</span>            await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5">DisposeAndNullControllers</a>(CancellationToken.None);</div>
<div class="line"><span class="lineno">  989</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Offline;</div>
<div class="line"><span class="lineno">  990</span> </div>
<div class="line"><span class="lineno">  991</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Monitor exiting...&quot;</span>);</div>
<div class="line"><span class="lineno">  992</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters_html_a9bfa02156238c84f1a7554ddc6439c5a"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html#a9bfa02156238c84f1a7554ddc6439c5a">Tgstation.Server.Api.Models.Internal.DreamDaemonLaunchParameters.HealthCheckSeconds</a></div><div class="ttdeci">uint? HealthCheckSeconds</div><div class="ttdoc">The number of seconds between each watchdog health check. 0 disables.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_daemon_launch_parameters_8cs_source.html#l00062">DreamDaemonLaunchParameters.cs:62</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a0ddddb5064444b1786a360d85c3c3873"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0ddddb5064444b1786a360d85c3c3873">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleMonitorWakeup</a></div><div class="ttdeci">abstract Task&lt; MonitorAction &gt; HandleMonitorWakeup(MonitorActivationReason activationReason, CancellationToken cancellationToken)</div><div class="ttdoc">Handles the actions to take when the monitor has to &quot;wake up&quot;.</div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a24fd29d12e91f659010d483228be1225"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorRestart</a></div><div class="ttdeci">async Task MonitorRestart(CancellationToken cancellationToken)</div><div class="ttdoc">Attempt to restart the monitor from scratch.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00716">WatchdogBase.cs:716</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a6d6672dfae1375d392bcd16ed604590d"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6d6672dfae1375d392bcd16ed604590d">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.InitialCheckDmbUpdated</a></div><div class="ttdeci">Task InitialCheckDmbUpdated(CompileJob currentCompileJob)</div><div class="ttdoc">Check for a new IDmbProvider.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00762">WatchdogBase.cs:762</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a736a0993a11c8e6c5a00682dac054205"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a736a0993a11c8e6c5a00682dac054205">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleHealthCheck</a></div><div class="ttdeci">async Task&lt; MonitorAction &gt; HandleHealthCheck(CancellationToken cancellationToken)</div><div class="ttdoc">Handles a watchdog health check.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l01043">WatchdogBase.cs:1043</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_utils_1_1_serilog_context_helper_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_serilog_context_helper.html">Tgstation.Server.Host.Utils.SerilogContextHelper</a></div><div class="ttdoc">Helpers for manipulating the Serilog.Context.LogContext.</div><div class="ttdef"><b>Definition:</b> <a href="_serilog_context_helper_8cs_source.html#l00006">SerilogContextHelper.cs:7</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_utils_1_1_serilog_context_helper_html_a6db637890083eeb6ad07f64c109eca1e"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_serilog_context_helper.html#a6db637890083eeb6ad07f64c109eca1e">Tgstation.Server.Host.Utils.SerilogContextHelper.WatchdogMonitorIterationContextProperty</a></div><div class="ttdeci">const string WatchdogMonitorIterationContextProperty</div><div class="ttdoc">The Serilog.Context.LogContext property name for the ID of the watchdog monitor iteration currently b...</div><div class="ttdef"><b>Definition:</b> <a href="_serilog_context_helper_8cs_source.html#l00031">SerilogContextHelper.cs:31</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_html"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller.html">Tgstation.Server.Host.Components.Session.ISessionController</a></div><div class="ttdoc">Handles communication with a DreamDaemon IProcess.</div><div class="ttdef"><b>Definition:</b> <a href="_i_session_controller_8cs_source.html#l00015">ISessionController.cs:16</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_html_acb2ccc2dc05d01ec3a6448d3d57155c9"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog.html#acb2ccc2dc05d01ec3a6448d3d57155c9">Tgstation.Server.Host.Components.Watchdog.MonitorActivationReason</a></div><div class="ttdeci">MonitorActivationReason</div><div class="ttdoc">Reasons for the monitor to wake up.</div><div class="ttdef"><b>Definition:</b> <a href="_monitor_activation_reason_8cs_source.html#l00006">MonitorActivationReason.cs:7</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00049">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveLaunchParameters</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00063">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveParametersUpdated</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00078">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00633">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00168">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.disposed</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l01043">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleHealthCheck()</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0ddddb5064444b1786a360d85c3c3873">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleMonitorWakeup()</a>, <a class="el" href="_dream_daemon_launch_parameters_8cs_source.html#l00062">Tgstation.Server.Api.Models.Internal.DreamDaemonLaunchParameters.HealthCheckSeconds</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00762">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.InitialCheckDmbUpdated()</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00073">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00716">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorRestart()</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">Tgstation.Server.Host.Components.Chat.IChatManager.QueueWatchdogMessage()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00163">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.releaseServers</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00036">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00103">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>, and <a class="el" href="_serilog_context_helper_8cs_source.html#l00031">Tgstation.Server.Host.Utils.SerilogContextHelper.WatchdogMonitorIterationContextProperty</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00489">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_adfec26f530228b80d384b86ee979ef2f_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_adfec26f530228b80d384b86ee979ef2f_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_adfec26f530228b80d384b86ee979ef2f_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_adfec26f530228b80d384b86ee979ef2f_cgraph">
<area shape="rect" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="5,471,276,511"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="679,246,946,301"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="1044,405,1235,445"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830" title="Get the active ISessionController." alt="" coords="996,5,1283,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a736a0993a11c8e6c5a00682dac054205" title="Handles a watchdog health check." alt="" coords="331,253,622,293"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="997,499,1282,539"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0ddddb5064444b1786a360d85c3c3873" title="Handles the actions to take when the monitor has to &quot;wake up&quot;." alt="" coords="324,693,629,733"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6d6672dfae1375d392bcd16ed604590d" title="Check for a new IDmbProvider." alt="" coords="342,758,611,813"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="347,471,606,511"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aebef451cedbed6fe5a4367fe035470a7" title="Clear any stored ReattachInformation. A Task representing the running operation." alt="" coords="1026,341,1253,381"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="1006,262,1273,317"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aa948dc00c200539206747c99b95986af" title="Clear any stored ReattachInformation." alt="" coords="1335,341,1565,381"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_collection.html#ad270ec18822a7a90d8fca9a75c23851a" title="Remove a given model &#160;from the the working set." alt="" coords="1617,341,1827,381"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad8489bee0d96bcaf87eba19adee17149" title="Attempt to create a process dump for DreamDaemon. A Task representing the running operation." alt="" coords="689,133,936,173"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e" title="Combines an array of strings into a path." alt="" coords="1055,69,1223,109"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a69aa1b9dbeb6af3744e568095c4376e7" title="Create a directory at path ." alt="" coords="1048,133,1231,173"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78" title="Retrieve the full path of the current working directory." alt="" coords="1055,197,1223,237"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#a6fe38a0d817315fc1bd52ffd47b9d3d5" title="Gets the latest CompileJob. The latest CompileJob." alt="" coords="677,765,948,805"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#aa5ae13811ef0862a54741653dc058783" title="Gets the next IDmbProvider. A new IDmbProvider." alt="" coords="1015,765,1264,805"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html#a866d0f61c2a2311e5fbe5d8de329df33" title="Create a Task that completes after a given timeSpan . A Task representing the running operation." alt="" coords="722,528,903,568"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="681,643,944,683"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a61974ff4ef41775f690f61ee6fe113f2" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="1003,608,1276,648"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a73f31d67f3a7aad74b0e26e1949cb302" title="Starts all ISessionControllers." alt="" coords="1016,672,1263,712"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#acefbbc13736d330bb4214aaea995955c" title="Handle a given eventType ." alt="" coords="1331,608,1569,648"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_adfec26f530228b80d384b86ee979ef2f_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_adfec26f530228b80d384b86ee979ef2f_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_adfec26f530228b80d384b86ee979ef2f_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_adfec26f530228b80d384b86ee979ef2f_icgraph">
<area shape="rect" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="953,40,1224,80"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="643,69,905,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af619caa031c183aa1aa5adbcf11a3434" title="Start the IWatchdog. A Task representing the running operation." alt="" coords="352,69,579,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="336,5,595,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd" title="Restarts the watchdog. A Task representing the running operation." alt="" coords="352,133,579,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="346,197,585,237"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3" title="Cancels pending graceful actions. A Task representing the running operation." alt="" coords="5,133,288,173"/>
</map>
</div>

</div>
</div>
<a id="a24fd29d12e91f659010d483228be1225" name="a24fd29d12e91f659010d483228be1225"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24fd29d12e91f659010d483228be1225">&#9670;&#160;</a></span>MonitorRestart()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorRestart </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Attempt to restart the monitor from scratch.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00716">716</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  717</span>        {</div>
<div class="line"><span class="lineno">  718</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Monitor restart!&quot;</span>);</div>
<div class="line"><span class="lineno">  719</span> </div>
<div class="line"><span class="lineno">  720</span>            await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5">DisposeAndNullControllers</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  721</span> </div>
<div class="line"><span class="lineno">  722</span>            <span class="keywordflow">for</span> (var retryAttempts = 1; ; ++retryAttempts)</div>
<div class="line"><span class="lineno">  723</span>            {</div>
<div class="line"><span class="lineno">  724</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Restoring;</div>
<div class="line"><span class="lineno">  725</span>                Exception launchException;</div>
<div class="line"><span class="lineno">  726</span>                <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>, cancellationToken))</div>
<div class="line"><span class="lineno">  727</span>                    <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  728</span>                    {</div>
<div class="line"><span class="lineno">  729</span>                        <span class="comment">// use LaunchImplNoLock without announcements or restarting the monitor</span></div>
<div class="line"><span class="lineno">  730</span>                        await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4">LaunchNoLock</a>(<span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">null</span>, cancellationToken);</div>
<div class="line"><span class="lineno">  731</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Online;</div>
<div class="line"><span class="lineno">  732</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogDebug(<span class="stringliteral">&quot;Relaunch successful, resuming monitor...&quot;</span>);</div>
<div class="line"><span class="lineno">  733</span>                        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  734</span>                    }</div>
<div class="line"><span class="lineno">  735</span>                    <span class="keywordflow">catch</span> (Exception e) when (e is not OperationCanceledException)</div>
<div class="line"><span class="lineno">  736</span>                    {</div>
<div class="line"><span class="lineno">  737</span>                        launchException = e;</div>
<div class="line"><span class="lineno">  738</span>                    }</div>
<div class="line"><span class="lineno">  739</span> </div>
<div class="line"><span class="lineno">  740</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogWarning(launchException, <span class="stringliteral">&quot;Failed to automatically restart the watchdog! Attempt: {attemptNumber}&quot;</span>, retryAttempts);</div>
<div class="line"><span class="lineno">  741</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.DelayedRestart;</div>
<div class="line"><span class="lineno">  742</span> </div>
<div class="line"><span class="lineno">  743</span>                var retryDelay = Math.Min(</div>
<div class="line"><span class="lineno">  744</span>                    Convert.ToInt32(</div>
<div class="line"><span class="lineno">  745</span>                        Math.Pow(2, retryAttempts)),</div>
<div class="line"><span class="lineno">  746</span>                    TimeSpan.FromHours(1).TotalSeconds); <span class="comment">// max of one hour, increasing by a power of 2 each time</span></div>
<div class="line"><span class="lineno">  747</span> </div>
<div class="line"><span class="lineno">  748</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">QueueWatchdogMessage</a>(</div>
<div class="line"><span class="lineno">  749</span>                    $<span class="stringliteral">&quot;Failed to restart (Attempt: {retryAttempts}), retrying in {retryDelay}s...&quot;</span>);</div>
<div class="line"><span class="lineno">  750</span> </div>
<div class="line"><span class="lineno">  751</span>                await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html">AsyncDelayer</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html#a866d0f61c2a2311e5fbe5d8de329df33">Delay</a>(</div>
<div class="line"><span class="lineno">  752</span>                    TimeSpan.FromSeconds(retryDelay),</div>
<div class="line"><span class="lineno">  753</span>                    cancellationToken);</div>
<div class="line"><span class="lineno">  754</span>            }</div>
<div class="line"><span class="lineno">  755</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer_html_a866d0f61c2a2311e5fbe5d8de329df33"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html#a866d0f61c2a2311e5fbe5d8de329df33">Tgstation.Server.Host.Utils.AsyncDelayer.Delay</a></div><div class="ttdeci">Task Delay(TimeSpan timeSpan, CancellationToken cancellationToken)</div><div class="ttdoc">Create a Task that completes after a given timeSpan . A Task representing the running operation.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00078">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html#a866d0f61c2a2311e5fbe5d8de329df33">Tgstation.Server.Host.Utils.AsyncDelayer.Delay()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00633">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00489">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00073">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">Tgstation.Server.Host.Components.Chat.IChatManager.QueueWatchdogMessage()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00036">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00103">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00785">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a24fd29d12e91f659010d483228be1225_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a24fd29d12e91f659010d483228be1225_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a24fd29d12e91f659010d483228be1225_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a24fd29d12e91f659010d483228be1225_cgraph">
<area shape="rect" title="Attempt to restart the monitor from scratch." alt="" coords="5,205,264,245"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html#a866d0f61c2a2311e5fbe5d8de329df33" title="Create a Task that completes after a given timeSpan . A Task representing the running operation." alt="" coords="353,5,534,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="1307,218,1573,273"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="1679,113,1869,153"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="312,456,575,496"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="1297,572,1583,612"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aebef451cedbed6fe5a4367fe035470a7" title="Clear any stored ReattachInformation. A Task representing the running operation." alt="" coords="1661,261,1887,301"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="1641,182,1907,237"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aa948dc00c200539206747c99b95986af" title="Clear any stored ReattachInformation." alt="" coords="1965,261,2195,301"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_collection.html#ad270ec18822a7a90d8fca9a75c23851a" title="Remove a given model &#160;from the the working set." alt="" coords="2243,261,2452,301"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a61974ff4ef41775f690f61ee6fe113f2" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="623,632,896,672"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a73f31d67f3a7aad74b0e26e1949cb302" title="Starts all ISessionControllers." alt="" coords="636,456,883,496"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="624,329,895,369"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#acefbbc13736d330bb4214aaea995955c" title="Handle a given eventType ." alt="" coords="977,632,1216,672"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830" title="Get the active ISessionController." alt="" coords="1631,329,1917,369"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a736a0993a11c8e6c5a00682dac054205" title="Handles a watchdog health check." alt="" coords="951,387,1242,427"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0ddddb5064444b1786a360d85c3c3873" title="Handles the actions to take when the monitor has to &quot;wake up&quot;." alt="" coords="944,221,1249,261"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6d6672dfae1375d392bcd16ed604590d" title="Check for a new IDmbProvider." alt="" coords="962,451,1231,506"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad8489bee0d96bcaf87eba19adee17149" title="Attempt to create a process dump for DreamDaemon. A Task representing the running operation." alt="" coords="1317,437,1563,477"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e" title="Combines an array of strings into a path." alt="" coords="1690,457,1858,497"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a69aa1b9dbeb6af3744e568095c4376e7" title="Create a directory at path ." alt="" coords="1683,521,1865,561"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78" title="Retrieve the full path of the current working directory." alt="" coords="1690,393,1858,433"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#a6fe38a0d817315fc1bd52ffd47b9d3d5" title="Gets the latest CompileJob. The latest CompileJob." alt="" coords="1305,504,1575,544"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#aa5ae13811ef0862a54741653dc058783" title="Gets the next IDmbProvider. A new IDmbProvider." alt="" coords="1649,585,1899,625"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a24fd29d12e91f659010d483228be1225_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a24fd29d12e91f659010d483228be1225_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a24fd29d12e91f659010d483228be1225_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a24fd29d12e91f659010d483228be1225_icgraph">
<area shape="rect" title="Attempt to restart the monitor from scratch." alt="" coords="1252,69,1511,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="933,40,1204,80"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="623,69,885,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af619caa031c183aa1aa5adbcf11a3434" title="Start the IWatchdog. A Task representing the running operation." alt="" coords="342,5,569,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd" title="Restarts the watchdog. A Task representing the running operation." alt="" coords="342,69,569,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd" title=" " alt="" coords="336,133,575,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3" title="Cancels pending graceful actions. A Task representing the running operation." alt="" coords="5,69,288,109"/>
</map>
</div>

</div>
</div>
<a id="a2a1ca4d25ec02eb53ddbcb36088331a1" name="a2a1ca4d25ec02eb53ddbcb36088331a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a1ca4d25ec02eb53ddbcb36088331a1">&#9670;&#160;</a></span>ReattachFailure()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ReattachFailure </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Call from <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a73f31d67f3a7aad74b0e26e1949cb302" title="Starts all ISessionControllers.">InitController(Task, ReattachInformation, CancellationToken)</a> when a reattach operation fails to attempt a fresh start.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00610">610</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  611</span>        {</div>
<div class="line"><span class="lineno">  612</span>            <span class="comment">// we lost the server, just restart entirely</span></div>
<div class="line"><span class="lineno">  613</span>            <span class="comment">// DCT: Operation must always run</span></div>
<div class="line"><span class="lineno">  614</span>            await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5">DisposeAndNullControllers</a>(CancellationToken.None);</div>
<div class="line"><span class="lineno">  615</span>            <span class="keyword">const</span> <span class="keywordtype">string</span> FailReattachMessage = <span class="stringliteral">&quot;Unable to properly reattach to server! Restarting watchdog...&quot;</span>;</div>
<div class="line"><span class="lineno">  616</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogWarning(FailReattachMessage);</div>
<div class="line"><span class="lineno">  617</span> </div>
<div class="line"><span class="lineno">  618</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">QueueWatchdogMessage</a>(FailReattachMessage);</div>
<div class="line"><span class="lineno">  619</span>            await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a73f31d67f3a7aad74b0e26e1949cb302">InitController</a>(Task.CompletedTask, <span class="keyword">null</span>, cancellationToken);</div>
<div class="line"><span class="lineno">  620</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00078">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00633">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers()</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a73f31d67f3a7aad74b0e26e1949cb302">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.InitController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00073">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, and <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">Tgstation.Server.Host.Components.Chat.IChatManager.QueueWatchdogMessage()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_basic_watchdog_8cs_source.html#l00205">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.InitController()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2a1ca4d25ec02eb53ddbcb36088331a1_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2a1ca4d25ec02eb53ddbcb36088331a1_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2a1ca4d25ec02eb53ddbcb36088331a1_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2a1ca4d25ec02eb53ddbcb36088331a1_cgraph">
<area shape="rect" title="Call from InitController(Task, ReattachInformation, CancellationToken) when a reattach operation fail..." alt="" coords="5,149,271,189"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="328,70,595,125"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a73f31d67f3a7aad74b0e26e1949cb302" title="Starts all ISessionControllers." alt="" coords="338,149,585,189"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="319,213,604,253"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aebef451cedbed6fe5a4367fe035470a7" title="Clear any stored ReattachInformation. A Task representing the running operation." alt="" coords="672,5,899,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="652,70,919,125"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="690,149,881,189"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aa948dc00c200539206747c99b95986af" title="Clear any stored ReattachInformation." alt="" coords="967,5,1196,45"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_collection.html#ad270ec18822a7a90d8fca9a75c23851a" title="Remove a given model &#160;from the the working set." alt="" coords="1244,5,1453,45"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2a1ca4d25ec02eb53ddbcb36088331a1_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2a1ca4d25ec02eb53ddbcb36088331a1_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2a1ca4d25ec02eb53ddbcb36088331a1_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a2a1ca4d25ec02eb53ddbcb36088331a1_icgraph">
<area shape="rect" title="Call from InitController(Task, ReattachInformation, CancellationToken) when a reattach operation fail..." alt="" coords="304,5,569,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#ad6a174232e66f5070f33b14e2cf15d48" title="Starts all ISessionControllers. A Task representing the running operation." alt="" coords="5,5,256,45"/>
</map>
</div>

</div>
</div>
<a id="aaf696fd100732f5b9eb8900e81895bf0" name="aaf696fd100732f5b9eb8900e81895bf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf696fd100732f5b9eb8900e81895bf0">&#9670;&#160;</a></span>ResetRebootState()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ResetRebootState </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cancels pending graceful actions. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a2859725d1805d6655be14566f9edcf00">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p>Reimplemented in <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00324">324</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  325</span>        {</div>
<div class="line"><span class="lineno">  326</span>            <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>, cancellationToken))</div>
<div class="line"><span class="lineno">  327</span>            {</div>
<div class="line"><span class="lineno">  328</span>                <span class="keywordflow">if</span> (<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Offline)</div>
<div class="line"><span class="lineno">  329</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  330</span>                var toClear = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">GetActiveController</a>();</div>
<div class="line"><span class="lineno">  331</span>                <span class="keywordflow">if</span> (toClear != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  332</span>                    await toClear.SetRebootState(Session.RebootState.Normal, cancellationToken);</div>
<div class="line"><span class="lineno">  333</span>            }</div>
<div class="line"><span class="lineno">  334</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController()</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00036">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00103">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_aaf696fd100732f5b9eb8900e81895bf0_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_aaf696fd100732f5b9eb8900e81895bf0_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_aaf696fd100732f5b9eb8900e81895bf0_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_aaf696fd100732f5b9eb8900e81895bf0_cgraph">
<area shape="rect" title="Cancels pending graceful actions. A Task representing the running operation." alt="" coords="5,37,285,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830" title="Get the active ISessionController." alt="" coords="333,5,620,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="381,69,572,109"/>
</map>
</div>

</div>
</div>
<a id="a39d65944835fca058d4a4be46eaf81bd" name="a39d65944835fca058d4a4be46eaf81bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39d65944835fca058d4a4be46eaf81bd">&#9670;&#160;</a></span>Restart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Restart </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>graceful</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Restarts the watchdog. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">graceful</td><td>If <code>true</code> the restart will be delayed until a reboot is detected in the active server's DMAPI and this function will retrun immediately.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a0e80e3751764c584151e51f4395efbf5">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00337">337</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  338</span>        {</div>
<div class="line"><span class="lineno">  339</span>            <span class="keywordflow">if</span> (<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Offline)</div>
<div class="line"><span class="lineno">  340</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.WatchdogNotRunning);</div>
<div class="line"><span class="lineno">  341</span> </div>
<div class="line"><span class="lineno">  342</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Begin Restart. Graceful: {gracefulFlag}&quot;</span>, graceful);</div>
<div class="line"><span class="lineno">  343</span>            <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>, cancellationToken))</div>
<div class="line"><span class="lineno">  344</span>            {</div>
<div class="line"><span class="lineno">  345</span>                <span class="keywordflow">if</span> (!graceful)</div>
<div class="line"><span class="lineno">  346</span>                {</div>
<div class="line"><span class="lineno">  347</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">QueueWatchdogMessage</a>(<span class="stringliteral">&quot;Manual restart triggered...&quot;</span>);</div>
<div class="line"><span class="lineno">  348</span>                    await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6845304123ed975aec4de3dc79bf8551">TerminateNoLock</a>(<span class="keyword">false</span>, <span class="keyword">false</span>, cancellationToken);</div>
<div class="line"><span class="lineno">  349</span>                    await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4">LaunchNoLock</a>(<span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="keyword">null</span>, cancellationToken);</div>
<div class="line"><span class="lineno">  350</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  351</span>                }</div>
<div class="line"><span class="lineno">  352</span> </div>
<div class="line"><span class="lineno">  353</span>                var toReboot = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">GetActiveController</a>();</div>
<div class="line"><span class="lineno">  354</span>                <span class="keywordflow">if</span> (toReboot != <span class="keyword">null</span></div>
<div class="line"><span class="lineno">  355</span>                    &amp;&amp; !await toReboot.SetRebootState(Session.RebootState.Restart, cancellationToken))</div>
<div class="line"><span class="lineno">  356</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogWarning(<span class="stringliteral">&quot;Unable to send reboot state change event!&quot;</span>);</div>
<div class="line"><span class="lineno">  357</span>            }</div>
<div class="line"><span class="lineno">  358</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_a6845304123ed975aec4de3dc79bf8551"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6845304123ed975aec4de3dc79bf8551">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock</a></div><div class="ttdeci">async Task TerminateNoLock(bool graceful, bool announce, CancellationToken cancellationToken)</div><div class="ttdoc">Implementation of Terminate(bool, CancellationToken). Does not lock synchronizationSemaphore.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l01002">WatchdogBase.cs:1002</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00078">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00489">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00073">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">Tgstation.Server.Host.Components.Chat.IChatManager.QueueWatchdogMessage()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00036">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00103">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l01002">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_basic_watchdog_8cs_source.html#l00094">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.ResetRebootState()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a39d65944835fca058d4a4be46eaf81bd_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a39d65944835fca058d4a4be46eaf81bd_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a39d65944835fca058d4a4be46eaf81bd_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a39d65944835fca058d4a4be46eaf81bd_cgraph">
<area shape="rect" title="Restarts the watchdog. A Task representing the running operation." alt="" coords="5,616,232,656"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830" title="Get the active ISessionController." alt="" coords="1615,436,1901,476"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="288,529,551,569"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="1663,36,1853,76"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="1281,553,1567,593"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6845304123ed975aec4de3dc79bf8551" title="Implementation of Terminate(bool, CancellationToken). Does not lock synchronizationSemaphore." alt="" coords="280,731,559,771"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a61974ff4ef41775f690f61ee6fe113f2" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="607,673,880,713"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a73f31d67f3a7aad74b0e26e1949cb302" title="Starts all ISessionControllers." alt="" coords="620,559,867,599"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="608,320,879,360"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#acefbbc13736d330bb4214aaea995955c" title="Handle a given eventType ." alt="" coords="961,673,1200,713"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="1291,209,1557,263"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a736a0993a11c8e6c5a00682dac054205" title="Handles a watchdog health check." alt="" coords="935,263,1226,303"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0ddddb5064444b1786a360d85c3c3873" title="Handles the actions to take when the monitor has to &quot;wake up&quot;." alt="" coords="928,377,1233,417"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6d6672dfae1375d392bcd16ed604590d" title="Check for a new IDmbProvider." alt="" coords="946,442,1215,497"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="951,93,1210,133"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aebef451cedbed6fe5a4367fe035470a7" title="Clear any stored ReattachInformation. A Task representing the running operation." alt="" coords="1645,100,1871,140"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="1625,165,1891,219"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aa948dc00c200539206747c99b95986af" title="Clear any stored ReattachInformation." alt="" coords="1949,100,2179,140"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_collection.html#ad270ec18822a7a90d8fca9a75c23851a" title="Remove a given model &#160;from the the working set." alt="" coords="2227,100,2436,140"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad8489bee0d96bcaf87eba19adee17149" title="Attempt to create a process dump for DreamDaemon. A Task representing the running operation." alt="" coords="1301,288,1547,328"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e" title="Combines an array of strings into a path." alt="" coords="1674,372,1842,412"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a69aa1b9dbeb6af3744e568095c4376e7" title="Create a directory at path ." alt="" coords="1667,244,1849,284"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78" title="Retrieve the full path of the current working directory." alt="" coords="1674,308,1842,348"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#a6fe38a0d817315fc1bd52ffd47b9d3d5" title="Gets the latest CompileJob. The latest CompileJob." alt="" coords="1289,476,1559,516"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#aa5ae13811ef0862a54741653dc058783" title="Gets the next IDmbProvider. A new IDmbProvider." alt="" coords="1633,500,1883,540"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html#a866d0f61c2a2311e5fbe5d8de329df33" title="Create a Task that completes after a given timeSpan . A Task representing the running operation." alt="" coords="1333,93,1515,133"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab4c51b6e88cc02dfa78070f5870b3b30" title="Stops MonitorLifetimes(CancellationToken). Doesn&#39;t kill the servers." alt="" coords="621,788,865,828"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a39d65944835fca058d4a4be46eaf81bd_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a39d65944835fca058d4a4be46eaf81bd_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a39d65944835fca058d4a4be46eaf81bd_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a39d65944835fca058d4a4be46eaf81bd_icgraph">
<area shape="rect" title="Restarts the watchdog. A Task representing the running operation." alt="" coords="336,5,563,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3" title="Cancels pending graceful actions. A Task representing the running operation." alt="" coords="5,5,288,45"/>
</map>
</div>

</div>
</div>
<a id="ae30d4b582b04eb7c3ef3c5d848429bbd" name="ae30d4b582b04eb7c3ef3c5d848429bbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae30d4b582b04eb7c3ef3c5d848429bbd">&#9670;&#160;</a></span>StartAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StartAsync </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00361">361</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  362</span>        {</div>
<div class="line"><span class="lineno">  363</span>            var reattachInfo = await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html">SessionPersistor</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#a1e73c7faa5f961369020355979f55ada">Load</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  364</span>            var reattaching = reattachInfo != <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  365</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a410f168d84f80c138450fb42f222ba01">autoStart</a> &amp;&amp; !reattaching)</div>
<div class="line"><span class="lineno">  366</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  367</span> </div>
<div class="line"><span class="lineno">  368</span>            var job = <span class="keyword">new</span> Models.Job</div>
<div class="line"><span class="lineno">  369</span>            {</div>
<div class="line"><span class="lineno">  370</span>                <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Instance</a> = <span class="keyword">new</span> Models.Instance</div>
<div class="line"><span class="lineno">  371</span>                {</div>
<div class="line"><span class="lineno">  372</span>                    Id = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a52038e1a769f1114c492c76640a6afc8">metadata</a>.Id,</div>
<div class="line"><span class="lineno">  373</span>                },</div>
<div class="line"><span class="lineno">  374</span>                Description = $<span class="stringliteral">&quot;Instance startup watchdog {(reattaching ? &quot;</span>reattach<span class="stringliteral">&quot; : &quot;</span>launch<span class="stringliteral">&quot;)}&quot;</span>,</div>
<div class="line"><span class="lineno">  375</span>                CancelRight = (ulong)<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#acf2642afce6567c03b79876139a10a49">DreamDaemonRights</a>.Shutdown,</div>
<div class="line"><span class="lineno">  376</span>                CancelRightsType = <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a7b02c8c3dadd90810a9eaa24712a0a20">RightsType</a>.DreamDaemon,</div>
<div class="line"><span class="lineno">  377</span>            };</div>
<div class="line"><span class="lineno">  378</span>            await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a1688863ddcd7d0bbfa3ec13b7b015319">jobManager</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#a21be789f798adf9985f2432d3499b4cd">RegisterOperation</a>(</div>
<div class="line"><span class="lineno">  379</span>                job,</div>
<div class="line"><span class="lineno">  380</span>                async (core, databaseContextFactory, paramJob, progressFunction, ct) =&gt;</div>
<div class="line"><span class="lineno">  381</span>                {</div>
<div class="line"><span class="lineno">  382</span>                    <span class="keywordflow">if</span> (core.Watchdog != <span class="keyword">this</span>)</div>
<div class="line"><span class="lineno">  383</span>                        <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Instance</a>.DifferentCoreExceptionMessage);</div>
<div class="line"><span class="lineno">  384</span> </div>
<div class="line"><span class="lineno">  385</span>                    <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>, ct))</div>
<div class="line"><span class="lineno">  386</span>                        await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4">LaunchNoLock</a>(<span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">true</span>, reattachInfo, ct);</div>
<div class="line"><span class="lineno">  387</span> </div>
<div class="line"><span class="lineno">  388</span>                    await <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a4820be21214383b7b38ed5408b9082b2">UpdateTrackingContexts</a>(ct);</div>
<div class="line"><span class="lineno">  389</span>                },</div>
<div class="line"><span class="lineno">  390</span>                cancellationToken);</div>
<div class="line"><span class="lineno">  391</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Tgstation.Server.Api.Models.Instance</a></div><div class="ttdoc">Metadata about a server instance.</div><div class="ttdef"><b>Definition:</b> <a href="_tgstation_8_server_8_api_2_models_2_instance_8cs_source.html#l00008">Instance.cs:9</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor_html_a1e73c7faa5f961369020355979f55ada"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#a1e73c7faa5f961369020355979f55ada">Tgstation.Server.Host.Components.Session.SessionPersistor.Load</a></div><div class="ttdeci">async Task&lt; ReattachInformation &gt; Load(CancellationToken cancellationToken)</div><div class="ttdoc">Load a saved ReattachInformation. A Task&lt;TResult&gt; resulting in the stored ReattachInformation if any.</div><div class="ttdef"><b>Definition:</b> <a href="_session_persistor_8cs_source.html#l00093">SessionPersistor.cs:93</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager_html_a4820be21214383b7b38ed5408b9082b2"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a4820be21214383b7b38ed5408b9082b2">Tgstation.Server.Host.Components.Chat.IChatManager.UpdateTrackingContexts</a></div><div class="ttdeci">Task UpdateTrackingContexts(CancellationToken cancellationToken)</div><div class="ttdoc">Force an update with the active channels on all active IChatTrackingContexts.</div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager_html_a21be789f798adf9985f2432d3499b4cd"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#a21be789f798adf9985f2432d3499b4cd">Tgstation.Server.Host.Jobs.IJobManager.RegisterOperation</a></div><div class="ttdeci">Task RegisterOperation(Job job, JobEntrypoint operation, CancellationToken cancellationToken)</div><div class="ttdoc">Registers a given Job and begins running it.</div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_rights_html_a7b02c8c3dadd90810a9eaa24712a0a20"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#a7b02c8c3dadd90810a9eaa24712a0a20">Tgstation.Server.Api.Rights.RightsType</a></div><div class="ttdeci">RightsType</div><div class="ttdoc">The type of rights a model uses.</div><div class="ttdef"><b>Definition:</b> <a href="_rights_type_8cs_source.html#l00006">RightsType.cs:7</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_rights_html_acf2642afce6567c03b79876139a10a49"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_rights.html#acf2642afce6567c03b79876139a10a49">Tgstation.Server.Api.Rights.DreamDaemonRights</a></div><div class="ttdeci">DreamDaemonRights</div><div class="ttdoc">Rights for managing DreamDaemon.</div><div class="ttdef"><b>Definition:</b> <a href="_dream_daemon_rights_8cs_source.html#l00009">DreamDaemonRights.cs:10</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00138">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.autoStart</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00078">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="_tgstation_8_server_8_host_2_components_2_instance_8cs_source.html#l00033">Tgstation.Server.Host.Components.Instance.DifferentCoreExceptionMessage</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00118">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.jobManager</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00489">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, <a class="el" href="_session_persistor_8cs_source.html#l00093">Tgstation.Server.Host.Components.Session.SessionPersistor.Load()</a>, <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00098">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.metadata</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#a21be789f798adf9985f2432d3499b4cd">Tgstation.Server.Host.Jobs.IJobManager.RegisterOperation()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00103">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>, and <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a4820be21214383b7b38ed5408b9082b2">Tgstation.Server.Host.Components.Chat.IChatManager.UpdateTrackingContexts()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ae30d4b582b04eb7c3ef3c5d848429bbd_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ae30d4b582b04eb7c3ef3c5d848429bbd_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ae30d4b582b04eb7c3ef3c5d848429bbd_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ae30d4b582b04eb7c3ef3c5d848429bbd_cgraph">
<area shape="rect" title=" " alt="" coords="5,821,244,861"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog." alt="" coords="300,615,563,655"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="1675,537,1865,577"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#a1e73c7faa5f961369020355979f55ada" title="Load a saved ReattachInformation. A Task&lt;TResult&gt; resulting in the stored ReattachInformation if any." alt="" coords="318,821,545,861"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html#a21be789f798adf9985f2432d3499b4cd" title="Registers a given Job and begins running it." alt="" coords="329,885,533,925"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a4820be21214383b7b38ed5408b9082b2" title="Force an update with the active channels on all active IChatTrackingContexts." alt="" coords="292,949,571,989"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a61974ff4ef41775f690f61ee6fe113f2" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="619,643,892,683"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a73f31d67f3a7aad74b0e26e1949cb302" title="Starts all ISessionControllers." alt="" coords="632,707,879,747"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them." alt="" coords="620,369,891,409"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="1293,537,1579,577"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#acefbbc13736d330bb4214aaea995955c" title="Handle a given eventType ." alt="" coords="973,656,1212,696"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5" title="Wrapper for DisposeAndNullControllersImpl under a locked context." alt="" coords="1303,367,1569,422"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830" title="Get the active ISessionController." alt="" coords="1627,261,1913,301"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a736a0993a11c8e6c5a00682dac054205" title="Handles a watchdog health check." alt="" coords="947,261,1238,301"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a0ddddb5064444b1786a360d85c3c3873" title="Handles the actions to take when the monitor has to &quot;wake up&quot;." alt="" coords="940,427,1245,467"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6d6672dfae1375d392bcd16ed604590d" title="Check for a new IDmbProvider." alt="" coords="958,98,1227,153"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a24fd29d12e91f659010d483228be1225" title="Attempt to restart the monitor from scratch." alt="" coords="963,592,1222,632"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aebef451cedbed6fe5a4367fe035470a7" title="Clear any stored ReattachInformation. A Task representing the running operation." alt="" coords="1657,411,1883,451"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2f8ea066a8ae2408f1c86f828d7974f8" title="Call IDisposable.Dispose and null the fields for all ISessionControllers." alt="" coords="1637,331,1903,386"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_session_persistor.html#aa948dc00c200539206747c99b95986af" title="Clear any stored ReattachInformation." alt="" coords="1961,411,2191,451"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_collection.html#ad270ec18822a7a90d8fca9a75c23851a" title="Remove a given model &#160;from the the working set." alt="" coords="2239,411,2448,451"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ad8489bee0d96bcaf87eba19adee17149" title="Attempt to create a process dump for DreamDaemon. A Task representing the running operation." alt="" coords="1313,147,1559,187"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a286f4eb5c679683b7e519847a6c3574e" title="Combines an array of strings into a path." alt="" coords="1686,69,1854,109"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a69aa1b9dbeb6af3744e568095c4376e7" title="Create a directory at path ." alt="" coords="1679,133,1861,173"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html#a18a442b5dff16f5e7a730ec354e81d78" title="Retrieve the full path of the current working directory." alt="" coords="1686,197,1854,237"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#a6fe38a0d817315fc1bd52ffd47b9d3d5" title="Gets the latest CompileJob. The latest CompileJob." alt="" coords="1301,39,1571,79"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_dmb_factory.html#aa5ae13811ef0862a54741653dc058783" title="Gets the next IDmbProvider. A new IDmbProvider." alt="" coords="1645,5,1895,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html#a866d0f61c2a2311e5fbe5d8de329df33" title="Create a Task that completes after a given timeSpan . A Task representing the running operation." alt="" coords="1345,652,1527,692"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_dmb_factory.html#a8dd876c40ac37b38be7bbe71dbe0363f" title="Gets a IDmbProvider for a given CompileJob." alt="" coords="621,821,889,861"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_process_executor.html#a5618ee521ada90bb15bf3315440898f3" title="Get a IProcess by id ." alt="" coords="656,885,855,925"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_database_1_1_i_database_context_factory.html#ad22fce8fc51129e9da203dcef2f7ab42" title="Run an operation &#160;in the scope of an IDatabaseContext." alt="" coords="636,949,875,989"/>
</map>
</div>

</div>
</div>
<a id="ad1f7ac000da0491494324db1dce544a0" name="ad1f7ac000da0491494324db1dce544a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1f7ac000da0491494324db1dce544a0">&#9670;&#160;</a></span>StopAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StopAsync </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

</div>
</div>
<a id="ab4c51b6e88cc02dfa78070f5870b3b30" name="ab4c51b6e88cc02dfa78070f5870b3b30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4c51b6e88cc02dfa78070f5870b3b30">&#9670;&#160;</a></span>StopMonitor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; bool &gt; Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StopMonitor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stops <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#adfec26f530228b80d384b86ee979ef2f" title="The main loop of the watchdog. Ayschronously waits for events to occur and then responds to them.">MonitorLifetimes(CancellationToken)</a>. Doesn't kill the servers.  </p>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if the monitor was running, <code>false</code> otherwise.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00568">568</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  569</span>        {</div>
<div class="line"><span class="lineno">  570</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;StopMonitor&quot;</span>);</div>
<div class="line"><span class="lineno">  571</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abfb7590db69ab59a040c1ac91c671d6d">monitorTask</a> == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  572</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  573</span>            var wasRunning = !<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abfb7590db69ab59a040c1ac91c671d6d">monitorTask</a>.IsCompleted;</div>
<div class="line"><span class="lineno">  574</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a47a5f64148a117c561df7b0e7e1703e6">monitorCts</a>.Cancel();</div>
<div class="line"><span class="lineno">  575</span>            await <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abfb7590db69ab59a040c1ac91c671d6d">monitorTask</a>;</div>
<div class="line"><span class="lineno">  576</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Stopped Monitor&quot;</span>);</div>
<div class="line"><span class="lineno">  577</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a47a5f64148a117c561df7b0e7e1703e6">monitorCts</a>.Dispose();</div>
<div class="line"><span class="lineno">  578</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#abfb7590db69ab59a040c1ac91c671d6d">monitorTask</a> = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  579</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a47a5f64148a117c561df7b0e7e1703e6">monitorCts</a> = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  580</span>            <span class="keywordflow">return</span> wasRunning;</div>
<div class="line"><span class="lineno">  581</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00073">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00143">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorCts</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00148">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorTask</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l01002">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ab4c51b6e88cc02dfa78070f5870b3b30_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ab4c51b6e88cc02dfa78070f5870b3b30_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ab4c51b6e88cc02dfa78070f5870b3b30_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_ab4c51b6e88cc02dfa78070f5870b3b30_icgraph">
<area shape="rect" title="Stops MonitorLifetimes(CancellationToken). Doesn&#39;t kill the servers." alt="" coords="943,37,1187,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6845304123ed975aec4de3dc79bf8551" title="Implementation of Terminate(bool, CancellationToken). Does not lock synchronizationSemaphore." alt="" coords="616,37,895,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd" title="Restarts the watchdog. A Task representing the running operation." alt="" coords="339,5,565,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a49a9acdffdc9e7cd176f803b23e97ff4" title="Stops the watchdog. A Task representing the running operation." alt="" coords="336,69,568,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3" title="Cancels pending graceful actions. A Task representing the running operation." alt="" coords="5,5,288,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a55690ee90b569ac84689ae6ec2a9e539" title="Handle a restart of the server. A Task representing the running operation." alt="" coords="18,69,275,109"/>
</map>
</div>

</div>
</div>
<a id="a49a9acdffdc9e7cd176f803b23e97ff4" name="a49a9acdffdc9e7cd176f803b23e97ff4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49a9acdffdc9e7cd176f803b23e97ff4">&#9670;&#160;</a></span>Terminate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Terminate </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>graceful</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops the watchdog. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">graceful</td><td>If <code>true</code> the termination will be delayed until a reboot is detected in the active server's DMAPI and this function will return immediately.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a7fded5c4b8aeb291ad5b1797a25eee14">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00398">398</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  399</span>        {</div>
<div class="line"><span class="lineno">  400</span>            <span class="keyword">using</span> (await <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html">SemaphoreSlimContext</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91">Lock</a>(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4">synchronizationSemaphore</a>, cancellationToken))</div>
<div class="line"><span class="lineno">  401</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6845304123ed975aec4de3dc79bf8551">TerminateNoLock</a>(graceful, !<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">releaseServers</a>, cancellationToken);</div>
<div class="line"><span class="lineno">  402</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_semaphore_slim_context_8cs_source.html#l00018">Tgstation.Server.Host.Utils.SemaphoreSlimContext.Lock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00163">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.releaseServers</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00103">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l01002">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00405">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleRestart()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a49a9acdffdc9e7cd176f803b23e97ff4_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a49a9acdffdc9e7cd176f803b23e97ff4_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a49a9acdffdc9e7cd176f803b23e97ff4_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a49a9acdffdc9e7cd176f803b23e97ff4_cgraph">
<area shape="rect" title="Stops the watchdog. A Task representing the running operation." alt="" coords="5,69,237,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_semaphore_slim_context.html#a29773d588476671bbe480f096d839c91" title="Asyncronously locks a semaphore ." alt="" coords="329,37,520,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6845304123ed975aec4de3dc79bf8551" title="Implementation of Terminate(bool, CancellationToken). Does not lock synchronizationSemaphore." alt="" coords="285,101,564,141"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830" title="Get the active ISessionController." alt="" coords="612,5,899,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a61974ff4ef41775f690f61ee6fe113f2" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="619,69,892,109"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="613,133,898,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab4c51b6e88cc02dfa78070f5870b3b30" title="Stops MonitorLifetimes(CancellationToken). Doesn&#39;t kill the servers." alt="" coords="633,197,877,237"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#acefbbc13736d330bb4214aaea995955c" title="Handle a given eventType ." alt="" coords="947,69,1185,109"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a49a9acdffdc9e7cd176f803b23e97ff4_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a49a9acdffdc9e7cd176f803b23e97ff4_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a49a9acdffdc9e7cd176f803b23e97ff4_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a49a9acdffdc9e7cd176f803b23e97ff4_icgraph">
<area shape="rect" title="Stops the watchdog. A Task representing the running operation." alt="" coords="311,5,543,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a55690ee90b569ac84689ae6ec2a9e539" title="Handle a restart of the server. A Task representing the running operation." alt="" coords="5,5,263,45"/>
</map>
</div>

</div>
</div>
<a id="a6845304123ed975aec4de3dc79bf8551" name="a6845304123ed975aec4de3dc79bf8551"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6845304123ed975aec4de3dc79bf8551">&#9670;&#160;</a></span>TerminateNoLock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>graceful</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>announce</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implementation of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a49a9acdffdc9e7cd176f803b23e97ff4" title="Stops the watchdog. A Task representing the running operation.">Terminate(bool, CancellationToken)</a>. Does not lock <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a7e6adcb942a9ff1bb7d11d738b98b6e4" title="The SemaphoreSlim for the WatchdogBase.">synchronizationSemaphore</a>.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">graceful</td><td>If <code>true</code> the termination will be delayed until a reboot is detected in the active server's DMAPI and this function will return immediately.</td></tr>
    <tr><td class="paramname">announce</td><td>If <code>true</code> the termination will be announced using <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat.html">Chat</a>.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l01002">1002</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1003</span>        {</div>
<div class="line"><span class="lineno"> 1004</span>            <span class="keywordflow">if</span> (<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb">Status</a> == <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a>.Offline)</div>
<div class="line"><span class="lineno"> 1005</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1006</span>            <span class="keywordflow">if</span> (!graceful)</div>
<div class="line"><span class="lineno"> 1007</span>            {</div>
<div class="line"><span class="lineno"> 1008</span>                var eventTask = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a61974ff4ef41775f690f61ee6fe113f2">HandleEventImpl</a>(</div>
<div class="line"><span class="lineno"> 1009</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">releaseServers</a></div>
<div class="line"><span class="lineno"> 1010</span>                        ? <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>.WatchdogDetach</div>
<div class="line"><span class="lineno"> 1011</span>                        : <a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_events.html#ac30c818717e92c8fb65f389adec739b7">EventType</a>.WatchdogShutdown,</div>
<div class="line"><span class="lineno"> 1012</span>                    Enumerable.Empty&lt;<span class="keywordtype">string</span>&gt;(),</div>
<div class="line"><span class="lineno"> 1013</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a256c7fd5a04870388411185b46ff6fb8">releaseServers</a>,</div>
<div class="line"><span class="lineno"> 1014</span>                    cancellationToken);</div>
<div class="line"><span class="lineno"> 1015</span> </div>
<div class="line"><span class="lineno"> 1016</span>                <span class="keywordflow">if</span> (announce)</div>
<div class="line"><span class="lineno"> 1017</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#aec24ff5e3b22b40e62f4a2443eb8cec9">Chat</a>.<a class="code hl_function" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">QueueWatchdogMessage</a>(<span class="stringliteral">&quot;Shutting down...&quot;</span>);</div>
<div class="line"><span class="lineno"> 1018</span> </div>
<div class="line"><span class="lineno"> 1019</span>                await eventTask;</div>
<div class="line"><span class="lineno"> 1020</span> </div>
<div class="line"><span class="lineno"> 1021</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab4c51b6e88cc02dfa78070f5870b3b30">StopMonitor</a>();</div>
<div class="line"><span class="lineno"> 1022</span> </div>
<div class="line"><span class="lineno"> 1023</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6548572ef5ab9d7b6b3aae8647a0a053">LastLaunchParameters</a> = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno"> 1024</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1025</span>            }</div>
<div class="line"><span class="lineno"> 1026</span> </div>
<div class="line"><span class="lineno"> 1027</span>            <span class="comment">// merely set the reboot state</span></div>
<div class="line"><span class="lineno"> 1028</span>            var toKill = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">GetActiveController</a>();</div>
<div class="line"><span class="lineno"> 1029</span>            <span class="keywordflow">if</span> (toKill != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno"> 1030</span>            {</div>
<div class="line"><span class="lineno"> 1031</span>                await toKill.SetRebootState(Session.RebootState.Shutdown, cancellationToken);</div>
<div class="line"><span class="lineno"> 1032</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Graceful termination requested&quot;</span>);</div>
<div class="line"><span class="lineno"> 1033</span>            }</div>
<div class="line"><span class="lineno"> 1034</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1035</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Could not gracefully terminate as there is no active controller!&quot;</span>);</div>
<div class="line"><span class="lineno"> 1036</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_ab4c51b6e88cc02dfa78070f5870b3b30"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab4c51b6e88cc02dfa78070f5870b3b30">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StopMonitor</a></div><div class="ttdeci">async Task&lt; bool &gt; StopMonitor()</div><div class="ttdoc">Stops MonitorLifetimes(CancellationToken). Doesn't kill the servers.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00568">WatchdogBase.cs:568</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_watchdog_base_8cs_source.html#l00078">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.GetActiveController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00696">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleEventImpl()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00052">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LastLaunchParameters</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00073">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83">Tgstation.Server.Host.Components.Chat.IChatManager.QueueWatchdogMessage()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00163">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.releaseServers</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00036">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00568">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StopMonitor()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00337">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Restart()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00398">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Terminate()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6845304123ed975aec4de3dc79bf8551_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6845304123ed975aec4de3dc79bf8551_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6845304123ed975aec4de3dc79bf8551_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6845304123ed975aec4de3dc79bf8551_cgraph">
<area shape="rect" title="Implementation of Terminate(bool, CancellationToken). Does not lock synchronizationSemaphore." alt="" coords="5,101,284,141"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a634f53946305b875c65c04dfd1719830" title="Get the active ISessionController." alt="" coords="332,5,619,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a61974ff4ef41775f690f61ee6fe113f2" title="Handle a given eventType &#160;without re&#45;throwing errors." alt="" coords="339,69,612,109"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html#a103e061814fc6760410734c7a83f9a83" title="Queue a chat message &#160;to configured watchdog channels." alt="" coords="333,133,618,173"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ab4c51b6e88cc02dfa78070f5870b3b30" title="Stops MonitorLifetimes(CancellationToken). Doesn&#39;t kill the servers." alt="" coords="353,197,597,237"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html#acefbbc13736d330bb4214aaea995955c" title="Handle a given eventType ." alt="" coords="667,69,905,109"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6845304123ed975aec4de3dc79bf8551_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6845304123ed975aec4de3dc79bf8551_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6845304123ed975aec4de3dc79bf8551_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_a6845304123ed975aec4de3dc79bf8551_icgraph">
<area shape="rect" title="Implementation of Terminate(bool, CancellationToken). Does not lock synchronizationSemaphore." alt="" coords="616,37,895,77"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a39d65944835fca058d4a4be46eaf81bd" title="Restarts the watchdog. A Task representing the running operation." alt="" coords="339,5,565,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a49a9acdffdc9e7cd176f803b23e97ff4" title="Stops the watchdog. A Task representing the running operation." alt="" coords="336,69,568,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_basic_watchdog.html#a3b874bb53e907a576a4b88122083c6c3" title="Cancels pending graceful actions. A Task representing the running operation." alt="" coords="5,5,288,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a55690ee90b569ac84689ae6ec2a9e539" title="Handle a restart of the server. A Task representing the running operation." alt="" coords="18,69,275,109"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a410f168d84f80c138450fb42f222ba01" name="a410f168d84f80c138450fb42f222ba01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a410f168d84f80c138450fb42f222ba01">&#9670;&#160;</a></span>autoStart</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly bool Tgstation.Server.Host.Components.Watchdog.WatchdogBase.autoStart</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a> should <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5d1f2571cdce3431ab477a9c9c3e6f4" title="Launches the watchdog.">LaunchNoLock(bool, bool, bool, ReattachInformation, CancellationToken)</a> in <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#ae30d4b582b04eb7c3ef3c5d848429bbd">StartAsync(CancellationToken)</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00138">138</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00361">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StartAsync()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00187">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a5f9cfb67111bbc5ec1d954e4ed4bf913" name="a5f9cfb67111bbc5ec1d954e4ed4bf913"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f9cfb67111bbc5ec1d954e4ed4bf913">&#9670;&#160;</a></span>controllerDisposeSemaphore</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly SemaphoreSlim Tgstation.Server.Host.Components.Watchdog.WatchdogBase.controllerDisposeSemaphore</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>SemaphoreSlim used for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a875fe1589eb86e57a50a0e793b0d74f5" title="Wrapper for DisposeAndNullControllersImpl under a locked context.">DisposeAndNullControllers</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00108">108</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00633">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00242">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAsync()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00187">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a8becb1115fe1c09c84534c798466e03f" name="a8becb1115fe1c09c84534c798466e03f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8becb1115fe1c09c84534c798466e03f">&#9670;&#160;</a></span>diagnosticsIOManager</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_i_o_1_1_i_i_o_manager.html">IIOManager</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.diagnosticsIOManager</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IIOManager pointing to the Diagnostics directory.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00128">128</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00433">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.CreateDump()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00187">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a5c39f385b06058f4699503b492d2b743" name="a5c39f385b06058f4699503b492d2b743"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c39f385b06058f4699503b492d2b743">&#9670;&#160;</a></span>disposed</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Tgstation.Server.Host.Components.Watchdog.WatchdogBase.disposed</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a> has been <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a6f69db8c3ceae298404f5d8d5a7312b3">DisposeAsync</a>'d.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00168">168</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00242">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAsync()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00785">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>.</p>

</div>
</div>
<a id="a5768c37124d54e80c66dc63d28d0dea4" name="a5768c37124d54e80c66dc63d28d0dea4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5768c37124d54e80c66dc63d28d0dea4">&#9670;&#160;</a></span>eventConsumer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_events_1_1_i_event_consumer.html">IEventConsumer</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.eventConsumer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IEventConsumer that is not the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00113">113</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00696">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleEventImpl()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00187">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="ae85241e9a900f49e703b7eda13c78564" name="ae85241e9a900f49e703b7eda13c78564"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae85241e9a900f49e703b7eda13c78564">&#9670;&#160;</a></span>healthChecksMissed</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Tgstation.Server.Host.Components.Watchdog.WatchdogBase.healthChecksMissed</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The number of hearbeats missed.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00158">158</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l01043">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleHealthCheck()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00489">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>.</p>

</div>
</div>
<a id="a1688863ddcd7d0bbfa3ec13b7b015319" name="a1688863ddcd7d0bbfa3ec13b7b015319"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1688863ddcd7d0bbfa3ec13b7b015319">&#9670;&#160;</a></span>jobManager</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html">IJobManager</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.jobManager</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IJobManager for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00118">118</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00361">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StartAsync()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00187">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a52038e1a769f1114c492c76640a6afc8" name="a52038e1a769f1114c492c76640a6afc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52038e1a769f1114c492c76640a6afc8">&#9670;&#160;</a></span>metadata</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html">Api.Models.Instance</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.metadata</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_instance.html" title="Metadata about a server instance.">Api.Models.Instance</a> for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00098">98</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00666">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.BeforeApplyDmb()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00361">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StartAsync()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00187">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a47a5f64148a117c561df7b0e7e1703e6" name="a47a5f64148a117c561df7b0e7e1703e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47a5f64148a117c561df7b0e7e1703e6">&#9670;&#160;</a></span>monitorCts</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CancellationTokenSource Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorCts</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The CancellationTokenSource for the monitor loop.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00143">143</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00242">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAsync()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00489">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00568">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StopMonitor()</a>.</p>

</div>
</div>
<a id="abfb7590db69ab59a040c1ac91c671d6d" name="abfb7590db69ab59a040c1ac91c671d6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfb7590db69ab59a040c1ac91c671d6d">&#9670;&#160;</a></span>monitorTask</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Task Tgstation.Server.Host.Components.Watchdog.WatchdogBase.monitorTask</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The Task running the monitor loop.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00148">148</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00405">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleRestart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00489">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00568">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StopMonitor()</a>.</p>

</div>
</div>
<a id="a256c7fd5a04870388411185b46ff6fb8" name="a256c7fd5a04870388411185b46ff6fb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a256c7fd5a04870388411185b46ff6fb8">&#9670;&#160;</a></span>releaseServers</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Tgstation.Server.Host.Components.Watchdog.WatchdogBase.releaseServers</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If the servers should be released instead of shutdown.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00163">163</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00633">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00405">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleRestart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00785">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00398">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Terminate()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l01002">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00187">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a72637a3ebe8925b7c3753416370ad83c" name="a72637a3ebe8925b7c3753416370ad83c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72637a3ebe8925b7c3753416370ad83c">&#9670;&#160;</a></span>remoteDeploymentManagerFactory</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_remote_1_1_i_remote_deployment_manager_factory.html">IRemoteDeploymentManagerFactory</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.remoteDeploymentManagerFactory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IRemoteDeploymentManagerFactory for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00133">133</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00666">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.BeforeApplyDmb()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00187">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="aefe25fd33c4a6dfb4ea27b583a2286ea" name="aefe25fd33c4a6dfb4ea27b583a2286ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefe25fd33c4a6dfb4ea27b583a2286ea">&#9670;&#160;</a></span>restartRegistration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_core_1_1_i_restart_registration.html">IRestartRegistration</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.restartRegistration</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IRestartRegistration for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00123">123</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00242">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAsync()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00187">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="af5c8949750c7c079faf8d438fde20c6c" name="af5c8949750c7c079faf8d438fde20c6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5c8949750c7c079faf8d438fde20c6c">&#9670;&#160;</a></span>status</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.status</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Backing field for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a5fa8be05b0c448ea097a70e5d8708ffb" title="The current WatchdogStatus.">Status</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00153">153</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

</div>
</div>
<a id="a7e6adcb942a9ff1bb7d11d738b98b6e4" name="a7e6adcb942a9ff1bb7d11d738b98b6e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e6adcb942a9ff1bb7d11d738b98b6e4">&#9670;&#160;</a></span>synchronizationSemaphore</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly SemaphoreSlim Tgstation.Server.Host.Components.Watchdog.WatchdogBase.synchronizationSemaphore</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The SemaphoreSlim for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00103">103</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00255">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ChangeSettings()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00242">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAsync()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00270">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleChatCommand()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00315">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Launch()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00785">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00716">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorRestart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00324">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ResetRebootState()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00337">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Restart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00361">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StartAsync()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00398">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Terminate()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00187">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<h2 class="groupheader">Property Documentation</h2>
<a id="a5a4b8311c8cbd7cb851d1ade3bc27e05" name="a5a4b8311c8cbd7cb851d1ade3bc27e05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a4b8311c8cbd7cb851d1ade3bc27e05">&#9670;&#160;</a></span>ActiveCompileJob</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveCompileJob</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_compile_job.html">Models.CompileJob</a> currently running on the server.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a23f9971c8bc84a87cfaf08744eaaee0d">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00055">55</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00666">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.BeforeApplyDmb()</a>, and <a class="el" href="_windows_watchdog_8cs_source.html#l00222">Tgstation.Server.Host.Components.Watchdog.WindowsWatchdog.HandleNewDmbAvailable()</a>.</p>

</div>
</div>
<a id="a9affc2eeae2903d1bdb0fa81a6550fc4" name="a9affc2eeae2903d1bdb0fa81a6550fc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9affc2eeae2903d1bdb0fa81a6550fc4">&#9670;&#160;</a></span>ActiveLaunchParameters</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveLaunchParameters</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">protected set</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The DreamDaemonLaunchParameters to be applied.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a19270c2054e4431802fdf5a59f9b3518">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00049">49</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   49</span>{ <span class="keyword">get</span>; <span class="keyword">protected</span> <span class="keyword">set</span>; }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00255">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ChangeSettings()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l01043">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleHealthCheck()</a>, <a class="el" href="_basic_watchdog_8cs_source.html#l00292">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.HandleNormalReboot()</a>, <a class="el" href="_windows_watchdog_8cs_source.html#l00141">Tgstation.Server.Host.Components.Watchdog.WindowsWatchdog.HandleNormalReboot()</a>, <a class="el" href="_basic_watchdog_8cs_source.html#l00205">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.InitController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00489">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00785">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00187">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a9e101a4b3982c726c99c957acb919209" name="a9e101a4b3982c726c99c957acb919209"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e101a4b3982c726c99c957acb919209">&#9670;&#160;</a></span>ActiveParametersUpdated</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">TaskCompletionSource Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ActiveParametersUpdated</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">set</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>TaskCompletionSource that completes when <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a9affc2eeae2903d1bdb0fa81a6550fc4" title="The DreamDaemonLaunchParameters to be applied.">ActiveLaunchParameters</a> are changed and we are running.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00063">63</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   63</span>{ <span class="keyword">get</span>; <span class="keyword">set</span>; }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00255">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ChangeSettings()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00785">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00187">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a39f77bb87d63b1a1a50aac89ad909f29" name="a39f77bb87d63b1a1a50aac89ad909f29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39f77bb87d63b1a1a50aac89ad909f29">&#9670;&#160;</a></span>AlphaIsActive</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract bool Tgstation.Server.Host.Components.Watchdog.WatchdogBase.AlphaIsActive</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If the alpha server is the active server.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#abbbd1824bcf972a1eb312c12780fc0bc">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00046">46</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   46</span>{ <span class="keyword">get</span>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="abbdc59de3b3556a08bd111264527f369" name="abbdc59de3b3556a08bd111264527f369"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbdc59de3b3556a08bd111264527f369">&#9670;&#160;</a></span>AsyncDelayer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.AsyncDelayer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IAsyncDelayer for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00093">93</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   93</span>{ <span class="keyword">get</span>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aec24ff5e3b22b40e62f4a2443eb8cec9" name="aec24ff5e3b22b40e62f4a2443eb8cec9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec24ff5e3b22b40e62f4a2443eb8cec9">&#9670;&#160;</a></span>Chat</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_i_chat_manager.html">IChatManager</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Chat</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IChatManager for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00078">78</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   78</span>{ <span class="keyword">get</span>; }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l01111">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleChatResponses()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l01043">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleHealthCheck()</a>, <a class="el" href="_basic_watchdog_8cs_source.html#l00107">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.HandleMonitorWakeup()</a>, <a class="el" href="_basic_watchdog_8cs_source.html#l00304">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.HandleNewDmbAvailable()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00405">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleRestart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00489">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00785">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00716">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorRestart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00610">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ReattachFailure()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00337">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Restart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00361">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StartAsync()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l01002">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00187">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a401d41a1b1b805f553f53b35f46275ef" name="a401d41a1b1b805f553f53b35f46275ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a401d41a1b1b805f553f53b35f46275ef">&#9670;&#160;</a></span>DmbFactory</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_deployment_1_1_i_dmb_factory.html">IDmbFactory</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DmbFactory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IDmbFactory for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00088">88</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   88</span>{ <span class="keyword">get</span>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6548572ef5ab9d7b6b3aae8647a0a053" name="a6548572ef5ab9d7b6b3aae8647a0a053"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6548572ef5ab9d7b6b3aae8647a0a053">&#9670;&#160;</a></span>LastLaunchParameters</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_dream_daemon_launch_parameters.html">DreamDaemonLaunchParameters</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LastLaunchParameters</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">protected set</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The DreamDaemonLaunchParameters the active server is using.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#adf8f73df0fe074af3363857bc43e63a5">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00052">52</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   52</span>{ <span class="keyword">get</span>; <span class="keyword">protected</span> <span class="keyword">set</span>; }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="_basic_watchdog_8cs_source.html#l00292">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.HandleNormalReboot()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00489">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l01002">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>.</p>

</div>
</div>
<a id="a2143ec7079d0ffd42c76f61cf7b71cf6" name="a2143ec7079d0ffd42c76f61cf7b71cf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2143ec7079d0ffd42c76f61cf7b71cf6">&#9670;&#160;</a></span>Logger</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ILogger&lt;<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html">WatchdogBase</a>&gt; Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Logger</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ILogger for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00073">73</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   73</span>{ <span class="keyword">get</span>; }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00666">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.BeforeApplyDmb()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00433">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.CreateDump()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00633">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAndNullControllers()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00242">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.DisposeAsync()</a>, <a class="el" href="_windows_watchdog_8cs_source.html#l00380">Tgstation.Server.Host.Components.Watchdog.WindowsWatchdog.DrainDeploymentCleanupTasks()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00696">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleEventImpl()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l01043">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleHealthCheck()</a>, <a class="el" href="_basic_watchdog_8cs_source.html#l00107">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.HandleMonitorWakeup()</a>, <a class="el" href="_windows_watchdog_8cs_source.html#l00222">Tgstation.Server.Host.Components.Watchdog.WindowsWatchdog.HandleNewDmbAvailable()</a>, <a class="el" href="_windows_watchdog_8cs_source.html#l00141">Tgstation.Server.Host.Components.Watchdog.WindowsWatchdog.HandleNormalReboot()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00405">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleRestart()</a>, <a class="el" href="_basic_watchdog_8cs_source.html#l00205">Tgstation.Server.Host.Components.Watchdog.BasicWatchdog.InitController()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00762">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.InitialCheckDmbUpdated()</a>, <a class="el" href="_windows_watchdog_8cs_source.html#l00335">Tgstation.Server.Host.Components.Watchdog.WindowsWatchdog.InitialLink()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00489">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00785">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00716">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorRestart()</a>, <a class="el" href="_windows_watchdog_8cs_source.html#l00347">Tgstation.Server.Host.Components.Watchdog.WindowsWatchdog.PerformDmbSwap()</a>, <a class="el" href="_windows_watchdog_8cs_source.html#l00278">Tgstation.Server.Host.Components.Watchdog.WindowsWatchdog.PrepServerForLaunch()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00610">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ReattachFailure()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00337">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Restart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00568">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.StopMonitor()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l01002">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l00187">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.WatchdogBase()</a>.</p>

</div>
</div>
<a id="a5bc3f8e6c5569555d358578e612a1920" name="a5bc3f8e6c5569555d358578e612a1920"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bc3f8e6c5569555d358578e612a1920">&#9670;&#160;</a></span>RebootState</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract ? <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a3a9adb69be732dbd67aef59559f830c2">RebootState</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.RebootState</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The <a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_session.html#a3a9adb69be732dbd67aef59559f830c2" title="Represents the action to take when /world/Reboot() is called.">Session.RebootState</a> of the active server.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a0145fd1816a703bcb80fd8e107034f4c">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00058">58</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   58</span>{ <span class="keyword">get</span>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a24eb5f0e32cd79487cd9bd80d5257abb" name="a24eb5f0e32cd79487cd9bd80d5257abb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24eb5f0e32cd79487cd9bd80d5257abb">&#9670;&#160;</a></span>SessionControllerFactory</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_controller_factory.html">ISessionControllerFactory</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.SessionControllerFactory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ISessionControllerFactory for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00083">83</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   83</span>{ <span class="keyword">get</span>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5a3bafe5d390332f896cdaf43a8db55d" name="a5a3bafe5d390332f896cdaf43a8db55d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a3bafe5d390332f896cdaf43a8db55d">&#9670;&#160;</a></span>SessionPersistor</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_session_1_1_i_session_persistor.html">ISessionPersistor</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.SessionPersistor</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ISessionPersistor for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html" title="Base class for IWatchdogs.">WatchdogBase</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00068">68</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   68</span>{ <span class="keyword">get</span>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5fa8be05b0c448ea097a70e5d8708ffb" name="a5fa8be05b0c448ea097a70e5d8708ffb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fa8be05b0c448ea097a70e5d8708ffb">&#9670;&#160;</a></span>Status</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683">WatchdogStatus</a> Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Status</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">set</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The current <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#abcc98739b8feb9dd6744647f287e0683" title="The current status of the watchdog.">WatchdogStatus</a>.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_i_watchdog.html#a81f00a3e7109a861886d14e6233d8b43">Tgstation.Server.Host.Components.Watchdog.IWatchdog</a>.</p>

<p class="definition">Definition at line <a class="el" href="_watchdog_base_8cs_source.html#l00035">35</a> of file <a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   36</span>        {</div>
<div class="line"><span class="lineno">   37</span>            <span class="keyword">get</span> =&gt; <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5c8949750c7c079faf8d438fde20c6c">status</a>;</div>
<div class="line"><span class="lineno">   38</span>            <span class="keyword">set</span></div>
<div class="line"><span class="lineno">   39</span>            {</div>
<div class="line"><span class="lineno">   40</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5c8949750c7c079faf8d438fde20c6c">status</a> = value;</div>
<div class="line"><span class="lineno">   41</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#a2143ec7079d0ffd42c76f61cf7b71cf6">Logger</a>.LogTrace(<span class="stringliteral">&quot;Status set to {status}&quot;</span>, <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5c8949750c7c079faf8d438fde20c6c">status</a>);</div>
<div class="line"><span class="lineno">   42</span>            }</div>
<div class="line"><span class="lineno">   43</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base_html_af5c8949750c7c079faf8d438fde20c6c"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_watchdog_1_1_watchdog_base.html#af5c8949750c7c079faf8d438fde20c6c">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.status</a></div><div class="ttdeci">WatchdogStatus status</div><div class="ttdoc">Backing field for Status.</div><div class="ttdef"><b>Definition:</b> <a href="_watchdog_base_8cs_source.html#l00153">WatchdogBase.cs:153</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="_watchdog_base_8cs_source.html#l00255">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ChangeSettings()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00270">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleChatCommand()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00405">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.HandleRestart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00315">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Launch()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00489">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.LaunchNoLock()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00785">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorLifetimes()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00716">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.MonitorRestart()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00324">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.ResetRebootState()</a>, <a class="el" href="_watchdog_base_8cs_source.html#l00337">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.Restart()</a>, and <a class="el" href="_watchdog_base_8cs_source.html#l01002">Tgstation.Server.Host.Components.Watchdog.WatchdogBase.TerminateNoLock()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/Tgstation.Server.Host/Components/Watchdog/<a class="el" href="_watchdog_base_8cs_source.html">WatchdogBase.cs</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
