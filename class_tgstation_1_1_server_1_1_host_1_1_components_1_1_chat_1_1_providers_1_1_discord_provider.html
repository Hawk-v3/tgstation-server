<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tgstation-server: Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="tgs.ico"/></td>
  <td id="projectalign">
   <div id="projectname">tgstation-server<span id="projectnumber">&#160;5.12.5</span>
   </div>
   <div id="projectbrief">The /tg/station 13 server suite</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_tgstation.html">Tgstation</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server.html">Server</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host.html">Host</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components.html">Components</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat.html">Chat</a></li><li class="navelem"><a class="el" href="namespace_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers.html">Providers</a></li><li class="navelem"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html">DiscordProvider</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#properties">Properties</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html" title="For interacting with a chat service.">IProvider</a> for the Discord app.   
 <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider__inherit__graph.png" border="0" usemap="#a_tgstation_8_server_8_host_8_components_8_chat_8_providers_8_discord_provider_inherit__map" alt="Inheritance graph"/></div>
<map name="a_tgstation_8_server_8_host_8_components_8_chat_8_providers_8_discord_provider_inherit__map" id="a_tgstation_8_server_8_host_8_components_8_chat_8_providers_8_discord_provider_inherit__map">
<area shape="rect" title="IProvider for the Discord app." alt="" coords="37,225,263,265"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html" title=" " alt="" coords="51,152,121,177"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html" title="For interacting with a chat service." alt="" coords="31,79,106,104"/>
<area shape="rect" href="class_i_async_disposable.html" title=" " alt="" coords="5,5,132,31"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_discord_responders.html" title="Combined interface for the IResponder types used by TGS." alt="" coords="163,152,302,177"/>
<area shape="rect" href="class_i_responder.html" title=" " alt="" coords="130,79,335,104"/>
<area shape="rect" href="class_i_responder.html" title=" " alt="" coords="360,79,511,104"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider__coll__graph.png" border="0" usemap="#a_tgstation_8_server_8_host_8_components_8_chat_8_providers_8_discord_provider_coll__map" alt="Collaboration graph"/></div>
<map name="a_tgstation_8_server_8_host_8_components_8_chat_8_providers_8_discord_provider_coll__map" id="a_tgstation_8_server_8_host_8_components_8_chat_8_providers_8_discord_provider_coll__map">
<area shape="rect" title="IProvider for the Discord app." alt="" coords="1031,546,1257,586"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html" title=" " alt="" coords="673,200,744,225"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html" title="For interacting with a chat service." alt="" coords="273,188,348,213"/>
<area shape="rect" href="class_i_async_disposable.html" title=" " alt="" coords="5,188,132,213"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html" title="Manages the runtime of Jobs." alt="" coords="219,238,402,278"/>
<area shape="rect" title=" " alt="" coords="181,60,440,115"/>
<area shape="rect" title=" " alt="" coords="232,5,389,31"/>
<area shape="rect" title=" " alt="" coords="257,304,365,329"/>
<area shape="rect" title=" " alt="" coords="285,139,336,164"/>
<area shape="rect" title=" " alt="" coords="225,361,396,387"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_discord_responders.html" title="Combined interface for the IResponder types used by TGS." alt="" coords="639,447,778,472"/>
<area shape="rect" href="class_i_responder.html" title=" " alt="" coords="208,432,413,457"/>
<area shape="rect" href="class_i_responder.html" title=" " alt="" coords="235,481,386,507"/>
<area shape="rect" title=" " alt="" coords="613,496,804,521"/>
<area shape="rect" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html" title="For retrieving the Assembly&#39;s location." alt="" coords="609,546,808,586"/>
<area shape="rect" title=" " alt="" coords="626,611,791,636"/>
<area shape="rect" title=" " alt="" coords="635,660,783,685"/>
<area shape="rect" title=" " alt="" coords="685,709,732,735"/>
<area shape="rect" title=" " alt="" coords="621,759,797,799"/>
<area shape="rect" title=" " alt="" coords="653,824,764,849"/>
<area shape="rect" title=" " alt="" coords="667,873,750,899"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3163c3b5aef21de8175e88a45ce37172"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a3163c3b5aef21de8175e88a45ce37172">DiscordProvider</a> (<a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html">IJobManager</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#aa36ffb34c69e4a990830e49f97b7c142">jobManager</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a> asyncDelayer, ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html">DiscordProvider</a> &gt; logger, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html">IAssemblyInformationProvider</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a73f7fae07fc8d7efc90b6464dc2eca79">assemblyInformationProvider</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_chat_bot.html">ChatBot</a> chatBot)</td></tr>
<tr class="memdesc:a3163c3b5aef21de8175e88a45ce37172"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a new instance of the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html" title="IProvider for the Discord app.">DiscordProvider</a> class.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a3163c3b5aef21de8175e88a45ce37172">More...</a><br /></td></tr>
<tr class="separator:a3163c3b5aef21de8175e88a45ce37172"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab650903107863653f1b637562f4813b4"><td class="memItemLeft" align="right" valign="top">override async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ab650903107863653f1b637562f4813b4">DisposeAsync</a> ()</td></tr>
<tr class="separator:ab650903107863653f1b637562f4813b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4a17b4a63612dfafbd1d48f73ad1ee5"><td class="memItemLeft" align="right" valign="top">override async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#af4a17b4a63612dfafbd1d48f73ad1ee5">SendMessage</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_message.html">Message</a> replyTo, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html">MessageContent</a> message, ulong channelId, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:af4a17b4a63612dfafbd1d48f73ad1ee5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a message to the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html" title="For interacting with a chat service.">IProvider</a>. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">replyTo</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_message.html" title="Represents a message recieved by a IProvider.">Message</a> to reply to.</td></tr>
    <tr><td class="paramname">message</td><td>The MessageContent.</td></tr>
    <tr><td class="paramname">channelId</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_channel_representation.html#a983af752bfee4125d2a94370dc128c48" title="The Providers.IProvider channel Id.">ChannelRepresentation.RealId</a> to send to.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#af4a17b4a63612dfafbd1d48f73ad1ee5">More...</a><br /></td></tr>
<tr class="separator:af4a17b4a63612dfafbd1d48f73ad1ee5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aababa7da5ca6ef1b92dfccff719e12ad"><td class="memItemLeft" align="right" valign="top">override async Task&lt; Func&lt; string, string, Task &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#aababa7da5ca6ef1b92dfccff719e12ad">SendUpdateMessage</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_revision_information.html">Models.RevisionInformation</a> revisionInformation, Version byondVersion, DateTimeOffset? estimatedCompletionTime, string gitHubOwner, string gitHubRepo, ulong channelId, bool localCommitPushed, CancellationToken cancellationToken)</td></tr>
<tr class="separator:aababa7da5ca6ef1b92dfccff719e12ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d7bbc5ddb64df2800554c354ff1974a"><td class="memItemLeft" align="right" valign="top">async Task&lt; Result &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a8d7bbc5ddb64df2800554c354ff1974a">RespondAsync</a> (IMessageCreate messageCreateEvent, CancellationToken cancellationToken)</td></tr>
<tr class="separator:a8d7bbc5ddb64df2800554c354ff1974a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addfb0baffffb90712e76e9bfc1800a15"><td class="memItemLeft" align="right" valign="top">Task&lt; Result &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#addfb0baffffb90712e76e9bfc1800a15">RespondAsync</a> (IReady readyEvent, CancellationToken cancellationToken)</td></tr>
<tr class="separator:addfb0baffffb90712e76e9bfc1800a15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html">Tgstation.Server.Host.Components.Chat.Providers.Provider</a></td></tr>
<tr class="memitem:afe2edd40c945bc526ccd5dfea7a062b1 inherit pub_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memItemLeft" align="right" valign="top">virtual async ValueTask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#afe2edd40c945bc526ccd5dfea7a062b1">DisposeAsync</a> ()</td></tr>
<tr class="separator:afe2edd40c945bc526ccd5dfea7a062b1 inherit pub_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab77ee1149c17f06af44755f54aa19880 inherit pub_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab77ee1149c17f06af44755f54aa19880">Disconnect</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ab77ee1149c17f06af44755f54aa19880 inherit pub_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gracefully disconnects the provider. Permanently stops the reconnection timer. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab77ee1149c17f06af44755f54aa19880">More...</a><br /></td></tr>
<tr class="separator:ab77ee1149c17f06af44755f54aa19880 inherit pub_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7083d8a83ac2d1718385e1df65dc450 inherit pub_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#af7083d8a83ac2d1718385e1df65dc450">InitialMappingComplete</a> ()</td></tr>
<tr class="memdesc:af7083d8a83ac2d1718385e1df65dc450 inherit pub_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicate to the provider that at least one <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html#aba0460fc95ce57785a70597e203a922f" title="Get the ChannelRepresentations for given channels .">MapChannels(IEnumerable&lt;ChatChannel&gt;, CancellationToken)</a> call has successfully completed.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#af7083d8a83ac2d1718385e1df65dc450">More...</a><br /></td></tr>
<tr class="separator:af7083d8a83ac2d1718385e1df65dc450 inherit pub_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a897a6ef9982b5ee63b6b442f6ef54912 inherit pub_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memItemLeft" align="right" valign="top">async Task&lt; Dictionary&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_chat_channel.html">ChatChannel</a>, IEnumerable&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_channel_representation.html">ChannelRepresentation</a> &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a897a6ef9982b5ee63b6b442f6ef54912">MapChannels</a> (IEnumerable&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_chat_channel.html">ChatChannel</a> &gt; channels, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a897a6ef9982b5ee63b6b442f6ef54912 inherit pub_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_channel_representation.html" title="Represents a Providers.IProvider channel.">ChannelRepresentation</a>s for given <em>channels</em> . <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channels</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_chat_channel.html" title="Indicates a chat channel.">Api.Models.ChatChannel</a>s to map.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task&lt;TResult&gt; resulting in a Dictionary&lt;TKey, TValue&gt; of the ChatChannel's <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_channel_representation.html" title="Represents a Providers.IProvider channel.">ChannelRepresentation</a>s representing <em>channels</em> .</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a897a6ef9982b5ee63b6b442f6ef54912">More...</a><br /></td></tr>
<tr class="separator:a897a6ef9982b5ee63b6b442f6ef54912 inherit pub_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ba4b76201e45c7efb16350a3d83526f inherit pub_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memItemLeft" align="right" valign="top">async Task&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_message.html">Message</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a5ba4b76201e45c7efb16350a3d83526f">NextMessage</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a5ba4b76201e45c7efb16350a3d83526f inherit pub_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a Task&lt;TResult&gt; resulting in the next <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_message.html" title="Represents a message recieved by a IProvider.">Message</a> the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html" title="For interacting with a chat service.">IProvider</a> recieves or <code>null</code> on a disconnect. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task&lt;TResult&gt; resulting in the next available <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_message.html" title="Represents a message recieved by a IProvider.">Message</a> or <code>null</code> if the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html" title="For interacting with a chat service.">IProvider</a> needed to reconnect.</dd></dl>
Note that private messages will come in the form of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_channel_representation.html" title="Represents a Providers.IProvider channel.">ChannelRepresentation</a>s not returned in <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html#aba0460fc95ce57785a70597e203a922f" title="Get the ChannelRepresentations for given channels .">MapChannels(IEnumerable&lt;ChatChannel&gt;, CancellationToken)</a>. Do not IDisposable.Dispose the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html" title="For interacting with a chat service.">IProvider</a> on continuations run from the returned Task.  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a5ba4b76201e45c7efb16350a3d83526f">More...</a><br /></td></tr>
<tr class="separator:a5ba4b76201e45c7efb16350a3d83526f inherit pub_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4642b423570a979ed7d0ae2b3b73ea3 inherit pub_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ac4642b423570a979ed7d0ae2b3b73ea3">SetReconnectInterval</a> (uint reconnectInterval, bool connectNow)</td></tr>
<tr class="memdesc:ac4642b423570a979ed7d0ae2b3b73ea3 inherit pub_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the interval at which the provider starts jobs to try to reconnect. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reconnectInterval</td><td>The reconnection interval in minutes.</td></tr>
    <tr><td class="paramname">connectNow</td><td>If a connection attempt should be made now.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ac4642b423570a979ed7d0ae2b3b73ea3">More...</a><br /></td></tr>
<tr class="separator:ac4642b423570a979ed7d0ae2b3b73ea3 inherit pub_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bfb93cc63e31af62a2513e4541d6162 inherit pub_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memItemLeft" align="right" valign="top">abstract Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a8bfb93cc63e31af62a2513e4541d6162">SendMessage</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_message.html">Message</a> replyTo, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html">MessageContent</a> message, ulong channelId, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a8bfb93cc63e31af62a2513e4541d6162 inherit pub_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a message to the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html" title="For interacting with a chat service.">IProvider</a>. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">replyTo</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_message.html" title="Represents a message recieved by a IProvider.">Message</a> to reply to.</td></tr>
    <tr><td class="paramname">message</td><td>The MessageContent.</td></tr>
    <tr><td class="paramname">channelId</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_channel_representation.html#a983af752bfee4125d2a94370dc128c48" title="The Providers.IProvider channel Id.">ChannelRepresentation.RealId</a> to send to.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a8bfb93cc63e31af62a2513e4541d6162">More...</a><br /></td></tr>
<tr class="separator:a8bfb93cc63e31af62a2513e4541d6162 inherit pub_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19dca63620c75d823b88eba9d5d99552 inherit pub_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memItemLeft" align="right" valign="top">abstract Task&lt; Func&lt; string, string, Task &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a19dca63620c75d823b88eba9d5d99552">SendUpdateMessage</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_revision_information.html">RevisionInformation</a> revisionInformation, Version byondVersion, DateTimeOffset? estimatedCompletionTime, string gitHubOwner, string gitHubRepo, ulong channelId, bool localCommitPushed, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a19dca63620c75d823b88eba9d5d99552 inherit pub_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send the message for a deployment. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">revisionInformation</td><td>The RevisionInformation of the deployment.</td></tr>
    <tr><td class="paramname">byondVersion</td><td>The BYOND Version of the deployment.</td></tr>
    <tr><td class="paramname">estimatedCompletionTime</td><td>The optional DateTimeOffset the deployment is expected to be completed at.</td></tr>
    <tr><td class="paramname">gitHubOwner</td><td>The repository GitHub owner, if any.</td></tr>
    <tr><td class="paramname">gitHubRepo</td><td>The repository GitHub name, if any.</td></tr>
    <tr><td class="paramname">channelId</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_channel_representation.html#a983af752bfee4125d2a94370dc128c48" title="The Providers.IProvider channel Id.">ChannelRepresentation.RealId</a> to send to.</td></tr>
    <tr><td class="paramname">localCommitPushed</td><td><code>true</code> if the local deployment commit was pushed to the remote repository.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task&lt;TResult&gt; resulting in a Func&lt;T1, T2, TResult&gt; to call to update the message at the deployment's conclusion. Parameters: Error message if any, DreamMaker output if any.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a19dca63620c75d823b88eba9d5d99552">More...</a><br /></td></tr>
<tr class="separator:a19dca63620c75d823b88eba9d5d99552 inherit pub_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1c82391c0f853dfb883c364ef2f24cc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html#af1c82391c0f853dfb883c364ef2f24cc">InitialMappingComplete</a> ()</td></tr>
<tr class="memdesc:af1c82391c0f853dfb883c364ef2f24cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicate to the provider that at least one <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html#aba0460fc95ce57785a70597e203a922f" title="Get the ChannelRepresentations for given channels .">MapChannels(IEnumerable&lt;ChatChannel&gt;, CancellationToken)</a> call has successfully completed.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html#af1c82391c0f853dfb883c364ef2f24cc">More...</a><br /></td></tr>
<tr class="separator:af1c82391c0f853dfb883c364ef2f24cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a070c0114e0b3680f32217f99f89253a8"><td class="memItemLeft" align="right" valign="top">Task&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_message.html">Message</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html#a070c0114e0b3680f32217f99f89253a8">NextMessage</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a070c0114e0b3680f32217f99f89253a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a Task&lt;TResult&gt; resulting in the next <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_message.html" title="Represents a message recieved by a IProvider.">Message</a> the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html" title="For interacting with a chat service.">IProvider</a> recieves or <code>null</code> on a disconnect.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html#a070c0114e0b3680f32217f99f89253a8">More...</a><br /></td></tr>
<tr class="separator:a070c0114e0b3680f32217f99f89253a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae24ff61d2fb16b41675498d0d95b67d8"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html#ae24ff61d2fb16b41675498d0d95b67d8">Disconnect</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ae24ff61d2fb16b41675498d0d95b67d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gracefully disconnects the provider. Permanently stops the reconnection timer.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html#ae24ff61d2fb16b41675498d0d95b67d8">More...</a><br /></td></tr>
<tr class="separator:ae24ff61d2fb16b41675498d0d95b67d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba0460fc95ce57785a70597e203a922f"><td class="memItemLeft" align="right" valign="top">Task&lt; Dictionary&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_chat_channel.html">ChatChannel</a>, IEnumerable&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_channel_representation.html">ChannelRepresentation</a> &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html#aba0460fc95ce57785a70597e203a922f">MapChannels</a> (IEnumerable&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_chat_channel.html">ChatChannel</a> &gt; channels, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:aba0460fc95ce57785a70597e203a922f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_channel_representation.html" title="Represents a Providers.IProvider channel.">ChannelRepresentation</a>s for given <em>channels</em> .   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html#aba0460fc95ce57785a70597e203a922f">More...</a><br /></td></tr>
<tr class="separator:aba0460fc95ce57785a70597e203a922f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acffa4545e390b390d8f70a4017f386a6"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html#acffa4545e390b390d8f70a4017f386a6">SendMessage</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_message.html">Message</a> replyTo, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html">MessageContent</a> message, ulong channelId, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:acffa4545e390b390d8f70a4017f386a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a message to the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html" title="For interacting with a chat service.">IProvider</a>.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html#acffa4545e390b390d8f70a4017f386a6">More...</a><br /></td></tr>
<tr class="separator:acffa4545e390b390d8f70a4017f386a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f13abd1df7147c47d6d1a8e4577b9e6"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html#a8f13abd1df7147c47d6d1a8e4577b9e6">SetReconnectInterval</a> (uint reconnectInterval, bool connectNow)</td></tr>
<tr class="memdesc:a8f13abd1df7147c47d6d1a8e4577b9e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the interval at which the provider starts jobs to try to reconnect.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html#a8f13abd1df7147c47d6d1a8e4577b9e6">More...</a><br /></td></tr>
<tr class="separator:a8f13abd1df7147c47d6d1a8e4577b9e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafe952d6757889e6acbec8e3b1e754a6"><td class="memItemLeft" align="right" valign="top">Task&lt; Func&lt; string, string, Task &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html#aafe952d6757889e6acbec8e3b1e754a6">SendUpdateMessage</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_revision_information.html">RevisionInformation</a> revisionInformation, Version byondVersion, DateTimeOffset? estimatedCompletionTime, string gitHubOwner, string gitHubRepo, ulong channelId, bool localCommitPushed, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:aafe952d6757889e6acbec8e3b1e754a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send the message for a deployment.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html#aafe952d6757889e6acbec8e3b1e754a6">More...</a><br /></td></tr>
<tr class="separator:aafe952d6757889e6acbec8e3b1e754a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:aaa5c800b8dc532cb596ebd075e14e48e"><td class="memItemLeft" align="right" valign="top">override async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#aaa5c800b8dc532cb596ebd075e14e48e">Connect</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:aaa5c800b8dc532cb596ebd075e14e48e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to connect the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html">Provider</a>. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#aaa5c800b8dc532cb596ebd075e14e48e">More...</a><br /></td></tr>
<tr class="separator:aaa5c800b8dc532cb596ebd075e14e48e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4da9b25c89c74b4e2d70fdfb7f8c894"><td class="memItemLeft" align="right" valign="top">override async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ae4da9b25c89c74b4e2d70fdfb7f8c894">DisconnectImpl</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:ae4da9b25c89c74b4e2d70fdfb7f8c894"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gracefully disconnects the provider. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>
  <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ae4da9b25c89c74b4e2d70fdfb7f8c894">More...</a><br /></td></tr>
<tr class="separator:ae4da9b25c89c74b4e2d70fdfb7f8c894"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6380fd69a8ac2c84d5521b0645f85f6d"><td class="memItemLeft" align="right" valign="top">override async Task&lt; Dictionary&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_chat_channel.html">Models.ChatChannel</a>, IEnumerable&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_channel_representation.html">ChannelRepresentation</a> &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a6380fd69a8ac2c84d5521b0645f85f6d">MapChannelsImpl</a> (IEnumerable&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_chat_channel.html">Models.ChatChannel</a> &gt; channels, CancellationToken cancellationToken)</td></tr>
<tr class="separator:a6380fd69a8ac2c84d5521b0645f85f6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html">Tgstation.Server.Host.Components.Chat.Providers.Provider</a></td></tr>
<tr class="memitem:a3f00cc28b7cb048a224aa76a126befae inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a3f00cc28b7cb048a224aa76a126befae">Provider</a> (<a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html">IJobManager</a> <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#aa36ffb34c69e4a990830e49f97b7c142">jobManager</a>, <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a> asyncDelayer, ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html">Provider</a> &gt; logger, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_chat_bot.html">ChatBot</a> chatBot)</td></tr>
<tr class="memdesc:a3f00cc28b7cb048a224aa76a126befae inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a new instance of the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html">Provider</a> class.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a3f00cc28b7cb048a224aa76a126befae">More...</a><br /></td></tr>
<tr class="separator:a3f00cc28b7cb048a224aa76a126befae inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96305dc74c77224130e4067f19b59407 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memItemLeft" align="right" valign="top">abstract Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a96305dc74c77224130e4067f19b59407">Connect</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a96305dc74c77224130e4067f19b59407 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to connect the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html">Provider</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a96305dc74c77224130e4067f19b59407">More...</a><br /></td></tr>
<tr class="separator:a96305dc74c77224130e4067f19b59407 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a627edd03f216fa53e443b1901cf5599c inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memItemLeft" align="right" valign="top">abstract Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a627edd03f216fa53e443b1901cf5599c">DisconnectImpl</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a627edd03f216fa53e443b1901cf5599c inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gracefully disconnects the provider.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a627edd03f216fa53e443b1901cf5599c">More...</a><br /></td></tr>
<tr class="separator:a627edd03f216fa53e443b1901cf5599c inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d32bc6ce9ad607ffee71995501b4ba5 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memItemLeft" align="right" valign="top">abstract Task&lt; Dictionary&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_chat_channel.html">ChatChannel</a>, IEnumerable&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_channel_representation.html">ChannelRepresentation</a> &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a8d32bc6ce9ad607ffee71995501b4ba5">MapChannelsImpl</a> (IEnumerable&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_chat_channel.html">ChatChannel</a> &gt; channels, CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a8d32bc6ce9ad607ffee71995501b4ba5 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implementation of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a897a6ef9982b5ee63b6b442f6ef54912" title="Get the ChannelRepresentations for given channels . A Task&lt;TResult&gt; resulting in a Dictionary&lt;TKey,...">MapChannels(IEnumerable&lt;ChatChannel&gt;, CancellationToken)</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a8d32bc6ce9ad607ffee71995501b4ba5">More...</a><br /></td></tr>
<tr class="separator:a8d32bc6ce9ad607ffee71995501b4ba5 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac45c189505744c6f1012461193fca877 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ac45c189505744c6f1012461193fca877">EnqueueMessage</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_message.html">Message</a> message)</td></tr>
<tr class="memdesc:ac45c189505744c6f1012461193fca877 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queues a <em>message</em>  for <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a5ba4b76201e45c7efb16350a3d83526f" title="Get a Task&lt;TResult&gt; resulting in the next Message the IProvider recieves or null on a disconnect....">NextMessage(CancellationToken)</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ac45c189505744c6f1012461193fca877">More...</a><br /></td></tr>
<tr class="separator:ac45c189505744c6f1012461193fca877 inherit pro_methods_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="properties" name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:ac2744da20824177724b971eb20a6d5a0"><td class="memItemLeft" align="right" valign="top">override bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ac2744da20824177724b971eb20a6d5a0">Connected</a><code> [get]</code></td></tr>
<tr class="memdesc:ac2744da20824177724b971eb20a6d5a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html" title="For interacting with a chat service.">IProvider</a> is currently connected.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ac2744da20824177724b971eb20a6d5a0">More...</a><br /></td></tr>
<tr class="separator:ac2744da20824177724b971eb20a6d5a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af40c0ea392de9986a4705d403674f61c"><td class="memItemLeft" align="right" valign="top">override string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#af40c0ea392de9986a4705d403674f61c">BotMention</a><code> [get]</code></td></tr>
<tr class="memdesc:af40c0ea392de9986a4705d403674f61c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The string that indicates the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html" title="For interacting with a chat service.">IProvider</a> was mentioned.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#af40c0ea392de9986a4705d403674f61c">More...</a><br /></td></tr>
<tr class="separator:af40c0ea392de9986a4705d403674f61c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header properties_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td colspan="2" onclick="javascript:toggleInherit('properties_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider')"><img src="closed.png" alt="-"/>&#160;Properties inherited from <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html">Tgstation.Server.Host.Components.Chat.Providers.Provider</a></td></tr>
<tr class="memitem:a8f4348efc454ce044b78b979c84bd926 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a8f4348efc454ce044b78b979c84bd926">InitialConnectionJob</a><code> [get]</code></td></tr>
<tr class="memdesc:a8f4348efc454ce044b78b979c84bd926 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="mdescLeft">&#160;</td><td class="mdescRight">A Task that completes once the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html" title="For interacting with a chat service.">IProvider</a> finishes it's first connection attempt regardless of success.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a8f4348efc454ce044b78b979c84bd926">More...</a><br /></td></tr>
<tr class="separator:a8f4348efc454ce044b78b979c84bd926 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4c3c897c6aadc96dfbb08ff893dc602 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_chat_bot.html">ChatBot</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#af4c3c897c6aadc96dfbb08ff893dc602">ChatBot</a><code> [get]</code></td></tr>
<tr class="memdesc:af4c3c897c6aadc96dfbb08ff893dc602 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#af4c3c897c6aadc96dfbb08ff893dc602" title="The ChatBot the Provider is for.">ChatBot</a> the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html">Provider</a> is for.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#af4c3c897c6aadc96dfbb08ff893dc602">More...</a><br /></td></tr>
<tr class="separator:af4c3c897c6aadc96dfbb08ff893dc602 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe2033000d49e39a653b362ca84709a9 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#afe2033000d49e39a653b362ca84709a9">AsyncDelayer</a><code> [get]</code></td></tr>
<tr class="memdesc:afe2033000d49e39a653b362ca84709a9 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IAsyncDelayer for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html">Provider</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#afe2033000d49e39a653b362ca84709a9">More...</a><br /></td></tr>
<tr class="separator:afe2033000d49e39a653b362ca84709a9 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab24337ff80dfef1a9657f7106758a8c3 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memItemLeft" align="right" valign="top">ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html">Provider</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a><code> [get]</code></td></tr>
<tr class="memdesc:ab24337ff80dfef1a9657f7106758a8c3 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ILogger for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html">Provider</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">More...</a><br /></td></tr>
<tr class="separator:ab24337ff80dfef1a9657f7106758a8c3 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afab0213888c139dbb1786d7f5c0d8680 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memItemLeft" align="right" valign="top">abstract bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#afab0213888c139dbb1786d7f5c0d8680">Connected</a><code> [get]</code></td></tr>
<tr class="memdesc:afab0213888c139dbb1786d7f5c0d8680 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html" title="For interacting with a chat service.">IProvider</a> is currently connected.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#afab0213888c139dbb1786d7f5c0d8680">More...</a><br /></td></tr>
<tr class="separator:afab0213888c139dbb1786d7f5c0d8680 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a3ca6a84bbd0adac5990f8d07601f49 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memItemLeft" align="right" valign="top">abstract string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a3a3ca6a84bbd0adac5990f8d07601f49">BotMention</a><code> [get]</code></td></tr>
<tr class="memdesc:a3a3ca6a84bbd0adac5990f8d07601f49 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="mdescLeft">&#160;</td><td class="mdescRight">The string that indicates the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html" title="For interacting with a chat service.">IProvider</a> was mentioned.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a3a3ca6a84bbd0adac5990f8d07601f49">More...</a><br /></td></tr>
<tr class="separator:a3a3ca6a84bbd0adac5990f8d07601f49 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12ea0f5bc6f3379005d924a42bd905d9 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a12ea0f5bc6f3379005d924a42bd905d9">Disposed</a><code> [get, private set]</code></td></tr>
<tr class="memdesc:a12ea0f5bc6f3379005d924a42bd905d9 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html" title="For interacting with a chat service.">IProvider</a> was disposed.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a12ea0f5bc6f3379005d924a42bd905d9">More...</a><br /></td></tr>
<tr class="separator:a12ea0f5bc6f3379005d924a42bd905d9 inherit properties_class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider"><td colspan="2" onclick="javascript:toggleInherit('properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider')"><img src="closed.png" alt="-"/>&#160;Properties inherited from <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html">Tgstation.Server.Host.Components.Chat.Providers.IProvider</a></td></tr>
<tr class="memitem:acc07a6bfb2fbb35243aa1e147d92dd87 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html#acc07a6bfb2fbb35243aa1e147d92dd87">Connected</a><code> [get]</code></td></tr>
<tr class="memdesc:acc07a6bfb2fbb35243aa1e147d92dd87 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html" title="For interacting with a chat service.">IProvider</a> is currently connected.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html#acc07a6bfb2fbb35243aa1e147d92dd87">More...</a><br /></td></tr>
<tr class="separator:acc07a6bfb2fbb35243aa1e147d92dd87 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff3a0cd34a0dee8970516a0d06616053 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html#aff3a0cd34a0dee8970516a0d06616053">Disposed</a><code> [get]</code></td></tr>
<tr class="memdesc:aff3a0cd34a0dee8970516a0d06616053 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html" title="For interacting with a chat service.">IProvider</a> was disposed.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html#aff3a0cd34a0dee8970516a0d06616053">More...</a><br /></td></tr>
<tr class="separator:aff3a0cd34a0dee8970516a0d06616053 inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a781f872cb8143fe3ff92f3cc8d0d5abb inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html#a781f872cb8143fe3ff92f3cc8d0d5abb">BotMention</a><code> [get]</code></td></tr>
<tr class="memdesc:a781f872cb8143fe3ff92f3cc8d0d5abb inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider"><td class="mdescLeft">&#160;</td><td class="mdescRight">The string that indicates the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html" title="For interacting with a chat service.">IProvider</a> was mentioned.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html#a781f872cb8143fe3ff92f3cc8d0d5abb">More...</a><br /></td></tr>
<tr class="separator:a781f872cb8143fe3ff92f3cc8d0d5abb inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98843a608252fa92e550215f3097e51e inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider"><td class="memItemLeft" align="right" valign="top">Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html#a98843a608252fa92e550215f3097e51e">InitialConnectionJob</a><code> [get]</code></td></tr>
<tr class="memdesc:a98843a608252fa92e550215f3097e51e inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider"><td class="mdescLeft">&#160;</td><td class="mdescRight">A Task that completes once the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html" title="For interacting with a chat service.">IProvider</a> finishes it's first connection attempt regardless of success.   <a href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html#a98843a608252fa92e550215f3097e51e">More...</a><br /></td></tr>
<tr class="separator:a98843a608252fa92e550215f3097e51e inherit properties_interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a71748fbc2a36a3f401fd6b156cb6795d"><td class="memItemLeft" align="right" valign="top">async Task&lt; IEnumerable&lt; IChannel &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a71748fbc2a36a3f401fd6b156cb6795d">GetAllAccessibleTextChannels</a> (CancellationToken cancellationToken)</td></tr>
<tr class="memdesc:a71748fbc2a36a3f401fd6b156cb6795d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get all text IChannels accessible to and supported by the bot.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a71748fbc2a36a3f401fd6b156cb6795d">More...</a><br /></td></tr>
<tr class="separator:a71748fbc2a36a3f401fd6b156cb6795d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb7a2fd7f33039ab041c83beca2b85f0"><td class="memItemLeft" align="right" valign="top">Optional&lt; IReadOnlyList&lt; IEmbed &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#acb7a2fd7f33039ab041c83beca2b85f0">ConvertEmbed</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html">ChatEmbed</a> embed)</td></tr>
<tr class="memdesc:acb7a2fd7f33039ab041c83beca2b85f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a ChatEmbed to an IEmbed parameters.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#acb7a2fd7f33039ab041c83beca2b85f0">More...</a><br /></td></tr>
<tr class="separator:acb7a2fd7f33039ab041c83beca2b85f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-methods" name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a3cf5b9ba9079d6c9f582f61b5894f7c1"><td class="memItemLeft" align="right" valign="top">static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a3cf5b9ba9079d6c9f582f61b5894f7c1">NormalizeMentions</a> (string fromDiscord)</td></tr>
<tr class="memdesc:a3cf5b9ba9079d6c9f582f61b5894f7c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Normalize a discord mention string.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a3cf5b9ba9079d6c9f582f61b5894f7c1">More...</a><br /></td></tr>
<tr class="separator:a3cf5b9ba9079d6c9f582f61b5894f7c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a15e3d6b18f2a38152106f6f3c1a933"><td class="memItemLeft" align="right" valign="top">static List&lt; IEmbedField &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a9a15e3d6b18f2a38152106f6f3c1a933">BuildUpdateEmbedFields</a> (<a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_revision_information.html">Models.RevisionInformation</a> revisionInformation, Version byondVersion, string gitHubOwner, string gitHubRepo, bool localCommitPushed)</td></tr>
<tr class="memdesc:a9a15e3d6b18f2a38152106f6f3c1a933"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a List&lt;T&gt; of IEmbedFields for a discord update embed.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a9a15e3d6b18f2a38152106f6f3c1a933">More...</a><br /></td></tr>
<tr class="separator:a9a15e3d6b18f2a38152106f6f3c1a933"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a73f7fae07fc8d7efc90b6464dc2eca79"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html">IAssemblyInformationProvider</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a73f7fae07fc8d7efc90b6464dc2eca79">assemblyInformationProvider</a></td></tr>
<tr class="memdesc:a73f7fae07fc8d7efc90b6464dc2eca79"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IAssemblyInformationProvider for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html" title="IProvider for the Discord app.">DiscordProvider</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a73f7fae07fc8d7efc90b6464dc2eca79">More...</a><br /></td></tr>
<tr class="separator:a73f7fae07fc8d7efc90b6464dc2eca79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7dd055bf64dcff2228ae66fdcff7e92"><td class="memItemLeft" align="right" valign="top">readonly ServiceProvider&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ae7dd055bf64dcff2228ae66fdcff7e92">serviceProvider</a></td></tr>
<tr class="memdesc:ae7dd055bf64dcff2228ae66fdcff7e92"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ServiceProvider containing Discord services.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ae7dd055bf64dcff2228ae66fdcff7e92">More...</a><br /></td></tr>
<tr class="separator:ae7dd055bf64dcff2228ae66fdcff7e92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a044ae95d278a4ed4a6a02449e24e8146"><td class="memItemLeft" align="right" valign="top">readonly List&lt; ulong &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a044ae95d278a4ed4a6a02449e24e8146">mappedChannels</a></td></tr>
<tr class="memdesc:a044ae95d278a4ed4a6a02449e24e8146"><td class="mdescLeft">&#160;</td><td class="mdescRight">List&lt;T&gt; of mapped channel Snowflakes.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a044ae95d278a4ed4a6a02449e24e8146">More...</a><br /></td></tr>
<tr class="separator:a044ae95d278a4ed4a6a02449e24e8146"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01881ab9506db0431f75db21224bf7e6"><td class="memItemLeft" align="right" valign="top">readonly object&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a01881ab9506db0431f75db21224bf7e6">connectDisconnectLock</a></td></tr>
<tr class="memdesc:a01881ab9506db0431f75db21224bf7e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock object used to sychronize connect/disconnect operations.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a01881ab9506db0431f75db21224bf7e6">More...</a><br /></td></tr>
<tr class="separator:a01881ab9506db0431f75db21224bf7e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ded452b4301f7d7dc776c15cbb76956"><td class="memItemLeft" align="right" valign="top">readonly bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a0ded452b4301f7d7dc776c15cbb76956">basedMeme</a></td></tr>
<tr class="memdesc:a0ded452b4301f7d7dc776c15cbb76956"><td class="mdescLeft">&#160;</td><td class="mdescRight">bool to enable based mode. Will auto reply with a youtube link to a video that says "based on the hardware that's installed in it" to anyone saying 'based on what?' case-insensitive.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a0ded452b4301f7d7dc776c15cbb76956">More...</a><br /></td></tr>
<tr class="separator:a0ded452b4301f7d7dc776c15cbb76956"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a182447c000f64abfb2e30336a6b9718f"><td class="memItemLeft" align="right" valign="top">readonly bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a182447c000f64abfb2e30336a6b9718f">deploymentBranding</a></td></tr>
<tr class="memdesc:a182447c000f64abfb2e30336a6b9718f"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the tgstation-server logo is shown in deployment embeds.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a182447c000f64abfb2e30336a6b9718f">More...</a><br /></td></tr>
<tr class="separator:a182447c000f64abfb2e30336a6b9718f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96681c4d5a393d80bd2ff022eed95ee5"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#af16952d12561118ecebc3d8ccf510221">DiscordDMOutputDisplayType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a96681c4d5a393d80bd2ff022eed95ee5">outputDisplayType</a></td></tr>
<tr class="memdesc:a96681c4d5a393d80bd2ff022eed95ee5"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#af16952d12561118ecebc3d8ccf510221" title="When the DM output section of Discord deployment embeds should be shown.">DiscordDMOutputDisplayType</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a96681c4d5a393d80bd2ff022eed95ee5">More...</a><br /></td></tr>
<tr class="separator:a96681c4d5a393d80bd2ff022eed95ee5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b6a170efd3f74b5c5f12cc41d7d0b5f"><td class="memItemLeft" align="right" valign="top">CancellationTokenSource&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a6b6a170efd3f74b5c5f12cc41d7d0b5f">gatewayCts</a></td></tr>
<tr class="memdesc:a6b6a170efd3f74b5c5f12cc41d7d0b5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The CancellationTokenSource for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a331c4c449274e3681d766a5901e35a0b" title="The Task representing the lifetime of the client.">gatewayTask</a>.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a6b6a170efd3f74b5c5f12cc41d7d0b5f">More...</a><br /></td></tr>
<tr class="separator:a6b6a170efd3f74b5c5f12cc41d7d0b5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c68a7a7bcd8b837c8b9b128890e9015"><td class="memItemLeft" align="right" valign="top">TaskCompletionSource&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a9c68a7a7bcd8b837c8b9b128890e9015">gatewayReadyTcs</a></td></tr>
<tr class="memdesc:a9c68a7a7bcd8b837c8b9b128890e9015"><td class="mdescLeft">&#160;</td><td class="mdescRight">The TaskCompletionSource for the initial gateway connection event.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a9c68a7a7bcd8b837c8b9b128890e9015">More...</a><br /></td></tr>
<tr class="separator:a9c68a7a7bcd8b837c8b9b128890e9015"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a331c4c449274e3681d766a5901e35a0b"><td class="memItemLeft" align="right" valign="top">Task&lt; Result &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a331c4c449274e3681d766a5901e35a0b">gatewayTask</a></td></tr>
<tr class="memdesc:a331c4c449274e3681d766a5901e35a0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Task representing the lifetime of the client.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a331c4c449274e3681d766a5901e35a0b">More...</a><br /></td></tr>
<tr class="separator:a331c4c449274e3681d766a5901e35a0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38455db633742e90572b9a83aa681831"><td class="memItemLeft" align="right" valign="top">Snowflake&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a38455db633742e90572b9a83aa681831">currentUserId</a></td></tr>
<tr class="memdesc:a38455db633742e90572b9a83aa681831"><td class="mdescLeft">&#160;</td><td class="mdescRight">The bot's Snowflake.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a38455db633742e90572b9a83aa681831">More...</a><br /></td></tr>
<tr class="separator:a38455db633742e90572b9a83aa681831"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a317ac4b2144b7b5d2764063b158c7f54"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a317ac4b2144b7b5d2764063b158c7f54">disposing</a></td></tr>
<tr class="memdesc:a317ac4b2144b7b5d2764063b158c7f54"><td class="mdescLeft">&#160;</td><td class="mdescRight">If <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ae7dd055bf64dcff2228ae66fdcff7e92" title="The ServiceProvider containing Discord services.">serviceProvider</a> is being disposed.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a317ac4b2144b7b5d2764063b158c7f54">More...</a><br /></td></tr>
<tr class="separator:a317ac4b2144b7b5d2764063b158c7f54"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-attribs" name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a1896b3a7ddd7b500c2624d3676b64eaf"><td class="memItemLeft" align="right" valign="top">static readonly ChannelType[]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a1896b3a7ddd7b500c2624d3676b64eaf">SupportedGuildChannelTypes</a></td></tr>
<tr class="memdesc:a1896b3a7ddd7b500c2624d3676b64eaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ChannelTypes supported by the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html" title="IProvider for the Discord app.">DiscordProvider</a> for mapping.   <a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a1896b3a7ddd7b500c2624d3676b64eaf">More...</a><br /></td></tr>
<tr class="separator:a1896b3a7ddd7b500c2624d3676b64eaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p ><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html" title="For interacting with a chat service.">IProvider</a> for the Discord app.  </p>

<p class="definition">Definition at line <a class="el" href="_discord_provider_8cs_source.html#l00041">41</a> of file <a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a3163c3b5aef21de8175e88a45ce37172" name="a3163c3b5aef21de8175e88a45ce37172"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3163c3b5aef21de8175e88a45ce37172">&#9670;&#160;</a></span>DiscordProvider()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.DiscordProvider </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_i_job_manager.html">IJobManager</a>&#160;</td>
          <td class="paramname"><em>jobManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_utils_1_1_i_async_delayer.html">IAsyncDelayer</a>&#160;</td>
          <td class="paramname"><em>asyncDelayer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ILogger&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html">DiscordProvider</a> &gt;&#160;</td>
          <td class="paramname"><em>logger</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html">IAssemblyInformationProvider</a>&#160;</td>
          <td class="paramname"><em>assemblyInformationProvider</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_chat_bot.html">ChatBot</a>&#160;</td>
          <td class="paramname"><em>chatBot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a new instance of the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html" title="IProvider for the Discord app.">DiscordProvider</a> class.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">jobManager</td><td>The IJobManager for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html">Provider</a>.</td></tr>
    <tr><td class="paramname">asyncDelayer</td><td>The IAsyncDelayer for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html">Provider</a>.</td></tr>
    <tr><td class="paramname">logger</td><td>The ILogger for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html">Provider</a>.</td></tr>
    <tr><td class="paramname">assemblyInformationProvider</td><td>The value of <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a73f7fae07fc8d7efc90b6464dc2eca79" title="The IAssemblyInformationProvider for the DiscordProvider.">assemblyInformationProvider</a>.</td></tr>
    <tr><td class="paramname">chatBot</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#af4c3c897c6aadc96dfbb08ff893dc602" title="The ChatBot the Provider is for.">ChatBot</a> for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html">Provider</a>.</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_discord_provider_8cs_source.html#l00190">190</a> of file <a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  196</span>            : base(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#aa36ffb34c69e4a990830e49f97b7c142">jobManager</a>, asyncDelayer, logger, chatBot)</div>
<div class="line"><span class="lineno">  197</span>        {</div>
<div class="line"><span class="lineno">  198</span>            this.assemblyInformationProvider = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a73f7fae07fc8d7efc90b6464dc2eca79">assemblyInformationProvider</a> ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a73f7fae07fc8d7efc90b6464dc2eca79">assemblyInformationProvider</a>));</div>
<div class="line"><span class="lineno">  199</span> </div>
<div class="line"><span class="lineno">  200</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a044ae95d278a4ed4a6a02449e24e8146">mappedChannels</a> = <span class="keyword">new</span> List&lt;ulong&gt;();</div>
<div class="line"><span class="lineno">  201</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a01881ab9506db0431f75db21224bf7e6">connectDisconnectLock</a> = <span class="keyword">new</span> object();</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span>            var csb = <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_discord_connection_string_builder.html">DiscordConnectionStringBuilder</a>(chatBot.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_chat_bot_settings.html#acdc14bc7df5569305c8a5af42e61f1da">ConnectionString</a>);</div>
<div class="line"><span class="lineno">  204</span>            var botToken = csb.BotToken;</div>
<div class="line"><span class="lineno">  205</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a0ded452b4301f7d7dc776c15cbb76956">basedMeme</a> = csb.BasedMeme;</div>
<div class="line"><span class="lineno">  206</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a96681c4d5a393d80bd2ff022eed95ee5">outputDisplayType</a> = csb.DMOutputDisplay;</div>
<div class="line"><span class="lineno">  207</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a182447c000f64abfb2e30336a6b9718f">deploymentBranding</a> = csb.DeploymentBranding;</div>
<div class="line"><span class="lineno">  208</span> </div>
<div class="line"><span class="lineno">  209</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ae7dd055bf64dcff2228ae66fdcff7e92">serviceProvider</a> = <span class="keyword">new</span> ServiceCollection()</div>
<div class="line"><span class="lineno">  210</span>                .AddDiscordGateway(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ae7dd055bf64dcff2228ae66fdcff7e92">serviceProvider</a> =&gt; botToken)</div>
<div class="line"><span class="lineno">  211</span>                .Configure&lt;DiscordGatewayClientOptions&gt;(options =&gt; options.Intents |= GatewayIntents.MessageContents)</div>
<div class="line"><span class="lineno">  212</span>                .AddSingleton(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ae7dd055bf64dcff2228ae66fdcff7e92">serviceProvider</a> =&gt; (IDiscordResponders)<span class="keyword">this</span>)</div>
<div class="line"><span class="lineno">  213</span>                .AddResponder&lt;DiscordForwardingResponder&gt;()</div>
<div class="line"><span class="lineno">  214</span>                .BuildServiceProvider();</div>
<div class="line"><span class="lineno">  215</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_discord_connection_string_builder_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_discord_connection_string_builder.html">Tgstation.Server.Api.Models.DiscordConnectionStringBuilder</a></div><div class="ttdoc">ChatConnectionStringBuilder for ChatProvider.Discord.</div><div class="ttdef"><b>Definition:</b> <a href="_discord_connection_string_builder_8cs_source.html#l00011">DiscordConnectionStringBuilder.cs:12</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_chat_bot_settings_html_acdc14bc7df5569305c8a5af42e61f1da"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_internal_1_1_chat_bot_settings.html#acdc14bc7df5569305c8a5af42e61f1da">Tgstation.Server.Api.Models.Internal.ChatBotSettings.ConnectionString</a></div><div class="ttdeci">string? ConnectionString</div><div class="ttdoc">The information used to connect to the Provider.</div><div class="ttdef"><b>Definition:</b> <a href="_chat_bot_settings_8cs_source.html#l00044">ChatBotSettings.cs:44</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_html_a01881ab9506db0431f75db21224bf7e6"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a01881ab9506db0431f75db21224bf7e6">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.connectDisconnectLock</a></div><div class="ttdeci">readonly object connectDisconnectLock</div><div class="ttdoc">Lock object used to sychronize connect/disconnect operations.</div><div class="ttdef"><b>Definition:</b> <a href="_discord_provider_8cs_source.html#l00086">DiscordProvider.cs:86</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_html_a044ae95d278a4ed4a6a02449e24e8146"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a044ae95d278a4ed4a6a02449e24e8146">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.mappedChannels</a></div><div class="ttdeci">readonly List&lt; ulong &gt; mappedChannels</div><div class="ttdoc">List&lt;T&gt; of mapped channel Snowflakes.</div><div class="ttdef"><b>Definition:</b> <a href="_discord_provider_8cs_source.html#l00081">DiscordProvider.cs:81</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_html_a0ded452b4301f7d7dc776c15cbb76956"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a0ded452b4301f7d7dc776c15cbb76956">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.basedMeme</a></div><div class="ttdeci">readonly bool basedMeme</div><div class="ttdoc">bool to enable based mode. Will auto reply with a youtube link to a video that says &quot;based on the har...</div><div class="ttdef"><b>Definition:</b> <a href="_discord_provider_8cs_source.html#l00091">DiscordProvider.cs:91</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_html_a182447c000f64abfb2e30336a6b9718f"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a182447c000f64abfb2e30336a6b9718f">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.deploymentBranding</a></div><div class="ttdeci">readonly bool deploymentBranding</div><div class="ttdoc">If the tgstation-server logo is shown in deployment embeds.</div><div class="ttdef"><b>Definition:</b> <a href="_discord_provider_8cs_source.html#l00096">DiscordProvider.cs:96</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_html_a73f7fae07fc8d7efc90b6464dc2eca79"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a73f7fae07fc8d7efc90b6464dc2eca79">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.assemblyInformationProvider</a></div><div class="ttdeci">readonly IAssemblyInformationProvider assemblyInformationProvider</div><div class="ttdoc">The IAssemblyInformationProvider for the DiscordProvider.</div><div class="ttdef"><b>Definition:</b> <a href="_discord_provider_8cs_source.html#l00071">DiscordProvider.cs:71</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_html_a96681c4d5a393d80bd2ff022eed95ee5"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a96681c4d5a393d80bd2ff022eed95ee5">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.outputDisplayType</a></div><div class="ttdeci">readonly DiscordDMOutputDisplayType outputDisplayType</div><div class="ttdoc">The DiscordDMOutputDisplayType.</div><div class="ttdef"><b>Definition:</b> <a href="_discord_provider_8cs_source.html#l00101">DiscordProvider.cs:101</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_html_ae7dd055bf64dcff2228ae66fdcff7e92"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ae7dd055bf64dcff2228ae66fdcff7e92">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.serviceProvider</a></div><div class="ttdeci">readonly ServiceProvider serviceProvider</div><div class="ttdoc">The ServiceProvider containing Discord services.</div><div class="ttdef"><b>Definition:</b> <a href="_discord_provider_8cs_source.html#l00076">DiscordProvider.cs:76</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider_html_aa36ffb34c69e4a990830e49f97b7c142"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#aa36ffb34c69e4a990830e49f97b7c142">Tgstation.Server.Host.Components.Chat.Providers.Provider.jobManager</a></div><div class="ttdeci">readonly IJobManager jobManager</div><div class="ttdoc">The IJobManager for the Provider.</div><div class="ttdef"><b>Definition:</b> <a href="_provider_8cs_source.html#l00041">Provider.cs:41</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_discord_provider_8cs_source.html#l00071">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.assemblyInformationProvider</a>, <a class="el" href="_discord_provider_8cs_source.html#l00091">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.basedMeme</a>, <a class="el" href="_discord_provider_8cs_source.html#l00086">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.connectDisconnectLock</a>, <a class="el" href="_chat_bot_settings_8cs_source.html#l00044">Tgstation.Server.Api.Models.Internal.ChatBotSettings.ConnectionString</a>, <a class="el" href="_discord_provider_8cs_source.html#l00096">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.deploymentBranding</a>, <a class="el" href="_discord_provider_8cs_source.html#l00081">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.mappedChannels</a>, <a class="el" href="_discord_provider_8cs_source.html#l00101">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.outputDisplayType</a>, and <a class="el" href="_discord_provider_8cs_source.html#l00076">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.serviceProvider</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a9a15e3d6b18f2a38152106f6f3c1a933" name="a9a15e3d6b18f2a38152106f6f3c1a933"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a15e3d6b18f2a38152106f6f3c1a933">&#9670;&#160;</a></span>BuildUpdateEmbedFields()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static List&lt; IEmbedField &gt; Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.BuildUpdateEmbedFields </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_revision_information.html">Models.RevisionInformation</a>&#160;</td>
          <td class="paramname"><em>revisionInformation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Version&#160;</td>
          <td class="paramname"><em>byondVersion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>gitHubOwner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>gitHubRepo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>localCommitPushed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a List&lt;T&gt; of IEmbedFields for a discord update embed.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">revisionInformation</td><td>The RevisionInformation of the deployment.</td></tr>
    <tr><td class="paramname">byondVersion</td><td>The BYOND Version of the deployment.</td></tr>
    <tr><td class="paramname">gitHubOwner</td><td>The repository GitHub owner, if any.</td></tr>
    <tr><td class="paramname">gitHubRepo</td><td>The repository GitHub name, if any.</td></tr>
    <tr><td class="paramname">localCommitPushed</td><td><code>true</code> if the local deployment commit was pushed to the remote repository.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A new List&lt;T&gt; of IEmbedFields to use.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_discord_provider_8cs_source.html#l00144">144</a> of file <a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  150</span>        {</div>
<div class="line"><span class="lineno">  151</span>            <span class="keywordtype">bool</span> gitHub = gitHubOwner != <span class="keyword">null</span> &amp;&amp; gitHubRepo != <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  152</span>            var fields = <span class="keyword">new</span> List&lt;IEmbedField&gt;</div>
<div class="line"><span class="lineno">  153</span>            {</div>
<div class="line"><span class="lineno">  154</span>                <span class="keyword">new</span> EmbedField(</div>
<div class="line"><span class="lineno">  155</span>                    <span class="stringliteral">&quot;BYOND Version&quot;</span>,</div>
<div class="line"><span class="lineno">  156</span>                    $<span class="stringliteral">&quot;{byondVersion.Major}.{byondVersion.Minor}{(byondVersion.Build &gt; 0 ? $&quot;</span>.{byondVersion.Build}<span class="stringliteral">&quot; : String.Empty)}&quot;</span>,</div>
<div class="line"><span class="lineno">  157</span>                    <span class="keyword">true</span>),</div>
<div class="line"><span class="lineno">  158</span>                <span class="keyword">new</span> EmbedField(</div>
<div class="line"><span class="lineno">  159</span>                    <span class="stringliteral">&quot;Local Commit&quot;</span>,</div>
<div class="line"><span class="lineno">  160</span>                    localCommitPushed &amp;&amp; gitHub</div>
<div class="line"><span class="lineno">  161</span>                        ? $<span class="stringliteral">&quot;[{revisionInformation.CommitSha[..7]}](https://github.com/{gitHubOwner}/{gitHubRepo}/commit/{revisionInformation.CommitSha})&quot;</span></div>
<div class="line"><span class="lineno">  162</span>                        : revisionInformation.CommitSha[..7],</div>
<div class="line"><span class="lineno">  163</span>                    <span class="keyword">true</span>),</div>
<div class="line"><span class="lineno">  164</span>                <span class="keyword">new</span> EmbedField(</div>
<div class="line"><span class="lineno">  165</span>                    <span class="stringliteral">&quot;Branch Commit&quot;</span>,</div>
<div class="line"><span class="lineno">  166</span>                    gitHub</div>
<div class="line"><span class="lineno">  167</span>                        ? $<span class="stringliteral">&quot;[{revisionInformation.OriginCommitSha[..7]}](https://github.com/{gitHubOwner}/{gitHubRepo}/commit/{revisionInformation.OriginCommitSha})&quot;</span></div>
<div class="line"><span class="lineno">  168</span>                        : revisionInformation.OriginCommitSha[..7],</div>
<div class="line"><span class="lineno">  169</span>                    <span class="keyword">true</span>),</div>
<div class="line"><span class="lineno">  170</span>            };</div>
<div class="line"><span class="lineno">  171</span> </div>
<div class="line"><span class="lineno">  172</span>            fields.AddRange((revisionInformation.ActiveTestMerges ?? Enumerable.Empty&lt;<a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_rev_info_test_merge.html">RevInfoTestMerge</a>&gt;())</div>
<div class="line"><span class="lineno">  173</span>                .Select(x =&gt; x.TestMerge)</div>
<div class="line"><span class="lineno">  174</span>                .Select(x =&gt; <span class="keyword">new</span> EmbedField(</div>
<div class="line"><span class="lineno">  175</span>                    $<span class="stringliteral">&quot;#{x.Number}&quot;</span>,</div>
<div class="line"><span class="lineno">  176</span>                    $<span class="stringliteral">&quot;[{x.TitleAtMerge}]({x.Url}) by _[@{x.Author}](https://github.com/{x.Author})_{Environment.NewLine}Commit: [{x.TargetCommitSha[..7]}](https://github.com/{gitHubOwner}/{gitHubRepo}/commit/{x.TargetCommitSha}){(String.IsNullOrWhiteSpace(x.Comment) ? String.Empty : $&quot;</span>{Environment.NewLine}_**{x.Comment}**_<span class="stringliteral">&quot;)}&quot;</span>,</div>
<div class="line"><span class="lineno">  177</span>                    <span class="keyword">false</span>)));</div>
<div class="line"><span class="lineno">  178</span> </div>
<div class="line"><span class="lineno">  179</span>            <span class="keywordflow">return</span> fields;</div>
<div class="line"><span class="lineno">  180</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_models_1_1_rev_info_test_merge_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_rev_info_test_merge.html">Tgstation.Server.Host.Models.RevInfoTestMerge</a></div><div class="ttdoc">Many to many relationship for Models.RevisionInformation and Models.TestMerge.</div><div class="ttdef"><b>Definition:</b> <a href="_rev_info_test_merge_8cs_source.html#l00008">RevInfoTestMerge.cs:9</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="_discord_provider_8cs_source.html#l00379">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.SendUpdateMessage()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_a9a15e3d6b18f2a38152106f6f3c1a933_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_a9a15e3d6b18f2a38152106f6f3c1a933_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_a9a15e3d6b18f2a38152106f6f3c1a933_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_a9a15e3d6b18f2a38152106f6f3c1a933_icgraph">
<area shape="rect" title="Create a List&lt;T&gt; of IEmbedFields for a discord update embed." alt="" coords="288,5,523,60"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#aababa7da5ca6ef1b92dfccff719e12ad" title=" " alt="" coords="5,5,240,60"/>
</map>
</div>

</div>
</div>
<a id="aaa5c800b8dc532cb596ebd075e14e48e" name="aaa5c800b8dc532cb596ebd075e14e48e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa5c800b8dc532cb596ebd075e14e48e">&#9670;&#160;</a></span>Connect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">override async Task Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.Connect </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Attempt to connect the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html">Provider</a>. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a96305dc74c77224130e4067f19b59407">Tgstation.Server.Host.Components.Chat.Providers.Provider</a>.</p>

<p class="definition">Definition at line <a class="el" href="_discord_provider_8cs_source.html#l00631">631</a> of file <a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  632</span>        {</div>
<div class="line"><span class="lineno">  633</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  634</span>            {</div>
<div class="line"><span class="lineno">  635</span>                lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a01881ab9506db0431f75db21224bf7e6">connectDisconnectLock</a>)</div>
<div class="line"><span class="lineno">  636</span>                {</div>
<div class="line"><span class="lineno">  637</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a6b6a170efd3f74b5c5f12cc41d7d0b5f">gatewayCts</a> != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  638</span>                        <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Discord gateway still active!&quot;</span>);</div>
<div class="line"><span class="lineno">  639</span> </div>
<div class="line"><span class="lineno">  640</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a6b6a170efd3f74b5c5f12cc41d7d0b5f">gatewayCts</a> = <span class="keyword">new</span> CancellationTokenSource();</div>
<div class="line"><span class="lineno">  641</span>                }</div>
<div class="line"><span class="lineno">  642</span> </div>
<div class="line"><span class="lineno">  643</span>                var gatewayCancellationToken = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a6b6a170efd3f74b5c5f12cc41d7d0b5f">gatewayCts</a>.Token;</div>
<div class="line"><span class="lineno">  644</span>                var gatewayClient = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ae7dd055bf64dcff2228ae66fdcff7e92">serviceProvider</a>.GetRequiredService&lt;DiscordGatewayClient&gt;();</div>
<div class="line"><span class="lineno">  645</span> </div>
<div class="line"><span class="lineno">  646</span>                Task&lt;Result&gt; localGatewayTask;</div>
<div class="line"><span class="lineno">  647</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a9c68a7a7bcd8b837c8b9b128890e9015">gatewayReadyTcs</a> = <span class="keyword">new</span> TaskCompletionSource();</div>
<div class="line"><span class="lineno">  648</span> </div>
<div class="line"><span class="lineno">  649</span>                <span class="keyword">using </span>var gatewayConnectionAbortRegistration = cancellationToken.Register(() =&gt; <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a9c68a7a7bcd8b837c8b9b128890e9015">gatewayReadyTcs</a>.TrySetCanceled());</div>
<div class="line"><span class="lineno">  650</span>                gatewayCancellationToken.Register(() =&gt; <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogTrace(<span class="stringliteral">&quot;Stopping gateway client...&quot;</span>));</div>
<div class="line"><span class="lineno">  651</span> </div>
<div class="line"><span class="lineno">  652</span>                <span class="comment">// reconnects keep happening until we stop or it faults, our auto-reconnector will handle the latter</span></div>
<div class="line"><span class="lineno">  653</span>                localGatewayTask = gatewayClient.RunAsync(gatewayCancellationToken);</div>
<div class="line"><span class="lineno">  654</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  655</span>                {</div>
<div class="line"><span class="lineno">  656</span>                    await Task.WhenAny(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a9c68a7a7bcd8b837c8b9b128890e9015">gatewayReadyTcs</a>.Task, localGatewayTask);</div>
<div class="line"><span class="lineno">  657</span> </div>
<div class="line"><span class="lineno">  658</span>                    cancellationToken.ThrowIfCancellationRequested();</div>
<div class="line"><span class="lineno">  659</span>                    <span class="keywordflow">if</span> (localGatewayTask.IsCompleted)</div>
<div class="line"><span class="lineno">  660</span>                        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.ChatCannotConnectProvider);</div>
<div class="line"><span class="lineno">  661</span> </div>
<div class="line"><span class="lineno">  662</span>                    var userClient = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ae7dd055bf64dcff2228ae66fdcff7e92">serviceProvider</a>.GetRequiredService&lt;IDiscordRestUserAPI&gt;();</div>
<div class="line"><span class="lineno">  663</span> </div>
<div class="line"><span class="lineno">  664</span>                    <span class="keyword">using </span>var localCombinedCts = CancellationTokenSource.CreateLinkedTokenSource(cancellationToken, gatewayCancellationToken);</div>
<div class="line"><span class="lineno">  665</span>                    var localCombinedCancellationToken = localCombinedCts.Token;</div>
<div class="line"><span class="lineno">  666</span>                    var currentUserResult = await userClient.GetCurrentUserAsync(localCombinedCancellationToken);</div>
<div class="line"><span class="lineno">  667</span>                    <span class="keywordflow">if</span> (!currentUserResult.IsSuccess)</div>
<div class="line"><span class="lineno">  668</span>                    {</div>
<div class="line"><span class="lineno">  669</span>                        localCombinedCancellationToken.ThrowIfCancellationRequested();</div>
<div class="line"><span class="lineno">  670</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogWarning(<span class="stringliteral">&quot;Unable to retrieve current user: {result}&quot;</span>, currentUserResult.LogFormat());</div>
<div class="line"><span class="lineno">  671</span>                        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">JobException</a>(<a class="code hl_enumeration" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">ErrorCode</a>.ChatCannotConnectProvider);</div>
<div class="line"><span class="lineno">  672</span>                    }</div>
<div class="line"><span class="lineno">  673</span> </div>
<div class="line"><span class="lineno">  674</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a38455db633742e90572b9a83aa681831">currentUserId</a> = currentUserResult.Entity.ID;</div>
<div class="line"><span class="lineno">  675</span>                }</div>
<div class="line"><span class="lineno">  676</span>                <span class="keywordflow">finally</span></div>
<div class="line"><span class="lineno">  677</span>                {</div>
<div class="line"><span class="lineno">  678</span>                    <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a331c4c449274e3681d766a5901e35a0b">gatewayTask</a> = localGatewayTask;</div>
<div class="line"><span class="lineno">  679</span>                }</div>
<div class="line"><span class="lineno">  680</span>            }</div>
<div class="line"><span class="lineno">  681</span>            <span class="keywordflow">catch</span></div>
<div class="line"><span class="lineno">  682</span>            {</div>
<div class="line"><span class="lineno">  683</span>                <span class="comment">// will handle cleanup</span></div>
<div class="line"><span class="lineno">  684</span>                <span class="comment">// DCT: Musn&#39;t abort</span></div>
<div class="line"><span class="lineno">  685</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ae4da9b25c89c74b4e2d70fdfb7f8c894">DisconnectImpl</a>(CancellationToken.None);</div>
<div class="line"><span class="lineno">  686</span>                <span class="keywordflow">throw</span>;</div>
<div class="line"><span class="lineno">  687</span>            }</div>
<div class="line"><span class="lineno">  688</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_html_a331c4c449274e3681d766a5901e35a0b"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a331c4c449274e3681d766a5901e35a0b">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.gatewayTask</a></div><div class="ttdeci">Task&lt; Result &gt; gatewayTask</div><div class="ttdoc">The Task representing the lifetime of the client.</div><div class="ttdef"><b>Definition:</b> <a href="_discord_provider_8cs_source.html#l00116">DiscordProvider.cs:116</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_html_a38455db633742e90572b9a83aa681831"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a38455db633742e90572b9a83aa681831">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.currentUserId</a></div><div class="ttdeci">Snowflake currentUserId</div><div class="ttdoc">The bot's Snowflake.</div><div class="ttdef"><b>Definition:</b> <a href="_discord_provider_8cs_source.html#l00121">DiscordProvider.cs:121</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_html_a6b6a170efd3f74b5c5f12cc41d7d0b5f"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a6b6a170efd3f74b5c5f12cc41d7d0b5f">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.gatewayCts</a></div><div class="ttdeci">CancellationTokenSource gatewayCts</div><div class="ttdoc">The CancellationTokenSource for the gatewayTask.</div><div class="ttdef"><b>Definition:</b> <a href="_discord_provider_8cs_source.html#l00106">DiscordProvider.cs:106</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_html_a9c68a7a7bcd8b837c8b9b128890e9015"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a9c68a7a7bcd8b837c8b9b128890e9015">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.gatewayReadyTcs</a></div><div class="ttdeci">TaskCompletionSource gatewayReadyTcs</div><div class="ttdoc">The TaskCompletionSource for the initial gateway connection event.</div><div class="ttdef"><b>Definition:</b> <a href="_discord_provider_8cs_source.html#l00111">DiscordProvider.cs:111</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_html_ae4da9b25c89c74b4e2d70fdfb7f8c894"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ae4da9b25c89c74b4e2d70fdfb7f8c894">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.DisconnectImpl</a></div><div class="ttdeci">override async Task DisconnectImpl(CancellationToken cancellationToken)</div><div class="ttdoc">Gracefully disconnects the provider. A Task representing the running operation.</div><div class="ttdef"><b>Definition:</b> <a href="_discord_provider_8cs_source.html#l00691">DiscordProvider.cs:691</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider_html_ab24337ff80dfef1a9657f7106758a8c3"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Tgstation.Server.Host.Components.Chat.Providers.Provider.Logger</a></div><div class="ttdeci">ILogger&lt; Provider &gt; Logger</div><div class="ttdoc">The ILogger for the Provider.</div><div class="ttdef"><b>Definition:</b> <a href="_provider_8cs_source.html#l00036">Provider.cs:36</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_jobs_1_1_job_exception.html">Tgstation.Server.Host.Jobs.JobException</a></div><div class="ttdoc">Operation exceptions thrown from the context of a Models.Job.</div><div class="ttdef"><b>Definition:</b> <a href="_job_exception_8cs_source.html#l00010">JobException.cs:11</a></div></div>
<div class="ttc" id="anamespace_tgstation_1_1_server_1_1_api_1_1_models_html_a1a6adb59dd51244efabf4e548e7075c8"><div class="ttname"><a href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#a1a6adb59dd51244efabf4e548e7075c8">Tgstation.Server.Api.Models.ErrorCode</a></div><div class="ttdeci">ErrorCode</div><div class="ttdoc">Types of Response.ErrorMessageResponses that the API may return.</div><div class="ttdef"><b>Definition:</b> <a href="_error_code_8cs_source.html#l00010">ErrorCode.cs:11</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_discord_provider_8cs_source.html#l00086">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.connectDisconnectLock</a>, <a class="el" href="_discord_provider_8cs_source.html#l00121">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.currentUserId</a>, <a class="el" href="_discord_provider_8cs_source.html#l00691">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.DisconnectImpl()</a>, <a class="el" href="_discord_provider_8cs_source.html#l00106">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.gatewayCts</a>, <a class="el" href="_discord_provider_8cs_source.html#l00111">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.gatewayReadyTcs</a>, <a class="el" href="_discord_provider_8cs_source.html#l00116">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.gatewayTask</a>, <a class="el" href="_provider_8cs_source.html#l00036">Tgstation.Server.Host.Components.Chat.Providers.Provider.Logger</a>, and <a class="el" href="_discord_provider_8cs_source.html#l00076">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.serviceProvider</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_aaa5c800b8dc532cb596ebd075e14e48e_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_aaa5c800b8dc532cb596ebd075e14e48e_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_aaa5c800b8dc532cb596ebd075e14e48e_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_aaa5c800b8dc532cb596ebd075e14e48e_cgraph">
<area shape="rect" title="Attempt to connect the Provider. A Task representing the running operation." alt="" coords="5,5,259,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ae4da9b25c89c74b4e2d70fdfb7f8c894" title="Gracefully disconnects the provider. A Task representing the running operation." alt="" coords="307,5,601,45"/>
</map>
</div>

</div>
</div>
<a id="acb7a2fd7f33039ab041c83beca2b85f0" name="acb7a2fd7f33039ab041c83beca2b85f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb7a2fd7f33039ab041c83beca2b85f0">&#9670;&#160;</a></span>ConvertEmbed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Optional&lt; IReadOnlyList&lt; IEmbed &gt; &gt; Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.ConvertEmbed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html">ChatEmbed</a>&#160;</td>
          <td class="paramname"><em>embed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert a ChatEmbed to an IEmbed parameters.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">embed</td><td>The ChatEmbed to convert.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The parameter for sending a single IEmbed.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_discord_provider_8cs_source.html#l00928">928</a> of file <a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  929</span>        {</div>
<div class="line"><span class="lineno">  930</span>            <span class="keywordflow">if</span> (embed == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  931</span>                <span class="keywordflow">return</span> <span class="keywordflow">default</span>;</div>
<div class="line"><span class="lineno">  932</span> </div>
<div class="line"><span class="lineno">  933</span>            var embedErrors = <span class="keyword">new</span> List&lt;string&gt;();</div>
<div class="line"><span class="lineno">  934</span>            Optional&lt;Color&gt; colour = <span class="keywordflow">default</span>;</div>
<div class="line"><span class="lineno">  935</span>            <span class="keywordflow">if</span> (embed.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html#ac1dc32e2f97bbf3bec5cf94f2d23a6ab">Colour</a> != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  936</span>                <span class="keywordflow">if</span> (Int32.TryParse(embed.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html#ac1dc32e2f97bbf3bec5cf94f2d23a6ab">Colour</a>[1..], NumberStyles.HexNumber, CultureInfo.InvariantCulture, out var argb))</div>
<div class="line"><span class="lineno">  937</span>                    colour = Color.FromArgb(argb);</div>
<div class="line"><span class="lineno">  938</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  939</span>                    embedErrors.Add(</div>
<div class="line"><span class="lineno">  940</span>                        String.Format(</div>
<div class="line"><span class="lineno">  941</span>                            CultureInfo.InvariantCulture,</div>
<div class="line"><span class="lineno">  942</span>                            <span class="stringliteral">&quot;Invalid embed colour: {0}&quot;</span>,</div>
<div class="line"><span class="lineno">  943</span>                            embed.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html#ac1dc32e2f97bbf3bec5cf94f2d23a6ab">Colour</a>));</div>
<div class="line"><span class="lineno">  944</span> </div>
<div class="line"><span class="lineno">  945</span>            <span class="keywordflow">if</span> (embed.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html#aed31634a7fec58a34f6dc11d14899a4f">Author</a> != <span class="keyword">null</span> &amp;&amp; String.IsNullOrWhiteSpace(embed.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html#aed31634a7fec58a34f6dc11d14899a4f">Author</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed_provider.html#a3f50b63bf7127580f30831ce5828ed7d">Name</a>))</div>
<div class="line"><span class="lineno">  946</span>            {</div>
<div class="line"><span class="lineno">  947</span>                embedErrors.Add(<span class="stringliteral">&quot;Null or whitespace embed author name!&quot;</span>);</div>
<div class="line"><span class="lineno">  948</span>                embed.Author = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  949</span>            }</div>
<div class="line"><span class="lineno">  950</span> </div>
<div class="line"><span class="lineno">  951</span>            List&lt;IEmbedField&gt; fields = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  952</span>            <span class="keywordflow">if</span> (embed.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html#aa9bc9b9154ce964c0ad222a676e9d4fe">Fields</a> != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  953</span>            {</div>
<div class="line"><span class="lineno">  954</span>                fields = <span class="keyword">new</span> List&lt;IEmbedField&gt;();</div>
<div class="line"><span class="lineno">  955</span>                var i = -1;</div>
<div class="line"><span class="lineno">  956</span>                <span class="keywordflow">foreach</span> (var field <span class="keywordflow">in</span> embed.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html#aa9bc9b9154ce964c0ad222a676e9d4fe">Fields</a>)</div>
<div class="line"><span class="lineno">  957</span>                {</div>
<div class="line"><span class="lineno">  958</span>                    ++i;</div>
<div class="line"><span class="lineno">  959</span>                    var invalid = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  960</span>                    <span class="keywordflow">if</span> (String.IsNullOrWhiteSpace(field.Name))</div>
<div class="line"><span class="lineno">  961</span>                    {</div>
<div class="line"><span class="lineno">  962</span>                        embedErrors.Add(</div>
<div class="line"><span class="lineno">  963</span>                            String.Format(</div>
<div class="line"><span class="lineno">  964</span>                                CultureInfo.InvariantCulture,</div>
<div class="line"><span class="lineno">  965</span>                                <span class="stringliteral">&quot;Null or whitespace field author at index {0}!&quot;</span>,</div>
<div class="line"><span class="lineno">  966</span>                                i));</div>
<div class="line"><span class="lineno">  967</span>                        invalid = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  968</span>                    }</div>
<div class="line"><span class="lineno">  969</span> </div>
<div class="line"><span class="lineno">  970</span>                    <span class="keywordflow">if</span> (String.IsNullOrWhiteSpace(field.Value))</div>
<div class="line"><span class="lineno">  971</span>                    {</div>
<div class="line"><span class="lineno">  972</span>                        embedErrors.Add(</div>
<div class="line"><span class="lineno">  973</span>                            String.Format(</div>
<div class="line"><span class="lineno">  974</span>                                CultureInfo.InvariantCulture,</div>
<div class="line"><span class="lineno">  975</span>                                <span class="stringliteral">&quot;Null or whitespace field author at index {0}!&quot;</span>,</div>
<div class="line"><span class="lineno">  976</span>                                i));</div>
<div class="line"><span class="lineno">  977</span>                        invalid = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  978</span>                    }</div>
<div class="line"><span class="lineno">  979</span> </div>
<div class="line"><span class="lineno">  980</span>                    <span class="keywordflow">if</span> (invalid)</div>
<div class="line"><span class="lineno">  981</span>                        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  982</span> </div>
<div class="line"><span class="lineno">  983</span>                    fields.Add(<span class="keyword">new</span> EmbedField(field.Name, field.Value)</div>
<div class="line"><span class="lineno">  984</span>                    {</div>
<div class="line"><span class="lineno">  985</span>                        IsInline = field.IsInline ?? default(Optional&lt;bool&gt;),</div>
<div class="line"><span class="lineno">  986</span>                    });</div>
<div class="line"><span class="lineno">  987</span>                }</div>
<div class="line"><span class="lineno">  988</span>            }</div>
<div class="line"><span class="lineno">  989</span> </div>
<div class="line"><span class="lineno">  990</span>            <span class="keywordflow">if</span> (embed.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html#aae5734cac6559662e08b929578dd1ce1">Footer</a> != <span class="keyword">null</span> &amp;&amp; String.IsNullOrWhiteSpace(embed.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html#aae5734cac6559662e08b929578dd1ce1">Footer</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed_footer.html#adc207935aa3debc2eb19fc986791a90a">Text</a>))</div>
<div class="line"><span class="lineno">  991</span>            {</div>
<div class="line"><span class="lineno">  992</span>                embedErrors.Add(<span class="stringliteral">&quot;Null or whitespace embed footer text!&quot;</span>);</div>
<div class="line"><span class="lineno">  993</span>                embed.Footer = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  994</span>            }</div>
<div class="line"><span class="lineno">  995</span> </div>
<div class="line"><span class="lineno">  996</span>            <span class="keywordflow">if</span> (embed.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html#a6c59721d839108e863af49145aca8db9">Image</a> != <span class="keyword">null</span> &amp;&amp; String.IsNullOrWhiteSpace(embed.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html#a6c59721d839108e863af49145aca8db9">Image</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed_media.html#ad4594ff9deeade634cb5ddf1d57b1557">Url</a>))</div>
<div class="line"><span class="lineno">  997</span>            {</div>
<div class="line"><span class="lineno">  998</span>                embedErrors.Add(<span class="stringliteral">&quot;Null or whitespace embed image url!&quot;</span>);</div>
<div class="line"><span class="lineno">  999</span>                embed.Image = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno"> 1000</span>            }</div>
<div class="line"><span class="lineno"> 1001</span> </div>
<div class="line"><span class="lineno"> 1002</span>            <span class="keywordflow">if</span> (embed.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html#a8e836bff6c7dd6b9470745dd0d62fd8c">Thumbnail</a> != <span class="keyword">null</span> &amp;&amp; String.IsNullOrWhiteSpace(embed.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html#a8e836bff6c7dd6b9470745dd0d62fd8c">Thumbnail</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed_media.html#ad4594ff9deeade634cb5ddf1d57b1557">Url</a>))</div>
<div class="line"><span class="lineno"> 1003</span>            {</div>
<div class="line"><span class="lineno"> 1004</span>                embedErrors.Add(<span class="stringliteral">&quot;Null or whitespace embed thumbnail url!&quot;</span>);</div>
<div class="line"><span class="lineno"> 1005</span>                embed.Thumbnail = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno"> 1006</span>            }</div>
<div class="line"><span class="lineno"> 1007</span> </div>
<div class="line"><span class="lineno"> 1008</span>            Optional&lt;DateTimeOffset&gt; timestampOptional = <span class="keywordflow">default</span>;</div>
<div class="line"><span class="lineno"> 1009</span>            <span class="keywordflow">if</span> (embed.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html#ab0df7991bef17f3398fbcca8b9de2afd">Timestamp</a> != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno"> 1010</span>                <span class="keywordflow">if</span> (DateTimeOffset.TryParse(embed.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html#ab0df7991bef17f3398fbcca8b9de2afd">Timestamp</a>, CultureInfo.InvariantCulture, DateTimeStyles.AssumeLocal, out var timestamp))</div>
<div class="line"><span class="lineno"> 1011</span>                    timestampOptional = timestamp.ToUniversalTime();</div>
<div class="line"><span class="lineno"> 1012</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1013</span>                    embedErrors.Add(</div>
<div class="line"><span class="lineno"> 1014</span>                        String.Format(</div>
<div class="line"><span class="lineno"> 1015</span>                            CultureInfo.InvariantCulture,</div>
<div class="line"><span class="lineno"> 1016</span>                            <span class="stringliteral">&quot;Invalid embed timestamp: {0}&quot;</span>,</div>
<div class="line"><span class="lineno"> 1017</span>                            embed.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html#ab0df7991bef17f3398fbcca8b9de2afd">Timestamp</a>));</div>
<div class="line"><span class="lineno"> 1018</span> </div>
<div class="line"><span class="lineno"> 1019</span>            var discordEmbed = <span class="keyword">new</span> Embed</div>
<div class="line"><span class="lineno"> 1020</span>            {</div>
<div class="line"><span class="lineno"> 1021</span>                Author = embed.Author != <span class="keyword">null</span></div>
<div class="line"><span class="lineno"> 1022</span>                    ? <span class="keyword">new</span> EmbedAuthor(embed.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html#aed31634a7fec58a34f6dc11d14899a4f">Author</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed_provider.html#a3f50b63bf7127580f30831ce5828ed7d">Name</a>)</div>
<div class="line"><span class="lineno"> 1023</span>                    {</div>
<div class="line"><span class="lineno"> 1024</span>                        IconUrl = embed.Author.IconUrl ?? <span class="keywordflow">default</span>(Optional&lt;string&gt;),</div>
<div class="line"><span class="lineno"> 1025</span>                        ProxyIconUrl = embed.Author.ProxyIconUrl ?? <span class="keywordflow">default</span>(Optional&lt;string&gt;),</div>
<div class="line"><span class="lineno"> 1026</span>                        Url = embed.Author.Url ?? <span class="keywordflow">default</span>(Optional&lt;string&gt;),</div>
<div class="line"><span class="lineno"> 1027</span>                    }</div>
<div class="line"><span class="lineno"> 1028</span>                    : <span class="keywordflow">default</span>(Optional&lt;IEmbedAuthor&gt;),</div>
<div class="line"><span class="lineno"> 1029</span>                Colour = colour,</div>
<div class="line"><span class="lineno"> 1030</span>                Description = embed.Description ?? <span class="keywordflow">default</span>(Optional&lt;string&gt;),</div>
<div class="line"><span class="lineno"> 1031</span>                Fields = fields ?? <span class="keywordflow">default</span>(Optional&lt;IReadOnlyList&lt;IEmbedField&gt;&gt;),</div>
<div class="line"><span class="lineno"> 1032</span>                Footer = embed.Footer != <span class="keyword">null</span></div>
<div class="line"><span class="lineno"> 1033</span>                    ? <span class="keyword">new</span> EmbedFooter(embed.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html#aae5734cac6559662e08b929578dd1ce1">Footer</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed_footer.html#adc207935aa3debc2eb19fc986791a90a">Text</a>)</div>
<div class="line"><span class="lineno"> 1034</span>                    {</div>
<div class="line"><span class="lineno"> 1035</span>                        IconUrl = embed.Footer.IconUrl ?? <span class="keywordflow">default</span>(Optional&lt;string&gt;),</div>
<div class="line"><span class="lineno"> 1036</span>                        ProxyIconUrl = embed.Footer.ProxyIconUrl ?? <span class="keywordflow">default</span>(Optional&lt;string&gt;),</div>
<div class="line"><span class="lineno"> 1037</span>                    }</div>
<div class="line"><span class="lineno"> 1038</span>                    : <span class="keywordflow">default</span>,</div>
<div class="line"><span class="lineno"> 1039</span>                Image = embed.Image != <span class="keyword">null</span></div>
<div class="line"><span class="lineno"> 1040</span>                    ? <span class="keyword">new</span> EmbedImage(embed.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html#a6c59721d839108e863af49145aca8db9">Image</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed_media.html#ad4594ff9deeade634cb5ddf1d57b1557">Url</a>)</div>
<div class="line"><span class="lineno"> 1041</span>                    {</div>
<div class="line"><span class="lineno"> 1042</span>                        Width = embed.Image.Width ?? <span class="keywordflow">default</span>(Optional&lt;int&gt;),</div>
<div class="line"><span class="lineno"> 1043</span>                        Height = embed.Image.Height ?? <span class="keywordflow">default</span>(Optional&lt;int&gt;),</div>
<div class="line"><span class="lineno"> 1044</span>                        ProxyUrl = embed.Image.ProxyUrl ?? <span class="keywordflow">default</span>(Optional&lt;string&gt;),</div>
<div class="line"><span class="lineno"> 1045</span>                    }</div>
<div class="line"><span class="lineno"> 1046</span>                    : <span class="keywordflow">default</span>(Optional&lt;IEmbedImage&gt;),</div>
<div class="line"><span class="lineno"> 1047</span>                <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a3f00cc28b7cb048a224aa76a126befae">Provider</a> = embed.Provider != <span class="keyword">null</span></div>
<div class="line"><span class="lineno"> 1048</span>                    ? <span class="keyword">new</span> EmbedProvider</div>
<div class="line"><span class="lineno"> 1049</span>                    {</div>
<div class="line"><span class="lineno"> 1050</span>                        Name = embed.Provider.Name ?? <span class="keywordflow">default</span>(Optional&lt;string&gt;),</div>
<div class="line"><span class="lineno"> 1051</span>                        Url = embed.Provider.Url ?? <span class="keywordflow">default</span>(Optional&lt;string&gt;),</div>
<div class="line"><span class="lineno"> 1052</span>                    }</div>
<div class="line"><span class="lineno"> 1053</span>                    : <span class="keywordflow">default</span>(Optional&lt;IEmbedProvider&gt;),</div>
<div class="line"><span class="lineno"> 1054</span>                Thumbnail = embed.Thumbnail != <span class="keyword">null</span></div>
<div class="line"><span class="lineno"> 1055</span>                    ? <span class="keyword">new</span> EmbedThumbnail(embed.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html#a8e836bff6c7dd6b9470745dd0d62fd8c">Thumbnail</a>.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed_media.html#ad4594ff9deeade634cb5ddf1d57b1557">Url</a>)</div>
<div class="line"><span class="lineno"> 1056</span>                    {</div>
<div class="line"><span class="lineno"> 1057</span>                        Width = embed.Thumbnail.Width ?? <span class="keywordflow">default</span>(Optional&lt;int&gt;),</div>
<div class="line"><span class="lineno"> 1058</span>                        Height = embed.Thumbnail.Height ?? <span class="keywordflow">default</span>(Optional&lt;int&gt;),</div>
<div class="line"><span class="lineno"> 1059</span>                        ProxyUrl = embed.Thumbnail.ProxyUrl ?? <span class="keywordflow">default</span>(Optional&lt;string&gt;),</div>
<div class="line"><span class="lineno"> 1060</span>                    }</div>
<div class="line"><span class="lineno"> 1061</span>                    : <span class="keywordflow">default</span>(Optional&lt;IEmbedThumbnail&gt;),</div>
<div class="line"><span class="lineno"> 1062</span>                Timestamp = timestampOptional,</div>
<div class="line"><span class="lineno"> 1063</span>                Title = embed.Title ?? <span class="keywordflow">default</span>(Optional&lt;string&gt;),</div>
<div class="line"><span class="lineno"> 1064</span>                Url = embed.Url ?? <span class="keywordflow">default</span>(Optional&lt;string&gt;),</div>
<div class="line"><span class="lineno"> 1065</span>                Video = embed.Video != <span class="keyword">null</span></div>
<div class="line"><span class="lineno"> 1066</span>                    ? <span class="keyword">new</span> EmbedVideo</div>
<div class="line"><span class="lineno"> 1067</span>                    {</div>
<div class="line"><span class="lineno"> 1068</span>                        Url = embed.Video.Url ?? <span class="keywordflow">default</span>(Optional&lt;string&gt;),</div>
<div class="line"><span class="lineno"> 1069</span>                        Width = embed.Video.Width ?? <span class="keywordflow">default</span>(Optional&lt;int&gt;),</div>
<div class="line"><span class="lineno"> 1070</span>                        Height = embed.Video.Height ?? <span class="keywordflow">default</span>(Optional&lt;int&gt;),</div>
<div class="line"><span class="lineno"> 1071</span>                        ProxyUrl = embed.Video.ProxyUrl ?? <span class="keywordflow">default</span>(Optional&lt;string&gt;),</div>
<div class="line"><span class="lineno"> 1072</span>                    }</div>
<div class="line"><span class="lineno"> 1073</span>                    : <span class="keywordflow">default</span>(Optional&lt;IEmbedVideo&gt;),</div>
<div class="line"><span class="lineno"> 1074</span>            };</div>
<div class="line"><span class="lineno"> 1075</span> </div>
<div class="line"><span class="lineno"> 1076</span>            var result = <span class="keyword">new</span> List&lt;IEmbed&gt; { discordEmbed };</div>
<div class="line"><span class="lineno"> 1077</span> </div>
<div class="line"><span class="lineno"> 1078</span>            <span class="keywordflow">if</span> (embedErrors.Count &gt; 0)</div>
<div class="line"><span class="lineno"> 1079</span>            {</div>
<div class="line"><span class="lineno"> 1080</span>                var joinedErrors = String.Join(Environment.NewLine, embedErrors);</div>
<div class="line"><span class="lineno"> 1081</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogError(<span class="stringliteral">&quot;Embed description contains errors:{newLine}{issues}&quot;</span>, Environment.NewLine, joinedErrors);</div>
<div class="line"><span class="lineno"> 1082</span>                result.Add(<span class="keyword">new</span> Embed</div>
<div class="line"><span class="lineno"> 1083</span>                {</div>
<div class="line"><span class="lineno"> 1084</span>                    Title = <span class="stringliteral">&quot;TGS Embed Errors&quot;</span>,</div>
<div class="line"><span class="lineno"> 1085</span>                    Description = joinedErrors,</div>
<div class="line"><span class="lineno"> 1086</span>                    Colour = Color.Red,</div>
<div class="line"><span class="lineno"> 1087</span>                    Footer = <span class="keyword">new</span> EmbedFooter(<span class="stringliteral">&quot;Please report this to your codebase&#39;s maintainers.&quot;</span>),</div>
<div class="line"><span class="lineno"> 1088</span>                    Timestamp = DateTimeOffset.UtcNow,</div>
<div class="line"><span class="lineno"> 1089</span>                });</div>
<div class="line"><span class="lineno"> 1090</span>            }</div>
<div class="line"><span class="lineno"> 1091</span> </div>
<div class="line"><span class="lineno"> 1092</span>            <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno"> 1093</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider_html_a3f00cc28b7cb048a224aa76a126befae"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a3f00cc28b7cb048a224aa76a126befae">Tgstation.Server.Host.Components.Chat.Providers.Provider.Provider</a></div><div class="ttdeci">Provider(IJobManager jobManager, IAsyncDelayer asyncDelayer, ILogger&lt; Provider &gt; logger, ChatBot chatBot)</div><div class="ttdoc">Initializes a new instance of the Provider class.</div><div class="ttdef"><b>Definition:</b> <a href="_provider_8cs_source.html#l00080">Provider.cs:80</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed_footer_html_adc207935aa3debc2eb19fc986791a90a"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed_footer.html#adc207935aa3debc2eb19fc986791a90a">Tgstation.Server.Host.Components.Interop.ChatEmbedFooter.Text</a></div><div class="ttdeci">string Text</div><div class="ttdoc">Gets the text of the footer.</div><div class="ttdef"><b>Definition:</b> <a href="_chat_embed_footer_8cs_source.html#l00011">ChatEmbedFooter.cs:11</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed_html_a6c59721d839108e863af49145aca8db9"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html#a6c59721d839108e863af49145aca8db9">Tgstation.Server.Host.Components.Interop.ChatEmbed.Image</a></div><div class="ttdeci">ChatEmbedMedia Image</div><div class="ttdoc">The ChatEmbedMedia for an image.</div><div class="ttdef"><b>Definition:</b> <a href="_chat_embed_8cs_source.html#l00045">ChatEmbed.cs:45</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed_html_a8e836bff6c7dd6b9470745dd0d62fd8c"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html#a8e836bff6c7dd6b9470745dd0d62fd8c">Tgstation.Server.Host.Components.Interop.ChatEmbed.Thumbnail</a></div><div class="ttdeci">ChatEmbedMedia Thumbnail</div><div class="ttdoc">The ChatEmbedMedia for a thumbnail.</div><div class="ttdef"><b>Definition:</b> <a href="_chat_embed_8cs_source.html#l00050">ChatEmbed.cs:50</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed_html_aa9bc9b9154ce964c0ad222a676e9d4fe"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html#aa9bc9b9154ce964c0ad222a676e9d4fe">Tgstation.Server.Host.Components.Interop.ChatEmbed.Fields</a></div><div class="ttdeci">ICollection&lt; ChatEmbedField &gt; Fields</div><div class="ttdoc">The ChatEmbedFields.</div><div class="ttdef"><b>Definition:</b> <a href="_chat_embed_8cs_source.html#l00070">ChatEmbed.cs:70</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed_html_aae5734cac6559662e08b929578dd1ce1"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html#aae5734cac6559662e08b929578dd1ce1">Tgstation.Server.Host.Components.Interop.ChatEmbed.Footer</a></div><div class="ttdeci">ChatEmbedFooter Footer</div><div class="ttdoc">The ChatEmbedFooter.</div><div class="ttdef"><b>Definition:</b> <a href="_chat_embed_8cs_source.html#l00040">ChatEmbed.cs:40</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed_html_ab0df7991bef17f3398fbcca8b9de2afd"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html#ab0df7991bef17f3398fbcca8b9de2afd">Tgstation.Server.Host.Components.Interop.ChatEmbed.Timestamp</a></div><div class="ttdeci">string Timestamp</div><div class="ttdoc">The ISO 8601 timestamp of the embed.</div><div class="ttdef"><b>Definition:</b> <a href="_chat_embed_8cs_source.html#l00030">ChatEmbed.cs:30</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed_html_ac1dc32e2f97bbf3bec5cf94f2d23a6ab"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html#ac1dc32e2f97bbf3bec5cf94f2d23a6ab">Tgstation.Server.Host.Components.Interop.ChatEmbed.Colour</a></div><div class="ttdeci">string Colour</div><div class="ttdoc">The colour of the embed in the format hex &quot;#AARRGGBB&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="_chat_embed_8cs_source.html#l00035">ChatEmbed.cs:35</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed_html_aed31634a7fec58a34f6dc11d14899a4f"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed.html#aed31634a7fec58a34f6dc11d14899a4f">Tgstation.Server.Host.Components.Interop.ChatEmbed.Author</a></div><div class="ttdeci">ChatEmbedAuthor Author</div><div class="ttdoc">The ChatEmbedAuthor.</div><div class="ttdef"><b>Definition:</b> <a href="_chat_embed_8cs_source.html#l00065">ChatEmbed.cs:65</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed_media_html_ad4594ff9deeade634cb5ddf1d57b1557"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed_media.html#ad4594ff9deeade634cb5ddf1d57b1557">Tgstation.Server.Host.Components.Interop.ChatEmbedMedia.Url</a></div><div class="ttdeci">string Url</div><div class="ttdoc">Gets the source URL of the media. Only supports http(s) and attachments.</div><div class="ttdef"><b>Definition:</b> <a href="_chat_embed_media_8cs_source.html#l00012">ChatEmbedMedia.cs:12</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed_provider_html_a3f50b63bf7127580f30831ce5828ed7d"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_chat_embed_provider.html#a3f50b63bf7127580f30831ce5828ed7d">Tgstation.Server.Host.Components.Interop.ChatEmbedProvider.Name</a></div><div class="ttdeci">string Name</div><div class="ttdoc">Gets the name of the provider.</div><div class="ttdef"><b>Definition:</b> <a href="_chat_embed_provider_8cs_source.html#l00011">ChatEmbedProvider.cs:11</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_chat_embed_8cs_source.html#l00065">Tgstation.Server.Host.Components.Interop.ChatEmbed.Author</a>, <a class="el" href="_chat_embed_8cs_source.html#l00035">Tgstation.Server.Host.Components.Interop.ChatEmbed.Colour</a>, <a class="el" href="_chat_embed_8cs_source.html#l00070">Tgstation.Server.Host.Components.Interop.ChatEmbed.Fields</a>, <a class="el" href="_chat_embed_8cs_source.html#l00040">Tgstation.Server.Host.Components.Interop.ChatEmbed.Footer</a>, <a class="el" href="_chat_embed_8cs_source.html#l00045">Tgstation.Server.Host.Components.Interop.ChatEmbed.Image</a>, <a class="el" href="_provider_8cs_source.html#l00036">Tgstation.Server.Host.Components.Chat.Providers.Provider.Logger</a>, <a class="el" href="_chat_embed_provider_8cs_source.html#l00011">Tgstation.Server.Host.Components.Interop.ChatEmbedProvider.Name</a>, <a class="el" href="_chat_embed_footer_8cs_source.html#l00011">Tgstation.Server.Host.Components.Interop.ChatEmbedFooter.Text</a>, <a class="el" href="_chat_embed_8cs_source.html#l00050">Tgstation.Server.Host.Components.Interop.ChatEmbed.Thumbnail</a>, <a class="el" href="_chat_embed_8cs_source.html#l00030">Tgstation.Server.Host.Components.Interop.ChatEmbed.Timestamp</a>, and <a class="el" href="_chat_embed_media_8cs_source.html#l00012">Tgstation.Server.Host.Components.Interop.ChatEmbedMedia.Url</a>.</p>

<p class="reference">Referenced by <a class="el" href="_discord_provider_8cs_source.html#l00288">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.SendMessage()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_acb7a2fd7f33039ab041c83beca2b85f0_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_acb7a2fd7f33039ab041c83beca2b85f0_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_acb7a2fd7f33039ab041c83beca2b85f0_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_acb7a2fd7f33039ab041c83beca2b85f0_icgraph">
<area shape="rect" title="Convert a ChatEmbed to an IEmbed parameters." alt="" coords="628,13,919,53"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#af4a17b4a63612dfafbd1d48f73ad1ee5" title="Send a message to the IProvider. A Task representing the running operation." alt="" coords="345,5,580,60"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a8d7bbc5ddb64df2800554c354ff1974a" title=" " alt="" coords="5,13,297,53"/>
</map>
</div>

</div>
</div>
<a id="ae4da9b25c89c74b4e2d70fdfb7f8c894" name="ae4da9b25c89c74b4e2d70fdfb7f8c894"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4da9b25c89c74b4e2d70fdfb7f8c894">&#9670;&#160;</a></span>DisconnectImpl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">override async Task Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.DisconnectImpl </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gracefully disconnects the provider. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a627edd03f216fa53e443b1901cf5599c">Tgstation.Server.Host.Components.Chat.Providers.Provider</a>.</p>

<p class="definition">Definition at line <a class="el" href="_discord_provider_8cs_source.html#l00691">691</a> of file <a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  692</span>        {</div>
<div class="line"><span class="lineno">  693</span>            Task&lt;Result&gt; localGatewayTask;</div>
<div class="line"><span class="lineno">  694</span>            CancellationTokenSource localGatewayCts;</div>
<div class="line"><span class="lineno">  695</span>            lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a01881ab9506db0431f75db21224bf7e6">connectDisconnectLock</a>)</div>
<div class="line"><span class="lineno">  696</span>            {</div>
<div class="line"><span class="lineno">  697</span>                localGatewayTask = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a331c4c449274e3681d766a5901e35a0b">gatewayTask</a>;</div>
<div class="line"><span class="lineno">  698</span>                localGatewayCts = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a6b6a170efd3f74b5c5f12cc41d7d0b5f">gatewayCts</a>;</div>
<div class="line"><span class="lineno">  699</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a331c4c449274e3681d766a5901e35a0b">gatewayTask</a> = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  700</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a6b6a170efd3f74b5c5f12cc41d7d0b5f">gatewayCts</a> = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  701</span>                <span class="keywordflow">if</span> (localGatewayTask == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  702</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  703</span>            }</div>
<div class="line"><span class="lineno">  704</span> </div>
<div class="line"><span class="lineno">  705</span>            localGatewayCts.Cancel();</div>
<div class="line"><span class="lineno">  706</span>            var gatewayResult = await localGatewayTask;</div>
<div class="line"><span class="lineno">  707</span> </div>
<div class="line"><span class="lineno">  708</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogTrace(<span class="stringliteral">&quot;Gateway task complete&quot;</span>);</div>
<div class="line"><span class="lineno">  709</span>            <span class="keywordflow">if</span> (!gatewayResult.IsSuccess)</div>
<div class="line"><span class="lineno">  710</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogWarning(<span class="stringliteral">&quot;Gateway issue: {result}&quot;</span>, gatewayResult.LogFormat());</div>
<div class="line"><span class="lineno">  711</span> </div>
<div class="line"><span class="lineno">  712</span>            localGatewayCts.Dispose();</div>
<div class="line"><span class="lineno">  713</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_discord_provider_8cs_source.html#l00086">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.connectDisconnectLock</a>, <a class="el" href="_discord_provider_8cs_source.html#l00106">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.gatewayCts</a>, <a class="el" href="_discord_provider_8cs_source.html#l00116">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.gatewayTask</a>, and <a class="el" href="_provider_8cs_source.html#l00036">Tgstation.Server.Host.Components.Chat.Providers.Provider.Logger</a>.</p>

<p class="reference">Referenced by <a class="el" href="_discord_provider_8cs_source.html#l00631">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.Connect()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_ae4da9b25c89c74b4e2d70fdfb7f8c894_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_ae4da9b25c89c74b4e2d70fdfb7f8c894_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_ae4da9b25c89c74b4e2d70fdfb7f8c894_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_ae4da9b25c89c74b4e2d70fdfb7f8c894_icgraph">
<area shape="rect" title="Gracefully disconnects the provider. A Task representing the running operation." alt="" coords="307,5,601,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#aaa5c800b8dc532cb596ebd075e14e48e" title="Attempt to connect the Provider. A Task representing the running operation." alt="" coords="5,5,259,45"/>
</map>
</div>

</div>
</div>
<a id="ab650903107863653f1b637562f4813b4" name="ab650903107863653f1b637562f4813b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab650903107863653f1b637562f4813b4">&#9670;&#160;</a></span>DisposeAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">override async ValueTask Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.DisposeAsync </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p></p>

<p>Reimplemented from <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#afe2edd40c945bc526ccd5dfea7a062b1">Tgstation.Server.Host.Components.Chat.Providers.Provider</a>.</p>

<p class="definition">Definition at line <a class="el" href="_discord_provider_8cs_source.html#l00218">218</a> of file <a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  219</span>        {</div>
<div class="line"><span class="lineno">  220</span>            lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ae7dd055bf64dcff2228ae66fdcff7e92">serviceProvider</a>)</div>
<div class="line"><span class="lineno">  221</span>            {</div>
<div class="line"><span class="lineno">  222</span>                <span class="comment">// serviceProvider can recursively dispose us</span></div>
<div class="line"><span class="lineno">  223</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a317ac4b2144b7b5d2764063b158c7f54">disposing</a>)</div>
<div class="line"><span class="lineno">  224</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  225</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a317ac4b2144b7b5d2764063b158c7f54">disposing</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  226</span>            }</div>
<div class="line"><span class="lineno">  227</span> </div>
<div class="line"><span class="lineno">  228</span>            await base.DisposeAsync();</div>
<div class="line"><span class="lineno">  229</span> </div>
<div class="line"><span class="lineno">  230</span>            <span class="comment">// https://github.com/Remora/Remora.Discord/issues/305</span></div>
<div class="line"><span class="lineno">  231</span>            var responderDispatchService = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ae7dd055bf64dcff2228ae66fdcff7e92">serviceProvider</a>.GetRequiredService&lt;ResponderDispatchService&gt;();</div>
<div class="line"><span class="lineno">  232</span>            var serviceProviderDisposeTask = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ae7dd055bf64dcff2228ae66fdcff7e92">serviceProvider</a>.DisposeAsync().AsTask();</div>
<div class="line"><span class="lineno">  233</span>            var timeout = <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html">AsyncDelayer</a>.<a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html#a866d0f61c2a2311e5fbe5d8de329df33">Delay</a>(TimeSpan.FromSeconds(10), <span class="keywordflow">default</span>); <span class="comment">// DCT: None available</span></div>
<div class="line"><span class="lineno">  234</span> </div>
<div class="line"><span class="lineno">  235</span>            await Task.WhenAny(timeout, serviceProviderDisposeTask);</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>            <span class="keywordflow">if</span> (!serviceProviderDisposeTask.IsCompleted)</div>
<div class="line"><span class="lineno">  238</span>            {</div>
<div class="line"><span class="lineno">  239</span>                <span class="comment">// HACK HACK HACK, there&#39;s a potential deadlock in the ResponderDispatchService</span></div>
<div class="line"><span class="lineno">  240</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogWarning(<span class="stringliteral">&quot;ServiceProvider disposal stalled. Attempting workaround...&quot;</span>);</div>
<div class="line"><span class="lineno">  241</span>                var responderDispatchServiceType = responderDispatchService.GetType();</div>
<div class="line"><span class="lineno">  242</span>                var dispatcherTask = (Task)responderDispatchServiceType.GetField(<span class="stringliteral">&quot;_dispatcher&quot;</span>, BindingFlags.Instance | BindingFlags.NonPublic).GetValue(responderDispatchService);</div>
<div class="line"><span class="lineno">  243</span>                var finalizerTask = (Task)responderDispatchServiceType.GetField(<span class="stringliteral">&quot;_finalizer&quot;</span>, BindingFlags.Instance | BindingFlags.NonPublic).GetValue(responderDispatchService);</div>
<div class="line"><span class="lineno">  244</span> </div>
<div class="line"><span class="lineno">  245</span>                var dispatcherCompleted = dispatcherTask.IsCompleted;</div>
<div class="line"><span class="lineno">  246</span>                var finalizerCompleted = finalizerTask.IsCompleted;</div>
<div class="line"><span class="lineno">  247</span>                <span class="keywordflow">if</span> (dispatcherCompleted &amp;&amp; !finalizerCompleted)</div>
<div class="line"><span class="lineno">  248</span>                {</div>
<div class="line"><span class="lineno">  249</span>                    <span class="comment">// deadlocked, force close the channel</span></div>
<div class="line"><span class="lineno">  250</span>                    var channel = (Channel&lt;Task&lt;IReadOnlyList&lt;Result&gt;&gt;&gt;)responderDispatchServiceType.GetField(<span class="stringliteral">&quot;_respondersToFinalize&quot;</span>, BindingFlags.Instance | BindingFlags.NonPublic).GetValue(responderDispatchService);</div>
<div class="line"><span class="lineno">  251</span>                    <span class="keywordflow">if</span> (!channel.Writer.TryComplete())</div>
<div class="line"><span class="lineno">  252</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogCritical(<span class="stringliteral">&quot;Workaround failed (channel already closed), you may be deadlocked!&quot;</span>);</div>
<div class="line"><span class="lineno">  253</span>                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  254</span>                    {</div>
<div class="line"><span class="lineno">  255</span>                        <span class="comment">// drain the channel, fuck the results</span></div>
<div class="line"><span class="lineno">  256</span>                        <span class="comment">// DCT: None available</span></div>
<div class="line"><span class="lineno">  257</span>                        await <span class="keywordflow">foreach</span> (var result <span class="keywordflow">in</span> channel.Reader.ReadAllAsync(CancellationToken.None))</div>
<div class="line"><span class="lineno">  258</span>                            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  259</span>                            {</div>
<div class="line"><span class="lineno">  260</span>                                await result;</div>
<div class="line"><span class="lineno">  261</span>                            }</div>
<div class="line"><span class="lineno">  262</span>                            <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno">  263</span>                            {</div>
<div class="line"><span class="lineno">  264</span>                                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogDebug(ex, <span class="stringliteral">&quot;Channel draining exception!&quot;</span>);</div>
<div class="line"><span class="lineno">  265</span>                            }</div>
<div class="line"><span class="lineno">  266</span> </div>
<div class="line"><span class="lineno">  267</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogInformation(<span class="stringliteral">&quot;Workaround seems successful. Awaiting ServiceProvider disposal...&quot;</span>);</div>
<div class="line"><span class="lineno">  268</span>                    }</div>
<div class="line"><span class="lineno">  269</span>                }</div>
<div class="line"><span class="lineno">  270</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  271</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogCritical(</div>
<div class="line"><span class="lineno">  272</span>                        <span class="stringliteral">&quot;Workaround failed (_dispatcher: {dispatcherCompleted}, _finalizer: {finalizerCompleted}), you may be deadlocked!&quot;</span>,</div>
<div class="line"><span class="lineno">  273</span>                        dispatcherCompleted,</div>
<div class="line"><span class="lineno">  274</span>                        finalizerCompleted);</div>
<div class="line"><span class="lineno">  275</span>            }</div>
<div class="line"><span class="lineno">  276</span> </div>
<div class="line"><span class="lineno">  277</span>            await serviceProviderDisposeTask;</div>
<div class="line"><span class="lineno">  278</span> </div>
<div class="line"><span class="lineno">  279</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogTrace(<span class="stringliteral">&quot;ServiceProvider disposed&quot;</span>);</div>
<div class="line"><span class="lineno">  280</span> </div>
<div class="line"><span class="lineno">  281</span>            <span class="comment">// this line is purely here to shutup CA2213. It should always be null</span></div>
<div class="line"><span class="lineno">  282</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a6b6a170efd3f74b5c5f12cc41d7d0b5f">gatewayCts</a>?.Dispose();</div>
<div class="line"><span class="lineno">  283</span> </div>
<div class="line"><span class="lineno">  284</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a317ac4b2144b7b5d2764063b158c7f54">disposing</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  285</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_html_a317ac4b2144b7b5d2764063b158c7f54"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a317ac4b2144b7b5d2764063b158c7f54">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.disposing</a></div><div class="ttdeci">bool disposing</div><div class="ttdoc">If serviceProvider is being disposed.</div><div class="ttdef"><b>Definition:</b> <a href="_discord_provider_8cs_source.html#l00126">DiscordProvider.cs:126</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html">Tgstation.Server.Host.Utils.AsyncDelayer</a></div><div class="ttdef"><b>Definition:</b> <a href="_async_delayer_8cs_source.html#l00008">AsyncDelayer.cs:9</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer_html_a866d0f61c2a2311e5fbe5d8de329df33"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html#a866d0f61c2a2311e5fbe5d8de329df33">Tgstation.Server.Host.Utils.AsyncDelayer.Delay</a></div><div class="ttdeci">Task Delay(TimeSpan timeSpan, CancellationToken cancellationToken)</div><div class="ttdoc">Create a Task that completes after a given timeSpan . A Task representing the running operation.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html#a866d0f61c2a2311e5fbe5d8de329df33">Tgstation.Server.Host.Utils.AsyncDelayer.Delay()</a>, <a class="el" href="_discord_provider_8cs_source.html#l00126">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.disposing</a>, <a class="el" href="_discord_provider_8cs_source.html#l00106">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.gatewayCts</a>, <a class="el" href="_provider_8cs_source.html#l00036">Tgstation.Server.Host.Components.Chat.Providers.Provider.Logger</a>, and <a class="el" href="_discord_provider_8cs_source.html#l00076">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.serviceProvider</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_ab650903107863653f1b637562f4813b4_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_ab650903107863653f1b637562f4813b4_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_ab650903107863653f1b637562f4813b4_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_ab650903107863653f1b637562f4813b4_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,293,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_utils_1_1_async_delayer.html#a866d0f61c2a2311e5fbe5d8de329df33" title="Create a Task that completes after a given timeSpan . A Task representing the running operation." alt="" coords="341,5,523,45"/>
</map>
</div>

</div>
</div>
<a id="a71748fbc2a36a3f401fd6b156cb6795d" name="a71748fbc2a36a3f401fd6b156cb6795d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71748fbc2a36a3f401fd6b156cb6795d">&#9670;&#160;</a></span>GetAllAccessibleTextChannels()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; IEnumerable&lt; IChannel &gt; &gt; Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.GetAllAccessibleTextChannels </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get all text IChannels accessible to and supported by the bot.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task&lt;TResult&gt; resulting in an IEnumerable&lt;T&gt; of accessible and compatible IChannels.</dd></dl>

<p class="definition">Definition at line <a class="el" href="_discord_provider_8cs_source.html#l00867">867</a> of file <a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  868</span>        {</div>
<div class="line"><span class="lineno">  869</span>            var usersClient = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ae7dd055bf64dcff2228ae66fdcff7e92">serviceProvider</a>.GetRequiredService&lt;IDiscordRestUserAPI&gt;();</div>
<div class="line"><span class="lineno">  870</span>            var currentGuildsResponse = await usersClient.GetCurrentUserGuildsAsync(ct: cancellationToken);</div>
<div class="line"><span class="lineno">  871</span>            <span class="keywordflow">if</span> (!currentGuildsResponse.IsSuccess)</div>
<div class="line"><span class="lineno">  872</span>            {</div>
<div class="line"><span class="lineno">  873</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogWarning(</div>
<div class="line"><span class="lineno">  874</span>                    <span class="stringliteral">&quot;Error retrieving current discord guilds: {result}&quot;</span>,</div>
<div class="line"><span class="lineno">  875</span>                    currentGuildsResponse.LogFormat());</div>
<div class="line"><span class="lineno">  876</span>                <span class="keywordflow">return</span> Enumerable.Empty&lt;IChannel&gt;();</div>
<div class="line"><span class="lineno">  877</span>            }</div>
<div class="line"><span class="lineno">  878</span> </div>
<div class="line"><span class="lineno">  879</span>            var guildsClient = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ae7dd055bf64dcff2228ae66fdcff7e92">serviceProvider</a>.GetRequiredService&lt;IDiscordRestGuildAPI&gt;();</div>
<div class="line"><span class="lineno">  880</span> </div>
<div class="line"><span class="lineno">  881</span>            async Task&lt;IEnumerable&lt;IChannel&gt;&gt; GetGuildChannels(IPartialGuild guild)</div>
<div class="line"><span class="lineno">  882</span>            {</div>
<div class="line"><span class="lineno">  883</span>                var channelsTask = guildsClient.GetGuildChannelsAsync(guild.ID.Value, cancellationToken);</div>
<div class="line"><span class="lineno">  884</span>                var threads = await guildsClient.ListActiveGuildThreadsAsync(guild.ID.Value, cancellationToken);</div>
<div class="line"><span class="lineno">  885</span>                <span class="keywordflow">if</span> (!threads.IsSuccess)</div>
<div class="line"><span class="lineno">  886</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogWarning(</div>
<div class="line"><span class="lineno">  887</span>                        <span class="stringliteral">&quot;Error retrieving discord guild threads {guildId} ({guildName}): {result}&quot;</span>,</div>
<div class="line"><span class="lineno">  888</span>                        guild.ID,</div>
<div class="line"><span class="lineno">  889</span>                        guild.Name,</div>
<div class="line"><span class="lineno">  890</span>                        threads.LogFormat());</div>
<div class="line"><span class="lineno">  891</span> </div>
<div class="line"><span class="lineno">  892</span>                var channels = await channelsTask;</div>
<div class="line"><span class="lineno">  893</span>                <span class="keywordflow">if</span> (!channels.IsSuccess)</div>
<div class="line"><span class="lineno">  894</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogWarning(</div>
<div class="line"><span class="lineno">  895</span>                        <span class="stringliteral">&quot;Error retrieving discord guild channels {guildId} ({guildName}): {result}&quot;</span>,</div>
<div class="line"><span class="lineno">  896</span>                        guild.ID,</div>
<div class="line"><span class="lineno">  897</span>                        guild.Name,</div>
<div class="line"><span class="lineno">  898</span>                        channels.LogFormat());</div>
<div class="line"><span class="lineno">  899</span> </div>
<div class="line"><span class="lineno">  900</span>                <span class="keywordflow">if</span> (!channels.IsSuccess &amp;&amp; !threads.IsSuccess)</div>
<div class="line"><span class="lineno">  901</span>                    <span class="keywordflow">return</span> Enumerable.Empty&lt;IChannel&gt;();</div>
<div class="line"><span class="lineno">  902</span> </div>
<div class="line"><span class="lineno">  903</span>                <span class="keywordflow">if</span> (channels.IsSuccess &amp;&amp; threads.IsSuccess)</div>
<div class="line"><span class="lineno">  904</span>                    <span class="keywordflow">return</span> channels.Entity.Concat(threads.Entity.Threads ?? Enumerable.Empty&lt;IChannel&gt;());</div>
<div class="line"><span class="lineno">  905</span> </div>
<div class="line"><span class="lineno">  906</span>                <span class="keywordflow">return</span> channels.Entity ?? threads.Entity?.Threads ?? Enumerable.Empty&lt;IChannel&gt;();</div>
<div class="line"><span class="lineno">  907</span>            }</div>
<div class="line"><span class="lineno">  908</span> </div>
<div class="line"><span class="lineno">  909</span>            var guildsChannelsTasks = currentGuildsResponse.Entity</div>
<div class="line"><span class="lineno">  910</span>                .Select(GetGuildChannels)</div>
<div class="line"><span class="lineno">  911</span>                .ToList();</div>
<div class="line"><span class="lineno">  912</span> </div>
<div class="line"><span class="lineno">  913</span>            await Task.WhenAll(guildsChannelsTasks);</div>
<div class="line"><span class="lineno">  914</span> </div>
<div class="line"><span class="lineno">  915</span>            var allAccessibleChannels = guildsChannelsTasks</div>
<div class="line"><span class="lineno">  916</span>                .SelectMany(task =&gt; task.Result)</div>
<div class="line"><span class="lineno">  917</span>                .Where(guildChannel =&gt; <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a1896b3a7ddd7b500c2624d3676b64eaf">SupportedGuildChannelTypes</a>.Contains(guildChannel.Type));</div>
<div class="line"><span class="lineno">  918</span> </div>
<div class="line"><span class="lineno">  919</span>            <span class="keywordflow">return</span> allAccessibleChannels;</div>
<div class="line"><span class="lineno">  920</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_html_a1896b3a7ddd7b500c2624d3676b64eaf"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a1896b3a7ddd7b500c2624d3676b64eaf">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.SupportedGuildChannelTypes</a></div><div class="ttdeci">static readonly ChannelType[] SupportedGuildChannelTypes</div><div class="ttdoc">The ChannelTypes supported by the DiscordProvider for mapping.</div><div class="ttdef"><b>Definition:</b> <a href="_discord_provider_8cs_source.html#l00060">DiscordProvider.cs:60</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_provider_8cs_source.html#l00036">Tgstation.Server.Host.Components.Chat.Providers.Provider.Logger</a>, <a class="el" href="_discord_provider_8cs_source.html#l00076">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.serviceProvider</a>, and <a class="el" href="_discord_provider_8cs_source.html#l00060">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.SupportedGuildChannelTypes</a>.</p>

<p class="reference">Referenced by <a class="el" href="_discord_provider_8cs_source.html#l00716">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.MapChannelsImpl()</a>, and <a class="el" href="_discord_provider_8cs_source.html#l00288">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.SendMessage()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_a71748fbc2a36a3f401fd6b156cb6795d_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_a71748fbc2a36a3f401fd6b156cb6795d_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_a71748fbc2a36a3f401fd6b156cb6795d_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_a71748fbc2a36a3f401fd6b156cb6795d_icgraph">
<area shape="rect" title="Get all text IChannels accessible to and supported by the bot." alt="" coords="703,34,944,89"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a6380fd69a8ac2c84d5521b0645f85f6d" title=" " alt="" coords="345,5,655,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#af4a17b4a63612dfafbd1d48f73ad1ee5" title="Send a message to the IProvider. A Task representing the running operation." alt="" coords="383,70,617,125"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a8d7bbc5ddb64df2800554c354ff1974a" title=" " alt="" coords="5,77,297,117"/>
</map>
</div>

</div>
</div>
<a id="a6380fd69a8ac2c84d5521b0645f85f6d" name="a6380fd69a8ac2c84d5521b0645f85f6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6380fd69a8ac2c84d5521b0645f85f6d">&#9670;&#160;</a></span>MapChannelsImpl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">override async Task&lt; Dictionary&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_chat_channel.html">Models.ChatChannel</a>, IEnumerable&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_channel_representation.html">ChannelRepresentation</a> &gt; &gt; &gt; Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.MapChannelsImpl </td>
          <td>(</td>
          <td class="paramtype">IEnumerable&lt; <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_chat_channel.html">Models.ChatChannel</a> &gt;&#160;</td>
          <td class="paramname"><em>channels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="_discord_provider_8cs_source.html#l00716">716</a> of file <a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  717</span>        {</div>
<div class="line"><span class="lineno">  718</span>            ArgumentNullException.ThrowIfNull(channels);</div>
<div class="line"><span class="lineno">  719</span> </div>
<div class="line"><span class="lineno">  720</span>            var remapRequired = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  721</span>            var guildsClient = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ae7dd055bf64dcff2228ae66fdcff7e92">serviceProvider</a>.GetRequiredService&lt;IDiscordRestGuildAPI&gt;();</div>
<div class="line"><span class="lineno">  722</span> </div>
<div class="line"><span class="lineno">  723</span>            async Task&lt;Tuple&lt;Models.ChatChannel, IEnumerable&lt;ChannelRepresentation&gt;&gt;&gt; GetModelChannelFromDBChannel(Models.ChatChannel channelFromDB)</div>
<div class="line"><span class="lineno">  724</span>            {</div>
<div class="line"><span class="lineno">  725</span>                <span class="keywordflow">if</span> (!channelFromDB.DiscordChannelId.HasValue)</div>
<div class="line"><span class="lineno">  726</span>                    <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;ChatChannel missing DiscordChannelId!&quot;</span>);</div>
<div class="line"><span class="lineno">  727</span> </div>
<div class="line"><span class="lineno">  728</span>                var channelId = channelFromDB.DiscordChannelId.Value;</div>
<div class="line"><span class="lineno">  729</span>                var channelsClient = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ae7dd055bf64dcff2228ae66fdcff7e92">serviceProvider</a>.GetRequiredService&lt;IDiscordRestChannelAPI&gt;();</div>
<div class="line"><span class="lineno">  730</span>                var discordChannelResponse = await channelsClient.GetChannelAsync(<span class="keyword">new</span> Snowflake(channelId), cancellationToken);</div>
<div class="line"><span class="lineno">  731</span>                <span class="keywordflow">if</span> (!discordChannelResponse.IsSuccess)</div>
<div class="line"><span class="lineno">  732</span>                {</div>
<div class="line"><span class="lineno">  733</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogWarning(</div>
<div class="line"><span class="lineno">  734</span>                        <span class="stringliteral">&quot;Error retrieving discord channel {channelId}: {result}&quot;</span>,</div>
<div class="line"><span class="lineno">  735</span>                        channelId,</div>
<div class="line"><span class="lineno">  736</span>                        discordChannelResponse.LogFormat());</div>
<div class="line"><span class="lineno">  737</span> </div>
<div class="line"><span class="lineno">  738</span>                    remapRequired |= !(discordChannelResponse.Error is RestResultError&lt;RestError&gt; restResultError</div>
<div class="line"><span class="lineno">  739</span>                        &amp;&amp; (restResultError.Error?.Code == DiscordError.MissingAccess</div>
<div class="line"><span class="lineno">  740</span>                        || restResultError.Error?.Code == DiscordError.UnknownChannel));</div>
<div class="line"><span class="lineno">  741</span>                    <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  742</span>                }</div>
<div class="line"><span class="lineno">  743</span> </div>
<div class="line"><span class="lineno">  744</span>                var channelType = discordChannelResponse.Entity.Type;</div>
<div class="line"><span class="lineno">  745</span>                <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a1896b3a7ddd7b500c2624d3676b64eaf">SupportedGuildChannelTypes</a>.Contains(channelType))</div>
<div class="line"><span class="lineno">  746</span>                {</div>
<div class="line"><span class="lineno">  747</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogWarning(<span class="stringliteral">&quot;Cound not map channel {channelId}! Incorrect type: {channelType}&quot;</span>, channelId, discordChannelResponse.Entity.Type);</div>
<div class="line"><span class="lineno">  748</span>                    <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  749</span>                }</div>
<div class="line"><span class="lineno">  750</span> </div>
<div class="line"><span class="lineno">  751</span>                var guildId = discordChannelResponse.Entity.GuildID.Value;</div>
<div class="line"><span class="lineno">  752</span> </div>
<div class="line"><span class="lineno">  753</span>                var guildsResponse = await guildsClient.GetGuildAsync(</div>
<div class="line"><span class="lineno">  754</span>                    guildId,</div>
<div class="line"><span class="lineno">  755</span>                    <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  756</span>                    cancellationToken);</div>
<div class="line"><span class="lineno">  757</span>                <span class="keywordflow">if</span> (!guildsResponse.IsSuccess)</div>
<div class="line"><span class="lineno">  758</span>                {</div>
<div class="line"><span class="lineno">  759</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogWarning(</div>
<div class="line"><span class="lineno">  760</span>                        <span class="stringliteral">&quot;Error retrieving discord guild {guildID}: {result}&quot;</span>,</div>
<div class="line"><span class="lineno">  761</span>                        guildId,</div>
<div class="line"><span class="lineno">  762</span>                        guildsResponse.LogFormat());</div>
<div class="line"><span class="lineno">  763</span>                    remapRequired |= <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  764</span>                    <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  765</span>                }</div>
<div class="line"><span class="lineno">  766</span> </div>
<div class="line"><span class="lineno">  767</span>                var connectionName = guildsResponse.Entity.Name;</div>
<div class="line"><span class="lineno">  768</span> </div>
<div class="line"><span class="lineno">  769</span>                var channelModel = <span class="keyword">new</span> ChannelRepresentation</div>
<div class="line"><span class="lineno">  770</span>                {</div>
<div class="line"><span class="lineno">  771</span>                    RealId = channelId,</div>
<div class="line"><span class="lineno">  772</span>                    IsAdminChannel = channelFromDB.IsAdminChannel == <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno">  773</span>                    ConnectionName = guildsResponse.Entity.Name,</div>
<div class="line"><span class="lineno">  774</span>                    FriendlyName = discordChannelResponse.Entity.Name.Value,</div>
<div class="line"><span class="lineno">  775</span>                    IsPrivateChannel = <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  776</span>                    Tag = channelFromDB.Tag,</div>
<div class="line"><span class="lineno">  777</span>                    EmbedsSupported = <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno">  778</span>                };</div>
<div class="line"><span class="lineno">  779</span> </div>
<div class="line"><span class="lineno">  780</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogTrace(<span class="stringliteral">&quot;Mapped channel {realId}: {friendlyName}&quot;</span>, channelModel.RealId, channelModel.FriendlyName);</div>
<div class="line"><span class="lineno">  781</span>                <span class="keywordflow">return</span> Tuple.Create&lt;Models.ChatChannel, IEnumerable&lt;ChannelRepresentation&gt;&gt;(</div>
<div class="line"><span class="lineno">  782</span>                    channelFromDB,</div>
<div class="line"><span class="lineno">  783</span>                    <span class="keyword">new</span> List&lt;ChannelRepresentation&gt; { channelModel });</div>
<div class="line"><span class="lineno">  784</span>            }</div>
<div class="line"><span class="lineno">  785</span> </div>
<div class="line"><span class="lineno">  786</span>            var tasks = channels</div>
<div class="line"><span class="lineno">  787</span>                .Where(x =&gt; x.DiscordChannelId != 0)</div>
<div class="line"><span class="lineno">  788</span>                .Select(GetModelChannelFromDBChannel)</div>
<div class="line"><span class="lineno">  789</span>                .ToList();</div>
<div class="line"><span class="lineno">  790</span> </div>
<div class="line"><span class="lineno">  791</span>            await Task.WhenAll(tasks);</div>
<div class="line"><span class="lineno">  792</span> </div>
<div class="line"><span class="lineno">  793</span>            var channelIdZeroModel = channels.FirstOrDefault(x =&gt; x.DiscordChannelId == 0);</div>
<div class="line"><span class="lineno">  794</span>            <span class="keywordflow">if</span> (channelIdZeroModel != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  795</span>            {</div>
<div class="line"><span class="lineno">  796</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogInformation(<span class="stringliteral">&quot;Mapping ALL additional accessible text channels&quot;</span>);</div>
<div class="line"><span class="lineno">  797</span>                var allAccessibleChannels = await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a71748fbc2a36a3f401fd6b156cb6795d">GetAllAccessibleTextChannels</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  798</span>                var unmappedTextChannels = allAccessibleChannels</div>
<div class="line"><span class="lineno">  799</span>                    .Where(x =&gt; !tasks.Any(task =&gt; task.Result != <span class="keyword">null</span> &amp;&amp; <span class="keyword">new</span> Snowflake(task.Result.Item1.DiscordChannelId.Value) == x.ID));</div>
<div class="line"><span class="lineno">  800</span> </div>
<div class="line"><span class="lineno">  801</span>                async Task&lt;Tuple&lt;Models.ChatChannel, IEnumerable&lt;ChannelRepresentation&gt;&gt;&gt; CreateMappingsForUnmappedChannels()</div>
<div class="line"><span class="lineno">  802</span>                {</div>
<div class="line"><span class="lineno">  803</span>                    var unmappedTasks =</div>
<div class="line"><span class="lineno">  804</span>                        unmappedTextChannels.Select(</div>
<div class="line"><span class="lineno">  805</span>                            async unmappedTextChannel =&gt;</div>
<div class="line"><span class="lineno">  806</span>                            {</div>
<div class="line"><span class="lineno">  807</span>                                var fakeChannelModel = <span class="keyword">new</span> Models.ChatChannel</div>
<div class="line"><span class="lineno">  808</span>                                {</div>
<div class="line"><span class="lineno">  809</span>                                    DiscordChannelId = unmappedTextChannel.ID.Value,</div>
<div class="line"><span class="lineno">  810</span>                                    IsAdminChannel = channelIdZeroModel.IsAdminChannel,</div>
<div class="line"><span class="lineno">  811</span>                                    Tag = channelIdZeroModel.Tag,</div>
<div class="line"><span class="lineno">  812</span>                                };</div>
<div class="line"><span class="lineno">  813</span> </div>
<div class="line"><span class="lineno">  814</span>                                var tuple = await GetModelChannelFromDBChannel(fakeChannelModel);</div>
<div class="line"><span class="lineno">  815</span>                                <span class="keywordflow">return</span> tuple?.Item2.First();</div>
<div class="line"><span class="lineno">  816</span>                            })</div>
<div class="line"><span class="lineno">  817</span>                        .ToList();</div>
<div class="line"><span class="lineno">  818</span> </div>
<div class="line"><span class="lineno">  819</span>                    <span class="comment">// Add catch-all channel</span></div>
<div class="line"><span class="lineno">  820</span>                    unmappedTasks.Add(Task.FromResult(</div>
<div class="line"><span class="lineno">  821</span>                        <span class="keyword">new</span> ChannelRepresentation</div>
<div class="line"><span class="lineno">  822</span>                        {</div>
<div class="line"><span class="lineno">  823</span>                            IsAdminChannel = channelIdZeroModel.IsAdminChannel.Value,</div>
<div class="line"><span class="lineno">  824</span>                            ConnectionName = <span class="stringliteral">&quot;(Unknown Discord Guilds)&quot;</span>,</div>
<div class="line"><span class="lineno">  825</span>                            EmbedsSupported = true,</div>
<div class="line"><span class="lineno">  826</span>                            FriendlyName = <span class="stringliteral">&quot;(Unknown Discord Channels)&quot;</span>,</div>
<div class="line"><span class="lineno">  827</span>                            RealId = 0,</div>
<div class="line"><span class="lineno">  828</span>                            Tag = channelIdZeroModel.Tag,</div>
<div class="line"><span class="lineno">  829</span>                        }));</div>
<div class="line"><span class="lineno">  830</span> </div>
<div class="line"><span class="lineno">  831</span>                    await Task.WhenAll(unmappedTasks);</div>
<div class="line"><span class="lineno">  832</span>                    <span class="keywordflow">return</span> Tuple.Create&lt;Models.ChatChannel, IEnumerable&lt;ChannelRepresentation&gt;&gt;(</div>
<div class="line"><span class="lineno">  833</span>                        channelIdZeroModel,</div>
<div class="line"><span class="lineno">  834</span>                        unmappedTasks.Select(x =&gt; x.Result).Where(x =&gt; x != <span class="keyword">null</span>).ToList());</div>
<div class="line"><span class="lineno">  835</span>                }</div>
<div class="line"><span class="lineno">  836</span> </div>
<div class="line"><span class="lineno">  837</span>                var task = CreateMappingsForUnmappedChannels();</div>
<div class="line"><span class="lineno">  838</span>                await task;</div>
<div class="line"><span class="lineno">  839</span>                tasks.Add(task);</div>
<div class="line"><span class="lineno">  840</span>            }</div>
<div class="line"><span class="lineno">  841</span> </div>
<div class="line"><span class="lineno">  842</span>            var enumerator = tasks</div>
<div class="line"><span class="lineno">  843</span>                .Select(x =&gt; x.Result)</div>
<div class="line"><span class="lineno">  844</span>                .Where(x =&gt; x != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  845</span>                .ToList();</div>
<div class="line"><span class="lineno">  846</span> </div>
<div class="line"><span class="lineno">  847</span>            lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a044ae95d278a4ed4a6a02449e24e8146">mappedChannels</a>)</div>
<div class="line"><span class="lineno">  848</span>            {</div>
<div class="line"><span class="lineno">  849</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a044ae95d278a4ed4a6a02449e24e8146">mappedChannels</a>.Clear();</div>
<div class="line"><span class="lineno">  850</span>                <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a044ae95d278a4ed4a6a02449e24e8146">mappedChannels</a>.AddRange(enumerator.SelectMany(x =&gt; x.Item2).Select(x =&gt; x.RealId));</div>
<div class="line"><span class="lineno">  851</span>            }</div>
<div class="line"><span class="lineno">  852</span> </div>
<div class="line"><span class="lineno">  853</span>            <span class="keywordflow">if</span> (remapRequired)</div>
<div class="line"><span class="lineno">  854</span>            {</div>
<div class="line"><span class="lineno">  855</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogWarning(<span class="stringliteral">&quot;Some channels failed to load with unknown errors. We will request that these be remapped, but it may result in communication spam. Please check prior logs and report an issue if this occurs.&quot;</span>);</div>
<div class="line"><span class="lineno">  856</span>                <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ac45c189505744c6f1012461193fca877">EnqueueMessage</a>(<span class="keyword">null</span>);</div>
<div class="line"><span class="lineno">  857</span>            }</div>
<div class="line"><span class="lineno">  858</span> </div>
<div class="line"><span class="lineno">  859</span>            <span class="keywordflow">return</span> <span class="keyword">new</span> Dictionary&lt;Models.ChatChannel, IEnumerable&lt;ChannelRepresentation&gt;&gt;(enumerator.Select(x =&gt; <span class="keyword">new</span> KeyValuePair&lt;Models.ChatChannel, IEnumerable&lt;ChannelRepresentation&gt;&gt;(x.Item1, x.Item2)));</div>
<div class="line"><span class="lineno">  860</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_html_a71748fbc2a36a3f401fd6b156cb6795d"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a71748fbc2a36a3f401fd6b156cb6795d">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.GetAllAccessibleTextChannels</a></div><div class="ttdeci">async Task&lt; IEnumerable&lt; IChannel &gt; &gt; GetAllAccessibleTextChannels(CancellationToken cancellationToken)</div><div class="ttdoc">Get all text IChannels accessible to and supported by the bot.</div><div class="ttdef"><b>Definition:</b> <a href="_discord_provider_8cs_source.html#l00867">DiscordProvider.cs:867</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider_html_ac45c189505744c6f1012461193fca877"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ac45c189505744c6f1012461193fca877">Tgstation.Server.Host.Components.Chat.Providers.Provider.EnqueueMessage</a></div><div class="ttdeci">void EnqueueMessage(Message message)</div><div class="ttdoc">Queues a message  for NextMessage(CancellationToken).</div><div class="ttdef"><b>Definition:</b> <a href="_provider_8cs_source.html#l00223">Provider.cs:223</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_provider_8cs_source.html#l00223">Tgstation.Server.Host.Components.Chat.Providers.Provider.EnqueueMessage()</a>, <a class="el" href="_discord_provider_8cs_source.html#l00867">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.GetAllAccessibleTextChannels()</a>, <a class="el" href="_chat_channel_base_8cs_source.html#l00014">Tgstation.Server.Api.Models.Internal.ChatChannelBase.IsAdminChannel</a>, <a class="el" href="_provider_8cs_source.html#l00036">Tgstation.Server.Host.Components.Chat.Providers.Provider.Logger</a>, <a class="el" href="_discord_provider_8cs_source.html#l00081">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.mappedChannels</a>, <a class="el" href="_discord_provider_8cs_source.html#l00076">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.serviceProvider</a>, <a class="el" href="_discord_provider_8cs_source.html#l00060">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.SupportedGuildChannelTypes</a>, and <a class="el" href="_channel_representation_8cs_source.html#l00053">Tgstation.Server.Host.Components.Chat.ChannelRepresentation.Tag</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_a6380fd69a8ac2c84d5521b0645f85f6d_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_a6380fd69a8ac2c84d5521b0645f85f6d_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_a6380fd69a8ac2c84d5521b0645f85f6d_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_a6380fd69a8ac2c84d5521b0645f85f6d_cgraph">
<area shape="rect" title=" " alt="" coords="5,41,315,81"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ac45c189505744c6f1012461193fca877" title="Queues a message &#160;for NextMessage(CancellationToken)." alt="" coords="363,5,627,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a71748fbc2a36a3f401fd6b156cb6795d" title="Get all text IChannels accessible to and supported by the bot." alt="" coords="374,70,615,125"/>
</map>
</div>

</div>
</div>
<a id="a3cf5b9ba9079d6c9f582f61b5894f7c1" name="a3cf5b9ba9079d6c9f582f61b5894f7c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cf5b9ba9079d6c9f582f61b5894f7c1">&#9670;&#160;</a></span>NormalizeMentions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static string Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.NormalizeMentions </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>fromDiscord</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Normalize a discord mention string.  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fromDiscord</td><td>The mention string provided by the Discord library.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The normalized mention string.</dd></dl>

<p class="reference">Referenced by <a class="el" href="_discord_provider_8cs_source.html#l00510">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.RespondAsync()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_a3cf5b9ba9079d6c9f582f61b5894f7c1_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_a3cf5b9ba9079d6c9f582f61b5894f7c1_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_a3cf5b9ba9079d6c9f582f61b5894f7c1_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_a3cf5b9ba9079d6c9f582f61b5894f7c1_icgraph">
<area shape="rect" title="Normalize a discord mention string." alt="" coords="345,5,608,60"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a8d7bbc5ddb64df2800554c354ff1974a" title=" " alt="" coords="5,13,297,53"/>
</map>
</div>

</div>
</div>
<a id="a8d7bbc5ddb64df2800554c354ff1974a" name="a8d7bbc5ddb64df2800554c354ff1974a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d7bbc5ddb64df2800554c354ff1974a">&#9670;&#160;</a></span>RespondAsync() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; Result &gt; Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.RespondAsync </td>
          <td>(</td>
          <td class="paramtype">IMessageCreate&#160;</td>
          <td class="paramname"><em>messageCreateEvent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="_discord_provider_8cs_source.html#l00510">510</a> of file <a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  511</span>        {</div>
<div class="line"><span class="lineno">  512</span>            ArgumentNullException.ThrowIfNull(messageCreateEvent);</div>
<div class="line"><span class="lineno">  513</span> </div>
<div class="line"><span class="lineno">  514</span>            <span class="keywordflow">if</span> ((messageCreateEvent.Type != MessageType.Default</div>
<div class="line"><span class="lineno">  515</span>                &amp;&amp; messageCreateEvent.Type != MessageType.InlineReply)</div>
<div class="line"><span class="lineno">  516</span>                || messageCreateEvent.Author.ID == <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a38455db633742e90572b9a83aa681831">currentUserId</a>)</div>
<div class="line"><span class="lineno">  517</span>                <span class="keywordflow">return</span> Result.FromSuccess();</div>
<div class="line"><span class="lineno">  518</span> </div>
<div class="line"><span class="lineno">  519</span>            var messageReference = <span class="keyword">new</span> MessageReference</div>
<div class="line"><span class="lineno">  520</span>            {</div>
<div class="line"><span class="lineno">  521</span>                ChannelID = messageCreateEvent.ChannelID,</div>
<div class="line"><span class="lineno">  522</span>                GuildID = messageCreateEvent.GuildID,</div>
<div class="line"><span class="lineno">  523</span>                MessageID = messageCreateEvent.ID,</div>
<div class="line"><span class="lineno">  524</span>                FailIfNotExists = <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  525</span>            };</div>
<div class="line"><span class="lineno">  526</span> </div>
<div class="line"><span class="lineno">  527</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a0ded452b4301f7d7dc776c15cbb76956">basedMeme</a> &amp;&amp; messageCreateEvent.Content.Equals(<span class="stringliteral">&quot;Based on what?&quot;</span>, StringComparison.OrdinalIgnoreCase))</div>
<div class="line"><span class="lineno">  528</span>            {</div>
<div class="line"><span class="lineno">  529</span>                await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#af4a17b4a63612dfafbd1d48f73ad1ee5">SendMessage</a>(</div>
<div class="line"><span class="lineno">  530</span>                    <span class="keyword">new</span> DiscordMessage</div>
<div class="line"><span class="lineno">  531</span>                    {</div>
<div class="line"><span class="lineno">  532</span>                        MessageReference = messageReference,</div>
<div class="line"><span class="lineno">  533</span>                    },</div>
<div class="line"><span class="lineno">  534</span>                    <span class="keyword">new</span> <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html">MessageContent</a></div>
<div class="line"><span class="lineno">  535</span>                    {</div>
<div class="line"><span class="lineno">  536</span>                        Text = <span class="stringliteral">&quot;https://youtu.be/LrNu-SuFF_o&quot;</span>,</div>
<div class="line"><span class="lineno">  537</span>                    },</div>
<div class="line"><span class="lineno">  538</span>                    messageCreateEvent.ChannelID.Value,</div>
<div class="line"><span class="lineno">  539</span>                    cancellationToken);</div>
<div class="line"><span class="lineno">  540</span>                <span class="keywordflow">return</span> Result.FromSuccess();</div>
<div class="line"><span class="lineno">  541</span>            }</div>
<div class="line"><span class="lineno">  542</span> </div>
<div class="line"><span class="lineno">  543</span>            var channelsClient = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ae7dd055bf64dcff2228ae66fdcff7e92">serviceProvider</a>.GetRequiredService&lt;IDiscordRestChannelAPI&gt;();</div>
<div class="line"><span class="lineno">  544</span>            var channelResponse = await channelsClient.GetChannelAsync(messageCreateEvent.ChannelID, cancellationToken);</div>
<div class="line"><span class="lineno">  545</span>            <span class="keywordflow">if</span> (!channelResponse.IsSuccess)</div>
<div class="line"><span class="lineno">  546</span>            {</div>
<div class="line"><span class="lineno">  547</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogWarning(</div>
<div class="line"><span class="lineno">  548</span>                    <span class="stringliteral">&quot;Failed to get channel {channelId} in response to message {messageId}!&quot;</span>,</div>
<div class="line"><span class="lineno">  549</span>                    messageCreateEvent.ChannelID,</div>
<div class="line"><span class="lineno">  550</span>                    messageCreateEvent.ID);</div>
<div class="line"><span class="lineno">  551</span> </div>
<div class="line"><span class="lineno">  552</span>                <span class="comment">// we&#39;ll handle the errors ourselves</span></div>
<div class="line"><span class="lineno">  553</span>                <span class="keywordflow">return</span> Result.FromSuccess();</div>
<div class="line"><span class="lineno">  554</span>            }</div>
<div class="line"><span class="lineno">  555</span> </div>
<div class="line"><span class="lineno">  556</span>            var pm = channelResponse.Entity.Type == ChannelType.DM || channelResponse.Entity.Type == ChannelType.GroupDM;</div>
<div class="line"><span class="lineno">  557</span>            var shouldNotAnswer = !pm;</div>
<div class="line"><span class="lineno">  558</span>            <span class="keywordflow">if</span> (shouldNotAnswer)</div>
<div class="line"><span class="lineno">  559</span>                lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a044ae95d278a4ed4a6a02449e24e8146">mappedChannels</a>)</div>
<div class="line"><span class="lineno">  560</span>                    shouldNotAnswer = !<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a044ae95d278a4ed4a6a02449e24e8146">mappedChannels</a>.Contains(messageCreateEvent.ChannelID.Value) &amp;&amp; !<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a044ae95d278a4ed4a6a02449e24e8146">mappedChannels</a>.Contains(0);</div>
<div class="line"><span class="lineno">  561</span> </div>
<div class="line"><span class="lineno">  562</span>            var content = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a3cf5b9ba9079d6c9f582f61b5894f7c1">NormalizeMentions</a>(messageCreateEvent.Content);</div>
<div class="line"><span class="lineno">  563</span>            var mentionedUs = messageCreateEvent.Mentions.Any(x =&gt; x.ID == <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a38455db633742e90572b9a83aa681831">currentUserId</a>)</div>
<div class="line"><span class="lineno">  564</span>                || (!shouldNotAnswer &amp;&amp; content.Split(<span class="charliteral">&#39; &#39;</span>).First().Equals(ChatManager.CommonMention, StringComparison.OrdinalIgnoreCase));</div>
<div class="line"><span class="lineno">  565</span> </div>
<div class="line"><span class="lineno">  566</span>            <span class="keywordflow">if</span> (shouldNotAnswer)</div>
<div class="line"><span class="lineno">  567</span>            {</div>
<div class="line"><span class="lineno">  568</span>                <span class="keywordflow">if</span> (mentionedUs)</div>
<div class="line"><span class="lineno">  569</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogTrace(</div>
<div class="line"><span class="lineno">  570</span>                        <span class="stringliteral">&quot;Ignoring mention from {channelId} ({channelName}) by {authorId} ({authorName}). Channel not mapped!&quot;</span>,</div>
<div class="line"><span class="lineno">  571</span>                        messageCreateEvent.ChannelID,</div>
<div class="line"><span class="lineno">  572</span>                        channelResponse.Entity.Name,</div>
<div class="line"><span class="lineno">  573</span>                        messageCreateEvent.Author.ID,</div>
<div class="line"><span class="lineno">  574</span>                        messageCreateEvent.Author.Username);</div>
<div class="line"><span class="lineno">  575</span> </div>
<div class="line"><span class="lineno">  576</span>                <span class="keywordflow">return</span> Result.FromSuccess();</div>
<div class="line"><span class="lineno">  577</span>            }</div>
<div class="line"><span class="lineno">  578</span> </div>
<div class="line"><span class="lineno">  579</span>            <span class="keywordtype">string</span> guildName = <span class="stringliteral">&quot;UNKNOWN&quot;</span>;</div>
<div class="line"><span class="lineno">  580</span>            <span class="keywordflow">if</span> (!pm)</div>
<div class="line"><span class="lineno">  581</span>            {</div>
<div class="line"><span class="lineno">  582</span>                var guildsClient = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ae7dd055bf64dcff2228ae66fdcff7e92">serviceProvider</a>.GetRequiredService&lt;IDiscordRestGuildAPI&gt;();</div>
<div class="line"><span class="lineno">  583</span>                var messageGuildResponse = await guildsClient.GetGuildAsync(messageCreateEvent.GuildID.Value, <span class="keyword">false</span>, cancellationToken);</div>
<div class="line"><span class="lineno">  584</span>                <span class="keywordflow">if</span> (messageGuildResponse.IsSuccess)</div>
<div class="line"><span class="lineno">  585</span>                    guildName = messageGuildResponse.Entity.Name;</div>
<div class="line"><span class="lineno">  586</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  587</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogWarning(</div>
<div class="line"><span class="lineno">  588</span>                        <span class="stringliteral">&quot;Failed to get channel {channelID} in response to message {messageID}: {result}&quot;</span>,</div>
<div class="line"><span class="lineno">  589</span>                        messageCreateEvent.ChannelID,</div>
<div class="line"><span class="lineno">  590</span>                        messageCreateEvent.ID,</div>
<div class="line"><span class="lineno">  591</span>                        messageGuildResponse.LogFormat());</div>
<div class="line"><span class="lineno">  592</span>            }</div>
<div class="line"><span class="lineno">  593</span> </div>
<div class="line"><span class="lineno">  594</span>            var result = <span class="keyword">new</span> DiscordMessage</div>
<div class="line"><span class="lineno">  595</span>            {</div>
<div class="line"><span class="lineno">  596</span>                MessageReference = messageReference,</div>
<div class="line"><span class="lineno">  597</span>                Content = content,</div>
<div class="line"><span class="lineno">  598</span>                <a class="code hl_class" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">User</a> = <span class="keyword">new</span> ChatUser</div>
<div class="line"><span class="lineno">  599</span>                {</div>
<div class="line"><span class="lineno">  600</span>                    RealId = messageCreateEvent.Author.ID.Value,</div>
<div class="line"><span class="lineno">  601</span>                    Channel = <span class="keyword">new</span> ChannelRepresentation</div>
<div class="line"><span class="lineno">  602</span>                    {</div>
<div class="line"><span class="lineno">  603</span>                        RealId = messageCreateEvent.ChannelID.Value,</div>
<div class="line"><span class="lineno">  604</span>                        IsPrivateChannel = pm,</div>
<div class="line"><span class="lineno">  605</span>                        ConnectionName = pm ? messageCreateEvent.Author.Username : guildName,</div>
<div class="line"><span class="lineno">  606</span>                        FriendlyName = channelResponse.Entity.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_user_name.html#a74805e22cab51569d1d1aa098d62c9d3">Name</a>.Value,</div>
<div class="line"><span class="lineno">  607</span>                        EmbedsSupported = <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno">  608</span> </div>
<div class="line"><span class="lineno">  609</span>                        <span class="comment">// isAdmin and Tag populated by manager</span></div>
<div class="line"><span class="lineno">  610</span>                    },</div>
<div class="line"><span class="lineno">  611</span>                    FriendlyName = messageCreateEvent.Author.Username,</div>
<div class="line"><span class="lineno">  612</span>                    Mention = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a3cf5b9ba9079d6c9f582f61b5894f7c1">NormalizeMentions</a>($<span class="stringliteral">&quot;&lt;@{messageCreateEvent.Author.ID}&gt;&quot;</span>),</div>
<div class="line"><span class="lineno">  613</span>                },</div>
<div class="line"><span class="lineno">  614</span>            };</div>
<div class="line"><span class="lineno">  615</span> </div>
<div class="line"><span class="lineno">  616</span>            <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ac45c189505744c6f1012461193fca877">EnqueueMessage</a>(result);</div>
<div class="line"><span class="lineno">  617</span>            <span class="keywordflow">return</span> Result.FromSuccess();</div>
<div class="line"><span class="lineno">  618</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_api_1_1_models_1_1_user_name_html_a74805e22cab51569d1d1aa098d62c9d3"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_api_1_1_models_1_1_user_name.html#a74805e22cab51569d1d1aa098d62c9d3">Tgstation.Server.Api.Models.UserName.Name</a></div><div class="ttdeci">override? string Name</div><div class="ttdef"><b>Definition:</b> <a href="_user_name_8cs_source.html#l00010">UserName.cs:11</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_html_a3cf5b9ba9079d6c9f582f61b5894f7c1"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a3cf5b9ba9079d6c9f582f61b5894f7c1">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.NormalizeMentions</a></div><div class="ttdeci">static string NormalizeMentions(string fromDiscord)</div><div class="ttdoc">Normalize a discord mention string.</div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_html_af4a17b4a63612dfafbd1d48f73ad1ee5"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#af4a17b4a63612dfafbd1d48f73ad1ee5">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.SendMessage</a></div><div class="ttdeci">override async Task SendMessage(Message replyTo, MessageContent message, ulong channelId, CancellationToken cancellationToken)</div><div class="ttdoc">Send a message to the IProvider. A Task representing the running operation.</div><div class="ttdef"><b>Definition:</b> <a href="_discord_provider_8cs_source.html#l00288">DiscordProvider.cs:288</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html">Tgstation.Server.Host.Components.Interop.MessageContent</a></div><div class="ttdoc">Represents a message to send to a chat provider.</div><div class="ttdef"><b>Definition:</b> <a href="_message_content_8cs_source.html#l00006">MessageContent.cs:7</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_models_1_1_user_html"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_user.html">Tgstation.Server.Host.Models.User</a></div><div class="ttdef"><b>Definition:</b> <a href="_user_8cs_source.html#l00012">User.cs:13</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_discord_provider_8cs_source.html#l00091">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.basedMeme</a>, <a class="el" href="_chat_manager_8cs_source.html#l00030">Tgstation.Server.Host.Components.Chat.ChatManager.CommonMention</a>, <a class="el" href="_discord_provider_8cs_source.html#l00121">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.currentUserId</a>, <a class="el" href="_provider_8cs_source.html#l00223">Tgstation.Server.Host.Components.Chat.Providers.Provider.EnqueueMessage()</a>, <a class="el" href="_provider_8cs_source.html#l00036">Tgstation.Server.Host.Components.Chat.Providers.Provider.Logger</a>, <a class="el" href="_discord_provider_8cs_source.html#l00081">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.mappedChannels</a>, <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a3cf5b9ba9079d6c9f582f61b5894f7c1">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.NormalizeMentions()</a>, <a class="el" href="_discord_provider_8cs_source.html#l00288">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.SendMessage()</a>, and <a class="el" href="_discord_provider_8cs_source.html#l00076">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.serviceProvider</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_a8d7bbc5ddb64df2800554c354ff1974a_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_a8d7bbc5ddb64df2800554c354ff1974a_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_a8d7bbc5ddb64df2800554c354ff1974a_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_a8d7bbc5ddb64df2800554c354ff1974a_cgraph">
<area shape="rect" title=" " alt="" coords="5,48,297,88"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ac45c189505744c6f1012461193fca877" title="Queues a message &#160;for NextMessage(CancellationToken)." alt="" coords="669,5,933,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a3cf5b9ba9079d6c9f582f61b5894f7c1" title="Normalize a discord mention string." alt="" coords="345,41,608,95"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#af4a17b4a63612dfafbd1d48f73ad1ee5" title="Send a message to the IProvider. A Task representing the running operation." alt="" coords="359,119,594,174"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#acb7a2fd7f33039ab041c83beca2b85f0" title="Convert a ChatEmbed to an IEmbed parameters." alt="" coords="656,91,947,131"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a71748fbc2a36a3f401fd6b156cb6795d" title="Get all text IChannels accessible to and supported by the bot." alt="" coords="681,155,922,210"/>
</map>
</div>

</div>
</div>
<a id="addfb0baffffb90712e76e9bfc1800a15" name="addfb0baffffb90712e76e9bfc1800a15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addfb0baffffb90712e76e9bfc1800a15">&#9670;&#160;</a></span>RespondAsync() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Task&lt; Result &gt; Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.RespondAsync </td>
          <td>(</td>
          <td class="paramtype">IReady&#160;</td>
          <td class="paramname"><em>readyEvent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="_discord_provider_8cs_source.html#l00621">621</a> of file <a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  622</span>        {</div>
<div class="line"><span class="lineno">  623</span>            ArgumentNullException.ThrowIfNull(readyEvent);</div>
<div class="line"><span class="lineno">  624</span> </div>
<div class="line"><span class="lineno">  625</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogTrace(<span class="stringliteral">&quot;Gatway ready. Version: {version}&quot;</span>, readyEvent.Version);</div>
<div class="line"><span class="lineno">  626</span>            <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a9c68a7a7bcd8b837c8b9b128890e9015">gatewayReadyTcs</a>?.TrySetResult();</div>
<div class="line"><span class="lineno">  627</span>            <span class="keywordflow">return</span> Task.FromResult(Result.FromSuccess());</div>
<div class="line"><span class="lineno">  628</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_discord_provider_8cs_source.html#l00111">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.gatewayReadyTcs</a>, and <a class="el" href="_provider_8cs_source.html#l00036">Tgstation.Server.Host.Components.Chat.Providers.Provider.Logger</a>.</p>

</div>
</div>
<a id="af4a17b4a63612dfafbd1d48f73ad1ee5" name="af4a17b4a63612dfafbd1d48f73ad1ee5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4a17b4a63612dfafbd1d48f73ad1ee5">&#9670;&#160;</a></span>SendMessage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">override async Task Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.SendMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_message.html">Message</a>&#160;</td>
          <td class="paramname"><em>replyTo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html">MessageContent</a>&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulong&#160;</td>
          <td class="paramname"><em>channelId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send a message to the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html" title="For interacting with a chat service.">IProvider</a>. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">replyTo</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_message.html" title="Represents a message recieved by a IProvider.">Message</a> to reply to.</td></tr>
    <tr><td class="paramname">message</td><td>The MessageContent.</td></tr>
    <tr><td class="paramname">channelId</td><td>The <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_channel_representation.html#a983af752bfee4125d2a94370dc128c48" title="The Providers.IProvider channel Id.">ChannelRepresentation.RealId</a> to send to.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>The CancellationToken for the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Task representing the running operation.</dd></dl>
 </p>

<p>Implements <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#a8bfb93cc63e31af62a2513e4541d6162">Tgstation.Server.Host.Components.Chat.Providers.Provider</a>.</p>

<p class="definition">Definition at line <a class="el" href="_discord_provider_8cs_source.html#l00288">288</a> of file <a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  289</span>        {</div>
<div class="line"><span class="lineno">  290</span>            ArgumentNullException.ThrowIfNull(message);</div>
<div class="line"><span class="lineno">  291</span> </div>
<div class="line"><span class="lineno">  292</span>            Optional&lt;IMessageReference&gt; replyToReference = <span class="keywordflow">default</span>;</div>
<div class="line"><span class="lineno">  293</span>            Optional&lt;IAllowedMentions&gt; allowedMentions = <span class="keywordflow">default</span>;</div>
<div class="line"><span class="lineno">  294</span>            <span class="keywordflow">if</span> (replyTo != <span class="keyword">null</span> &amp;&amp; replyTo is DiscordMessage discordMessage)</div>
<div class="line"><span class="lineno">  295</span>            {</div>
<div class="line"><span class="lineno">  296</span>                replyToReference = discordMessage.MessageReference;</div>
<div class="line"><span class="lineno">  297</span>                allowedMentions = <span class="keyword">new</span> AllowedMentions(</div>
<div class="line"><span class="lineno">  298</span>                    Parse: <span class="keyword">new</span> List&lt;MentionType&gt; <span class="comment">// reset settings back to how discord acts if this is not passed (which is different than the default if empty)</span></div>
<div class="line"><span class="lineno">  299</span>                    {</div>
<div class="line"><span class="lineno">  300</span>                        MentionType.Everyone,</div>
<div class="line"><span class="lineno">  301</span>                        MentionType.Roles,</div>
<div class="line"><span class="lineno">  302</span>                        MentionType.Users,</div>
<div class="line"><span class="lineno">  303</span>                    },</div>
<div class="line"><span class="lineno">  304</span>                    MentionRepliedUser: <span class="keyword">false</span>); <span class="comment">// disable reply mentions</span></div>
<div class="line"><span class="lineno">  305</span>            }</div>
<div class="line"><span class="lineno">  306</span> </div>
<div class="line"><span class="lineno">  307</span>            var embeds = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#acb7a2fd7f33039ab041c83beca2b85f0">ConvertEmbed</a>(message.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html#a4a3e59ac62b7e273e35d5ee5bf6d658f">Embed</a>);</div>
<div class="line"><span class="lineno">  308</span> </div>
<div class="line"><span class="lineno">  309</span>            var channelsClient = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ae7dd055bf64dcff2228ae66fdcff7e92">serviceProvider</a>.GetRequiredService&lt;IDiscordRestChannelAPI&gt;();</div>
<div class="line"><span class="lineno">  310</span>            async Task SendToChannel(Snowflake channelId)</div>
<div class="line"><span class="lineno">  311</span>            {</div>
<div class="line"><span class="lineno">  312</span>                var result = await channelsClient.CreateMessageAsync(</div>
<div class="line"><span class="lineno">  313</span>                    channelId,</div>
<div class="line"><span class="lineno">  314</span>                    message.<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html#afc1d8f1a06bc8ce61a1d86b168ee123f">Text</a>,</div>
<div class="line"><span class="lineno">  315</span>                    embeds: embeds,</div>
<div class="line"><span class="lineno">  316</span>                    messageReference: replyToReference,</div>
<div class="line"><span class="lineno">  317</span>                    allowedMentions: allowedMentions,</div>
<div class="line"><span class="lineno">  318</span>                    ct: cancellationToken);</div>
<div class="line"><span class="lineno">  319</span> </div>
<div class="line"><span class="lineno">  320</span>                <span class="keywordflow">if</span> (!result.IsSuccess)</div>
<div class="line"><span class="lineno">  321</span>                {</div>
<div class="line"><span class="lineno">  322</span>                    <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogWarning(</div>
<div class="line"><span class="lineno">  323</span>                        <span class="stringliteral">&quot;Failed to send to channel {channelId}: {result}&quot;</span>,</div>
<div class="line"><span class="lineno">  324</span>                        channelId,</div>
<div class="line"><span class="lineno">  325</span>                        result.LogFormat());</div>
<div class="line"><span class="lineno">  326</span> </div>
<div class="line"><span class="lineno">  327</span>                    <span class="keywordflow">if</span> (result.Error is RestResultError&lt;RestError&gt; restError &amp;&amp; restError.Error.Code == DiscordError.InvalidFormBody)</div>
<div class="line"><span class="lineno">  328</span>                        await channelsClient.CreateMessageAsync(</div>
<div class="line"><span class="lineno">  329</span>                            channelId,</div>
<div class="line"><span class="lineno">  330</span>                            <span class="stringliteral">&quot;TGS: Could not send message to Discord. Body was malformed or too long&quot;</span>,</div>
<div class="line"><span class="lineno">  331</span>                            messageReference: replyToReference,</div>
<div class="line"><span class="lineno">  332</span>                            allowedMentions: allowedMentions,</div>
<div class="line"><span class="lineno">  333</span>                            ct: cancellationToken);</div>
<div class="line"><span class="lineno">  334</span>                }</div>
<div class="line"><span class="lineno">  335</span>            }</div>
<div class="line"><span class="lineno">  336</span> </div>
<div class="line"><span class="lineno">  337</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  338</span>            {</div>
<div class="line"><span class="lineno">  339</span>                <span class="keywordflow">if</span> (channelId == 0)</div>
<div class="line"><span class="lineno">  340</span>                {</div>
<div class="line"><span class="lineno">  341</span>                    IEnumerable&lt;IChannel&gt; unmappedTextChannels;</div>
<div class="line"><span class="lineno">  342</span>                    var allAccessibleTextChannels = await <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a71748fbc2a36a3f401fd6b156cb6795d">GetAllAccessibleTextChannels</a>(cancellationToken);</div>
<div class="line"><span class="lineno">  343</span>                    lock (<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a044ae95d278a4ed4a6a02449e24e8146">mappedChannels</a>)</div>
<div class="line"><span class="lineno">  344</span>                    {</div>
<div class="line"><span class="lineno">  345</span>                        unmappedTextChannels = allAccessibleTextChannels</div>
<div class="line"><span class="lineno">  346</span>                            .Where(x =&gt; !<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a044ae95d278a4ed4a6a02449e24e8146">mappedChannels</a>.Contains(x.ID.Value))</div>
<div class="line"><span class="lineno">  347</span>                            .ToList();</div>
<div class="line"><span class="lineno">  348</span> </div>
<div class="line"><span class="lineno">  349</span>                        var remapRequired = unmappedTextChannels.Any()</div>
<div class="line"><span class="lineno">  350</span>                            || <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a044ae95d278a4ed4a6a02449e24e8146">mappedChannels</a>.Any(</div>
<div class="line"><span class="lineno">  351</span>                                mappedChannel =&gt; !allAccessibleTextChannels.Any(</div>
<div class="line"><span class="lineno">  352</span>                                    accessibleTextChannel =&gt; accessibleTextChannel.ID == <span class="keyword">new</span> Snowflake(mappedChannel)));</div>
<div class="line"><span class="lineno">  353</span> </div>
<div class="line"><span class="lineno">  354</span>                        <span class="keywordflow">if</span> (remapRequired)</div>
<div class="line"><span class="lineno">  355</span>                            <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ac45c189505744c6f1012461193fca877">EnqueueMessage</a>(<span class="keyword">null</span>);</div>
<div class="line"><span class="lineno">  356</span>                    }</div>
<div class="line"><span class="lineno">  357</span> </div>
<div class="line"><span class="lineno">  358</span>                    <span class="comment">// discord API confirmed weak boned: https://stackoverflow.com/a/52462336</span></div>
<div class="line"><span class="lineno">  359</span>                    <span class="keywordflow">if</span> (unmappedTextChannels.Any())</div>
<div class="line"><span class="lineno">  360</span>                    {</div>
<div class="line"><span class="lineno">  361</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogDebug(<span class="stringliteral">&quot;Dispatching to {count} unmapped channels...&quot;</span>, unmappedTextChannels.Count());</div>
<div class="line"><span class="lineno">  362</span>                        await Task.WhenAll(</div>
<div class="line"><span class="lineno">  363</span>                            unmappedTextChannels.Select(</div>
<div class="line"><span class="lineno">  364</span>                                x =&gt; SendToChannel(x.ID)));</div>
<div class="line"><span class="lineno">  365</span>                    }</div>
<div class="line"><span class="lineno">  366</span> </div>
<div class="line"><span class="lineno">  367</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  368</span>                }</div>
<div class="line"><span class="lineno">  369</span> </div>
<div class="line"><span class="lineno">  370</span>                await SendToChannel(<span class="keyword">new</span> Snowflake(channelId));</div>
<div class="line"><span class="lineno">  371</span>            }</div>
<div class="line"><span class="lineno">  372</span>            <span class="keywordflow">catch</span> (Exception e) when (e is not OperationCanceledException)</div>
<div class="line"><span class="lineno">  373</span>            {</div>
<div class="line"><span class="lineno">  374</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogWarning(e, <span class="stringliteral">&quot;Error sending discord message!&quot;</span>);</div>
<div class="line"><span class="lineno">  375</span>            }</div>
<div class="line"><span class="lineno">  376</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_html_acb7a2fd7f33039ab041c83beca2b85f0"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#acb7a2fd7f33039ab041c83beca2b85f0">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.ConvertEmbed</a></div><div class="ttdeci">Optional&lt; IReadOnlyList&lt; IEmbed &gt; &gt; ConvertEmbed(ChatEmbed embed)</div><div class="ttdoc">Convert a ChatEmbed to an IEmbed parameters.</div><div class="ttdef"><b>Definition:</b> <a href="_discord_provider_8cs_source.html#l00928">DiscordProvider.cs:928</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content_html_a4a3e59ac62b7e273e35d5ee5bf6d658f"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html#a4a3e59ac62b7e273e35d5ee5bf6d658f">Tgstation.Server.Host.Components.Interop.MessageContent.Embed</a></div><div class="ttdeci">ChatEmbed Embed</div><div class="ttdoc">The ChatEmbed.</div><div class="ttdef"><b>Definition:</b> <a href="_message_content_8cs_source.html#l00016">MessageContent.cs:16</a></div></div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content_html_afc1d8f1a06bc8ce61a1d86b168ee123f"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_interop_1_1_message_content.html#afc1d8f1a06bc8ce61a1d86b168ee123f">Tgstation.Server.Host.Components.Interop.MessageContent.Text</a></div><div class="ttdeci">string Text</div><div class="ttdoc">The message string.</div><div class="ttdef"><b>Definition:</b> <a href="_message_content_8cs_source.html#l00011">MessageContent.cs:11</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_discord_provider_8cs_source.html#l00928">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.ConvertEmbed()</a>, <a class="el" href="_message_content_8cs_source.html#l00016">Tgstation.Server.Host.Components.Interop.MessageContent.Embed</a>, <a class="el" href="_provider_8cs_source.html#l00223">Tgstation.Server.Host.Components.Chat.Providers.Provider.EnqueueMessage()</a>, <a class="el" href="_discord_provider_8cs_source.html#l00867">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.GetAllAccessibleTextChannels()</a>, <a class="el" href="_provider_8cs_source.html#l00036">Tgstation.Server.Host.Components.Chat.Providers.Provider.Logger</a>, <a class="el" href="_discord_provider_8cs_source.html#l00081">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.mappedChannels</a>, <a class="el" href="_discord_provider_8cs_source.html#l00076">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.serviceProvider</a>, and <a class="el" href="_message_content_8cs_source.html#l00011">Tgstation.Server.Host.Components.Interop.MessageContent.Text</a>.</p>

<p class="reference">Referenced by <a class="el" href="_discord_provider_8cs_source.html#l00510">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.RespondAsync()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_af4a17b4a63612dfafbd1d48f73ad1ee5_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_af4a17b4a63612dfafbd1d48f73ad1ee5_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_af4a17b4a63612dfafbd1d48f73ad1ee5_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_af4a17b4a63612dfafbd1d48f73ad1ee5_cgraph">
<area shape="rect" title="Send a message to the IProvider. A Task representing the running operation." alt="" coords="5,62,240,117"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#acb7a2fd7f33039ab041c83beca2b85f0" title="Convert a ChatEmbed to an IEmbed parameters." alt="" coords="288,5,579,45"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ac45c189505744c6f1012461193fca877" title="Queues a message &#160;for NextMessage(CancellationToken)." alt="" coords="301,69,565,109"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a71748fbc2a36a3f401fd6b156cb6795d" title="Get all text IChannels accessible to and supported by the bot." alt="" coords="313,134,554,189"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_af4a17b4a63612dfafbd1d48f73ad1ee5_icgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_af4a17b4a63612dfafbd1d48f73ad1ee5_icgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_af4a17b4a63612dfafbd1d48f73ad1ee5_icgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_af4a17b4a63612dfafbd1d48f73ad1ee5_icgraph">
<area shape="rect" title="Send a message to the IProvider. A Task representing the running operation." alt="" coords="345,5,580,60"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a8d7bbc5ddb64df2800554c354ff1974a" title=" " alt="" coords="5,13,297,53"/>
</map>
</div>

</div>
</div>
<a id="aababa7da5ca6ef1b92dfccff719e12ad" name="aababa7da5ca6ef1b92dfccff719e12ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aababa7da5ca6ef1b92dfccff719e12ad">&#9670;&#160;</a></span>SendUpdateMessage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">override async Task&lt; Func&lt; string, string, Task &gt; &gt; Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.SendUpdateMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_models_1_1_revision_information.html">Models.RevisionInformation</a>&#160;</td>
          <td class="paramname"><em>revisionInformation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Version&#160;</td>
          <td class="paramname"><em>byondVersion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DateTimeOffset?&#160;</td>
          <td class="paramname"><em>estimatedCompletionTime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>gitHubOwner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>gitHubRepo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulong&#160;</td>
          <td class="paramname"><em>channelId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>localCommitPushed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="_discord_provider_8cs_source.html#l00379">379</a> of file <a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  388</span>        {</div>
<div class="line"><span class="lineno">  389</span>            ArgumentNullException.ThrowIfNull(revisionInformation);</div>
<div class="line"><span class="lineno">  390</span>            ArgumentNullException.ThrowIfNull(byondVersion);</div>
<div class="line"><span class="lineno">  391</span>            ArgumentNullException.ThrowIfNull(gitHubOwner);</div>
<div class="line"><span class="lineno">  392</span>            ArgumentNullException.ThrowIfNull(gitHubRepo);</div>
<div class="line"><span class="lineno">  393</span> </div>
<div class="line"><span class="lineno">  394</span>            localCommitPushed |= revisionInformation.CommitSha == revisionInformation.OriginCommitSha;</div>
<div class="line"><span class="lineno">  395</span> </div>
<div class="line"><span class="lineno">  396</span>            var fields = <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a9a15e3d6b18f2a38152106f6f3c1a933">BuildUpdateEmbedFields</a>(revisionInformation, byondVersion, gitHubOwner, gitHubRepo, localCommitPushed);</div>
<div class="line"><span class="lineno">  397</span>            var author = <span class="keyword">new</span> EmbedAuthor(<a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a73f7fae07fc8d7efc90b6464dc2eca79">assemblyInformationProvider</a>.<a class="code hl_property" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html#ab2a2be82555afbf6ffb5b7ae3d90b7f0">VersionPrefix</a>)</div>
<div class="line"><span class="lineno">  398</span>            {</div>
<div class="line"><span class="lineno">  399</span>                Url = <span class="stringliteral">&quot;https://github.com/tgstation/tgstation-server&quot;</span>,</div>
<div class="line"><span class="lineno">  400</span>                IconUrl = <span class="stringliteral">&quot;https://avatars0.githubusercontent.com/u/1363778?s=280&amp;v=4&quot;</span>,</div>
<div class="line"><span class="lineno">  401</span>            };</div>
<div class="line"><span class="lineno">  402</span>            var embed = <span class="keyword">new</span> Embed</div>
<div class="line"><span class="lineno">  403</span>            {</div>
<div class="line"><span class="lineno">  404</span>                Author = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a182447c000f64abfb2e30336a6b9718f">deploymentBranding</a> ? author : <span class="keywordflow">default</span>,</div>
<div class="line"><span class="lineno">  405</span>                Colour = Color.FromArgb(0xF1, 0xC4, 0x0F),</div>
<div class="line"><span class="lineno">  406</span>                Description = <span class="stringliteral">&quot;TGS has begun deploying active repository code to production.&quot;</span>,</div>
<div class="line"><span class="lineno">  407</span>                Fields = fields,</div>
<div class="line"><span class="lineno">  408</span>                Title = <span class="stringliteral">&quot;Code Deployment&quot;</span>,</div>
<div class="line"><span class="lineno">  409</span>                Footer = <span class="keyword">new</span> EmbedFooter(</div>
<div class="line"><span class="lineno">  410</span>                    $<span class="stringliteral">&quot;In progress...{(estimatedCompletionTime.HasValue ? &quot;</span> ETA<span class="stringliteral">&quot; : String.Empty)}&quot;</span>),</div>
<div class="line"><span class="lineno">  411</span>                Timestamp = estimatedCompletionTime ?? <span class="keywordflow">default</span>,</div>
<div class="line"><span class="lineno">  412</span>            };</div>
<div class="line"><span class="lineno">  413</span> </div>
<div class="line"><span class="lineno">  414</span>            <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogTrace(<span class="stringliteral">&quot;Attempting to post deploy embed to channel {channelId}...&quot;</span>, channelId);</div>
<div class="line"><span class="lineno">  415</span>            var channelsClient = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ae7dd055bf64dcff2228ae66fdcff7e92">serviceProvider</a>.GetRequiredService&lt;IDiscordRestChannelAPI&gt;();</div>
<div class="line"><span class="lineno">  416</span> </div>
<div class="line"><span class="lineno">  417</span>            var messageResponse = await channelsClient.CreateMessageAsync(</div>
<div class="line"><span class="lineno">  418</span>                <span class="keyword">new</span> Snowflake(channelId),</div>
<div class="line"><span class="lineno">  419</span>                <span class="stringliteral">&quot;DM: Deployment in Progress...&quot;</span>,</div>
<div class="line"><span class="lineno">  420</span>                embeds: <span class="keyword">new</span> List&lt;IEmbed&gt; { embed },</div>
<div class="line"><span class="lineno">  421</span>                ct: cancellationToken);</div>
<div class="line"><span class="lineno">  422</span> </div>
<div class="line"><span class="lineno">  423</span>            <span class="keywordflow">if</span> (!messageResponse.IsSuccess)</div>
<div class="line"><span class="lineno">  424</span>                <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogWarning(<span class="stringliteral">&quot;Failed to post deploy embed to channel {channelId}: {result}&quot;</span>, channelId, messageResponse.LogFormat());</div>
<div class="line"><span class="lineno">  425</span> </div>
<div class="line"><span class="lineno">  426</span>            <span class="keywordflow">return</span> async (errorMessage, dreamMakerOutput) =&gt;</div>
<div class="line"><span class="lineno">  427</span>            {</div>
<div class="line"><span class="lineno">  428</span>                var completionString = errorMessage == <span class="keyword">null</span> ? <span class="stringliteral">&quot;Succeeded&quot;</span> : <span class="stringliteral">&quot;Failed&quot;</span>;</div>
<div class="line"><span class="lineno">  429</span> </div>
<div class="line"><span class="lineno">  430</span>                embed = <span class="keyword">new</span> Embed</div>
<div class="line"><span class="lineno">  431</span>                {</div>
<div class="line"><span class="lineno">  432</span>                    Author = embed.Author,</div>
<div class="line"><span class="lineno">  433</span>                    Colour = errorMessage == <span class="keyword">null</span> ? Color.Green : Color.Red,</div>
<div class="line"><span class="lineno">  434</span>                    Description = errorMessage == <span class="keyword">null</span></div>
<div class="line"><span class="lineno">  435</span>                    ? <span class="stringliteral">&quot;The deployment completed successfully and will be available at the next server reboot.&quot;</span></div>
<div class="line"><span class="lineno">  436</span>                    : <span class="stringliteral">&quot;The deployment failed.&quot;</span>,</div>
<div class="line"><span class="lineno">  437</span>                    Fields = fields,</div>
<div class="line"><span class="lineno">  438</span>                    Title = embed.Title,</div>
<div class="line"><span class="lineno">  439</span>                    Footer = <span class="keyword">new</span> EmbedFooter(</div>
<div class="line"><span class="lineno">  440</span>                        completionString),</div>
<div class="line"><span class="lineno">  441</span>                    Timestamp = DateTimeOffset.UtcNow,</div>
<div class="line"><span class="lineno">  442</span>                };</div>
<div class="line"><span class="lineno">  443</span> </div>
<div class="line"><span class="lineno">  444</span>                var showDMOutput = <a class="code hl_variable" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a96681c4d5a393d80bd2ff022eed95ee5">outputDisplayType</a> <span class="keywordflow">switch</span></div>
<div class="line"><span class="lineno">  445</span>                {</div>
<div class="line"><span class="lineno">  446</span>                    DiscordDMOutputDisplayType.Always =&gt; <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno">  447</span>                    DiscordDMOutputDisplayType.Never =&gt; <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  448</span>                    DiscordDMOutputDisplayType.OnError =&gt; errorMessage != <span class="keyword">null</span>,</div>
<div class="line"><span class="lineno">  449</span>                    _ =&gt; <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException($<span class="stringliteral">&quot;Invalid DiscordDMOutputDisplayType: {outputDisplayType}&quot;</span>),</div>
<div class="line"><span class="lineno">  450</span>                };</div>
<div class="line"><span class="lineno">  451</span> </div>
<div class="line"><span class="lineno">  452</span>                <span class="keywordflow">if</span> (dreamMakerOutput != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  453</span>                {</div>
<div class="line"><span class="lineno">  454</span>                    <span class="comment">// https://github.com/discord-net/Discord.Net/blob/8349cd7e1eb92e9a3baff68082c30a7b43e8e9b7/src/Discord.Net.Core/Entities/Messages/EmbedBuilder.cs#L431</span></div>
<div class="line"><span class="lineno">  455</span>                    <span class="keyword">const</span> <span class="keywordtype">int</span> MaxFieldValueLength = 1024;</div>
<div class="line"><span class="lineno">  456</span>                    showDMOutput = showDMOutput &amp;&amp; dreamMakerOutput.Length &lt; MaxFieldValueLength - (6 + Environment.NewLine.Length);</div>
<div class="line"><span class="lineno">  457</span>                    <span class="keywordflow">if</span> (showDMOutput)</div>
<div class="line"><span class="lineno">  458</span>                        fields.Add(<span class="keyword">new</span> EmbedField(</div>
<div class="line"><span class="lineno">  459</span>                            <span class="stringliteral">&quot;DreamMaker Output&quot;</span>,</div>
<div class="line"><span class="lineno">  460</span>                            $<span class="stringliteral">&quot;```{Environment.NewLine}{dreamMakerOutput}{Environment.NewLine}```&quot;</span>,</div>
<div class="line"><span class="lineno">  461</span>                            <span class="keyword">false</span>));</div>
<div class="line"><span class="lineno">  462</span>                }</div>
<div class="line"><span class="lineno">  463</span> </div>
<div class="line"><span class="lineno">  464</span>                <span class="keywordflow">if</span> (errorMessage != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  465</span>                    fields.Add(<span class="keyword">new</span> EmbedField(</div>
<div class="line"><span class="lineno">  466</span>                        <span class="stringliteral">&quot;Error Message&quot;</span>,</div>
<div class="line"><span class="lineno">  467</span>                        errorMessage,</div>
<div class="line"><span class="lineno">  468</span>                        <span class="keyword">false</span>));</div>
<div class="line"><span class="lineno">  469</span> </div>
<div class="line"><span class="lineno">  470</span>                var updatedMessage = $<span class="stringliteral">&quot;DM: Deployment {completionString}!&quot;</span>;</div>
<div class="line"><span class="lineno">  471</span> </div>
<div class="line"><span class="lineno">  472</span>                async Task CreateUpdatedMessage()</div>
<div class="line"><span class="lineno">  473</span>                {</div>
<div class="line"><span class="lineno">  474</span>                    var createUpdatedMessageResponse = await channelsClient.CreateMessageAsync(</div>
<div class="line"><span class="lineno">  475</span>                        <span class="keyword">new</span> Snowflake(channelId),</div>
<div class="line"><span class="lineno">  476</span>                        updatedMessage,</div>
<div class="line"><span class="lineno">  477</span>                        embeds: <span class="keyword">new</span> List&lt;IEmbed&gt; { embed },</div>
<div class="line"><span class="lineno">  478</span>                        ct: cancellationToken);</div>
<div class="line"><span class="lineno">  479</span> </div>
<div class="line"><span class="lineno">  480</span>                    <span class="keywordflow">if</span> (!createUpdatedMessageResponse.IsSuccess)</div>
<div class="line"><span class="lineno">  481</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogWarning(</div>
<div class="line"><span class="lineno">  482</span>                            <span class="stringliteral">&quot;Creating updated deploy embed failed: {result}&quot;</span>,</div>
<div class="line"><span class="lineno">  483</span>                            createUpdatedMessageResponse.LogFormat());</div>
<div class="line"><span class="lineno">  484</span>                }</div>
<div class="line"><span class="lineno">  485</span> </div>
<div class="line"><span class="lineno">  486</span>                <span class="keywordflow">if</span> (!messageResponse.IsSuccess)</div>
<div class="line"><span class="lineno">  487</span>                    await CreateUpdatedMessage();</div>
<div class="line"><span class="lineno">  488</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  489</span>                {</div>
<div class="line"><span class="lineno">  490</span>                    var editResponse = await channelsClient.EditMessageAsync(</div>
<div class="line"><span class="lineno">  491</span>                        <span class="keyword">new</span> Snowflake(channelId),</div>
<div class="line"><span class="lineno">  492</span>                        messageResponse.Entity.ID,</div>
<div class="line"><span class="lineno">  493</span>                        updatedMessage,</div>
<div class="line"><span class="lineno">  494</span>                        embeds: <span class="keyword">new</span> List&lt;IEmbed&gt; { embed },</div>
<div class="line"><span class="lineno">  495</span>                        ct: cancellationToken);</div>
<div class="line"><span class="lineno">  496</span> </div>
<div class="line"><span class="lineno">  497</span>                    <span class="keywordflow">if</span> (!editResponse.IsSuccess)</div>
<div class="line"><span class="lineno">  498</span>                    {</div>
<div class="line"><span class="lineno">  499</span>                        <a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_provider.html#ab24337ff80dfef1a9657f7106758a8c3">Logger</a>.LogWarning(</div>
<div class="line"><span class="lineno">  500</span>                            <span class="stringliteral">&quot;Updating deploy embed {messageId} failed, attempting new post: {result}&quot;</span>,</div>
<div class="line"><span class="lineno">  501</span>                            messageResponse.Entity.ID,</div>
<div class="line"><span class="lineno">  502</span>                            editResponse.LogFormat());</div>
<div class="line"><span class="lineno">  503</span>                        await CreateUpdatedMessage();</div>
<div class="line"><span class="lineno">  504</span>                    }</div>
<div class="line"><span class="lineno">  505</span>                }</div>
<div class="line"><span class="lineno">  506</span>            };</div>
<div class="line"><span class="lineno">  507</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_html_a9a15e3d6b18f2a38152106f6f3c1a933"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a9a15e3d6b18f2a38152106f6f3c1a933">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.BuildUpdateEmbedFields</a></div><div class="ttdeci">static List&lt; IEmbedField &gt; BuildUpdateEmbedFields(Models.RevisionInformation revisionInformation, Version byondVersion, string gitHubOwner, string gitHubRepo, bool localCommitPushed)</div><div class="ttdoc">Create a List&lt;T&gt; of IEmbedFields for a discord update embed.</div><div class="ttdef"><b>Definition:</b> <a href="_discord_provider_8cs_source.html#l00144">DiscordProvider.cs:144</a></div></div>
<div class="ttc" id="ainterface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider_html_ab2a2be82555afbf6ffb5b7ae3d90b7f0"><div class="ttname"><a href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html#ab2a2be82555afbf6ffb5b7ae3d90b7f0">Tgstation.Server.Host.System.IAssemblyInformationProvider.VersionPrefix</a></div><div class="ttdeci">string VersionPrefix</div><div class="ttdoc">Prefix to VersionString.</div><div class="ttdef"><b>Definition:</b> <a href="_i_assembly_information_provider_8cs_source.html#l00025">IAssemblyInformationProvider.cs:25</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_discord_provider_8cs_source.html#l00071">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.assemblyInformationProvider</a>, <a class="el" href="_discord_provider_8cs_source.html#l00144">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.BuildUpdateEmbedFields()</a>, <a class="el" href="_discord_provider_8cs_source.html#l00096">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.deploymentBranding</a>, <a class="el" href="_provider_8cs_source.html#l00036">Tgstation.Server.Host.Components.Chat.Providers.Provider.Logger</a>, <a class="el" href="_discord_provider_8cs_source.html#l00101">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.outputDisplayType</a>, <a class="el" href="_discord_provider_8cs_source.html#l00076">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.serviceProvider</a>, and <a class="el" href="_i_assembly_information_provider_8cs_source.html#l00025">Tgstation.Server.Host.System.IAssemblyInformationProvider.VersionPrefix</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_aababa7da5ca6ef1b92dfccff719e12ad_cgraph.png" border="0" usemap="#aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_aababa7da5ca6ef1b92dfccff719e12ad_cgraph" alt=""/></div>
<map name="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_aababa7da5ca6ef1b92dfccff719e12ad_cgraph" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_aababa7da5ca6ef1b92dfccff719e12ad_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,240,60"/>
<area shape="rect" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a9a15e3d6b18f2a38152106f6f3c1a933" title="Create a List&lt;T&gt; of IEmbedFields for a discord update embed." alt="" coords="288,5,523,60"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a73f7fae07fc8d7efc90b6464dc2eca79" name="a73f7fae07fc8d7efc90b6464dc2eca79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73f7fae07fc8d7efc90b6464dc2eca79">&#9670;&#160;</a></span>assemblyInformationProvider</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_system_1_1_i_assembly_information_provider.html">IAssemblyInformationProvider</a> Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.assemblyInformationProvider</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The IAssemblyInformationProvider for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html" title="IProvider for the Discord app.">DiscordProvider</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_discord_provider_8cs_source.html#l00071">71</a> of file <a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_discord_provider_8cs_source.html#l00190">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.DiscordProvider()</a>, and <a class="el" href="_discord_provider_8cs_source.html#l00379">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.SendUpdateMessage()</a>.</p>

</div>
</div>
<a id="a0ded452b4301f7d7dc776c15cbb76956" name="a0ded452b4301f7d7dc776c15cbb76956"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ded452b4301f7d7dc776c15cbb76956">&#9670;&#160;</a></span>basedMeme</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly bool Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.basedMeme</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>bool to enable based mode. Will auto reply with a youtube link to a video that says "based on the hardware that's installed in it" to anyone saying 'based on what?' case-insensitive.  </p>

<p class="definition">Definition at line <a class="el" href="_discord_provider_8cs_source.html#l00091">91</a> of file <a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_discord_provider_8cs_source.html#l00190">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.DiscordProvider()</a>, and <a class="el" href="_discord_provider_8cs_source.html#l00510">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.RespondAsync()</a>.</p>

</div>
</div>
<a id="a01881ab9506db0431f75db21224bf7e6" name="a01881ab9506db0431f75db21224bf7e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01881ab9506db0431f75db21224bf7e6">&#9670;&#160;</a></span>connectDisconnectLock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly object Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.connectDisconnectLock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Lock object used to sychronize connect/disconnect operations.  </p>

<p class="definition">Definition at line <a class="el" href="_discord_provider_8cs_source.html#l00086">86</a> of file <a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_discord_provider_8cs_source.html#l00631">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.Connect()</a>, <a class="el" href="_discord_provider_8cs_source.html#l00691">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.DisconnectImpl()</a>, and <a class="el" href="_discord_provider_8cs_source.html#l00190">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.DiscordProvider()</a>.</p>

</div>
</div>
<a id="a38455db633742e90572b9a83aa681831" name="a38455db633742e90572b9a83aa681831"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38455db633742e90572b9a83aa681831">&#9670;&#160;</a></span>currentUserId</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Snowflake Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.currentUserId</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The bot's Snowflake.  </p>

<p class="definition">Definition at line <a class="el" href="_discord_provider_8cs_source.html#l00121">121</a> of file <a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_discord_provider_8cs_source.html#l00631">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.Connect()</a>, and <a class="el" href="_discord_provider_8cs_source.html#l00510">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.RespondAsync()</a>.</p>

</div>
</div>
<a id="a182447c000f64abfb2e30336a6b9718f" name="a182447c000f64abfb2e30336a6b9718f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a182447c000f64abfb2e30336a6b9718f">&#9670;&#160;</a></span>deploymentBranding</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly bool Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.deploymentBranding</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If the tgstation-server logo is shown in deployment embeds.  </p>

<p class="definition">Definition at line <a class="el" href="_discord_provider_8cs_source.html#l00096">96</a> of file <a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_discord_provider_8cs_source.html#l00190">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.DiscordProvider()</a>, and <a class="el" href="_discord_provider_8cs_source.html#l00379">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.SendUpdateMessage()</a>.</p>

</div>
</div>
<a id="a317ac4b2144b7b5d2764063b158c7f54" name="a317ac4b2144b7b5d2764063b158c7f54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a317ac4b2144b7b5d2764063b158c7f54">&#9670;&#160;</a></span>disposing</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.disposing</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ae7dd055bf64dcff2228ae66fdcff7e92" title="The ServiceProvider containing Discord services.">serviceProvider</a> is being disposed.  </p>

<p class="definition">Definition at line <a class="el" href="_discord_provider_8cs_source.html#l00126">126</a> of file <a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_discord_provider_8cs_source.html#l00218">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.DisposeAsync()</a>.</p>

</div>
</div>
<a id="a6b6a170efd3f74b5c5f12cc41d7d0b5f" name="a6b6a170efd3f74b5c5f12cc41d7d0b5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b6a170efd3f74b5c5f12cc41d7d0b5f">&#9670;&#160;</a></span>gatewayCts</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CancellationTokenSource Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.gatewayCts</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The CancellationTokenSource for the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a331c4c449274e3681d766a5901e35a0b" title="The Task representing the lifetime of the client.">gatewayTask</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_discord_provider_8cs_source.html#l00106">106</a> of file <a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_discord_provider_8cs_source.html#l00631">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.Connect()</a>, <a class="el" href="_discord_provider_8cs_source.html#l00691">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.DisconnectImpl()</a>, and <a class="el" href="_discord_provider_8cs_source.html#l00218">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.DisposeAsync()</a>.</p>

</div>
</div>
<a id="a9c68a7a7bcd8b837c8b9b128890e9015" name="a9c68a7a7bcd8b837c8b9b128890e9015"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c68a7a7bcd8b837c8b9b128890e9015">&#9670;&#160;</a></span>gatewayReadyTcs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">TaskCompletionSource Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.gatewayReadyTcs</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The TaskCompletionSource for the initial gateway connection event.  </p>

<p class="definition">Definition at line <a class="el" href="_discord_provider_8cs_source.html#l00111">111</a> of file <a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_discord_provider_8cs_source.html#l00631">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.Connect()</a>, and <a class="el" href="_discord_provider_8cs_source.html#l00621">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.RespondAsync()</a>.</p>

</div>
</div>
<a id="a331c4c449274e3681d766a5901e35a0b" name="a331c4c449274e3681d766a5901e35a0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a331c4c449274e3681d766a5901e35a0b">&#9670;&#160;</a></span>gatewayTask</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Task&lt;Result&gt; Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.gatewayTask</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The Task representing the lifetime of the client.  </p>

<p class="definition">Definition at line <a class="el" href="_discord_provider_8cs_source.html#l00116">116</a> of file <a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_discord_provider_8cs_source.html#l00631">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.Connect()</a>, and <a class="el" href="_discord_provider_8cs_source.html#l00691">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.DisconnectImpl()</a>.</p>

</div>
</div>
<a id="a044ae95d278a4ed4a6a02449e24e8146" name="a044ae95d278a4ed4a6a02449e24e8146"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a044ae95d278a4ed4a6a02449e24e8146">&#9670;&#160;</a></span>mappedChannels</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly List&lt;ulong&gt; Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.mappedChannels</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>List&lt;T&gt; of mapped channel Snowflakes.  </p>

<p class="definition">Definition at line <a class="el" href="_discord_provider_8cs_source.html#l00081">81</a> of file <a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_discord_provider_8cs_source.html#l00190">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.DiscordProvider()</a>, <a class="el" href="_discord_provider_8cs_source.html#l00716">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.MapChannelsImpl()</a>, <a class="el" href="_discord_provider_8cs_source.html#l00510">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.RespondAsync()</a>, and <a class="el" href="_discord_provider_8cs_source.html#l00288">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.SendMessage()</a>.</p>

</div>
</div>
<a id="a96681c4d5a393d80bd2ff022eed95ee5" name="a96681c4d5a393d80bd2ff022eed95ee5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96681c4d5a393d80bd2ff022eed95ee5">&#9670;&#160;</a></span>outputDisplayType</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#af16952d12561118ecebc3d8ccf510221">DiscordDMOutputDisplayType</a> Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.outputDisplayType</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The <a class="el" href="namespace_tgstation_1_1_server_1_1_api_1_1_models.html#af16952d12561118ecebc3d8ccf510221" title="When the DM output section of Discord deployment embeds should be shown.">DiscordDMOutputDisplayType</a>.  </p>

<p class="definition">Definition at line <a class="el" href="_discord_provider_8cs_source.html#l00101">101</a> of file <a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_discord_provider_8cs_source.html#l00190">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.DiscordProvider()</a>, and <a class="el" href="_discord_provider_8cs_source.html#l00379">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.SendUpdateMessage()</a>.</p>

</div>
</div>
<a id="ae7dd055bf64dcff2228ae66fdcff7e92" name="ae7dd055bf64dcff2228ae66fdcff7e92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7dd055bf64dcff2228ae66fdcff7e92">&#9670;&#160;</a></span>serviceProvider</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly ServiceProvider Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.serviceProvider</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ServiceProvider containing Discord services.  </p>

<p class="definition">Definition at line <a class="el" href="_discord_provider_8cs_source.html#l00076">76</a> of file <a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_discord_provider_8cs_source.html#l00631">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.Connect()</a>, <a class="el" href="_discord_provider_8cs_source.html#l00190">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.DiscordProvider()</a>, <a class="el" href="_discord_provider_8cs_source.html#l00218">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.DisposeAsync()</a>, <a class="el" href="_discord_provider_8cs_source.html#l00867">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.GetAllAccessibleTextChannels()</a>, <a class="el" href="_discord_provider_8cs_source.html#l00716">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.MapChannelsImpl()</a>, <a class="el" href="_discord_provider_8cs_source.html#l00510">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.RespondAsync()</a>, <a class="el" href="_discord_provider_8cs_source.html#l00288">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.SendMessage()</a>, and <a class="el" href="_discord_provider_8cs_source.html#l00379">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.SendUpdateMessage()</a>.</p>

</div>
</div>
<a id="a1896b3a7ddd7b500c2624d3676b64eaf" name="a1896b3a7ddd7b500c2624d3676b64eaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1896b3a7ddd7b500c2624d3676b64eaf">&#9670;&#160;</a></span>SupportedGuildChannelTypes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly ChannelType [] Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.SupportedGuildChannelTypes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= <span class="keyword">new</span>[]</div>
<div class="line">        {</div>
<div class="line">            ChannelType.GuildText,</div>
<div class="line">            ChannelType.GuildAnnouncement,</div>
<div class="line">            ChannelType.PrivateThread,</div>
<div class="line">            ChannelType.PublicThread,</div>
<div class="line">        }</div>
</div><!-- fragment -->
<p>The ChannelTypes supported by the <a class="el" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html" title="IProvider for the Discord app.">DiscordProvider</a> for mapping.  </p>

<p class="definition">Definition at line <a class="el" href="_discord_provider_8cs_source.html#l00060">60</a> of file <a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a>.</p>

<p class="reference">Referenced by <a class="el" href="_discord_provider_8cs_source.html#l00867">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.GetAllAccessibleTextChannels()</a>, and <a class="el" href="_discord_provider_8cs_source.html#l00716">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.MapChannelsImpl()</a>.</p>

</div>
</div>
<h2 class="groupheader">Property Documentation</h2>
<a id="af40c0ea392de9986a4705d403674f61c" name="af40c0ea392de9986a4705d403674f61c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af40c0ea392de9986a4705d403674f61c">&#9670;&#160;</a></span>BotMention</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">override string Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.BotMention</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The string that indicates the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html" title="For interacting with a chat service.">IProvider</a> was mentioned.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html#a781f872cb8143fe3ff92f3cc8d0d5abb">Tgstation.Server.Host.Components.Chat.Providers.IProvider</a>.</p>

<p class="definition">Definition at line <a class="el" href="_discord_provider_8cs_source.html#l00047">47</a> of file <a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   48</span>        {</div>
<div class="line"><span class="lineno">   49</span>            <span class="keyword">get</span></div>
<div class="line"><span class="lineno">   50</span>            {</div>
<div class="line"><span class="lineno">   51</span>                <span class="keywordflow">if</span> (!<a class="code hl_property" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ac2744da20824177724b971eb20a6d5a0">Connected</a>)</div>
<div class="line"><span class="lineno">   52</span>                    <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Provider not connected&quot;</span>);</div>
<div class="line"><span class="lineno">   53</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#a3cf5b9ba9079d6c9f582f61b5894f7c1">NormalizeMentions</a>($<span class="stringliteral">&quot;&lt;@{currentUserId}&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">   54</span>            }</div>
<div class="line"><span class="lineno">   55</span>        }</div>
<div class="ttc" id="aclass_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider_html_ac2744da20824177724b971eb20a6d5a0"><div class="ttname"><a href="class_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_discord_provider.html#ac2744da20824177724b971eb20a6d5a0">Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.Connected</a></div><div class="ttdeci">override bool Connected</div><div class="ttdoc">If the IProvider is currently connected.</div><div class="ttdef"><b>Definition:</b> <a href="_discord_provider_8cs_source.html#l00044">DiscordProvider.cs:44</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac2744da20824177724b971eb20a6d5a0" name="ac2744da20824177724b971eb20a6d5a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2744da20824177724b971eb20a6d5a0">&#9670;&#160;</a></span>Connected</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">override bool Tgstation.Server.Host.Components.Chat.Providers.DiscordProvider.Connected</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If the <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html" title="For interacting with a chat service.">IProvider</a> is currently connected.  </p>

<p>Implements <a class="el" href="interface_tgstation_1_1_server_1_1_host_1_1_components_1_1_chat_1_1_providers_1_1_i_provider.html#acc07a6bfb2fbb35243aa1e147d92dd87">Tgstation.Server.Host.Components.Chat.Providers.IProvider</a>.</p>

<p class="definition">Definition at line <a class="el" href="_discord_provider_8cs_source.html#l00044">44</a> of file <a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/Tgstation.Server.Host/Components/Chat/Providers/<a class="el" href="_discord_provider_8cs_source.html">DiscordProvider.cs</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
